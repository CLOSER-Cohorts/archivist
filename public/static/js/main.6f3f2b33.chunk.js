(this["webpackJsonpheyslate-react"]=this["webpackJsonpheyslate-react"]||[]).push([[0],{275:function(e,t,n){e.exports=n(351)},351:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),c=n.n(i),l=n(8),o=n(20),s=n(38),u=n(11),m={login:"/login",datasets:Object(u.include)("/datasets",{all:""}),admin:Object(u.include)("/admin/",{import:"import",imports:"imports",instruments:Object(u.include)("instruments/",{all:"",importMappings:":instrumentId/imports"}),datasets:Object(u.include)("datasets/",{all:"",importMappings:":datasetId/imports"})}),instruments:Object(u.include)("/instruments",{all:"",instrument:Object(u.include)(":instrument_id/",{show:"",map:Object(u.include)("map/",{show:""}),build:Object(u.include)("build/",{show:"",constructs:Object(u.include)("constructs/",{show:""}),codeLists:Object(u.include)("code_lists/",{all:"",show:":codeListId",new:"new"}),questionItems:Object(u.include)("question_items/",{all:"",show:":questionItemId",new:"new"}),questionGrids:Object(u.include)("question_grids/",{all:"",show:":questionGridId",new:"new"}),responseDomains:Object(u.include)("response_domains/",{all:"",new:"new",show:":responseDomainType/:responseDomainId"})})})})},d=function(e){var t=Object(l.c)((function(e){return e.auth.isAuthUser})),n=e.type;return"guest"===n&&t?r.a.createElement(s.a,{to:Object(u.reverse)(m.instruments.all)}):"private"!==n||t?r.a.createElement(s.b,e):r.a.createElement(s.a,{to:Object(u.reverse)(m.login)})},p=n(21),b=n(426),E=n(360),f=n(396),O=n(397),h=n(245),v=n.n(h),g=n(127),j=n(393),y=n(395),I=n(6),_=n(15),S=n.n(_),N="https://closer-react.herokuapp.com",T=function(){return{Authorization:"Bearer "+window.localStorage.getItem("jwt"),"Content-Type":"application/json"}};S.a.interceptors.response.use((function(e){return e}),(function(e){if(401!==e.response.status)return Promise.reject(e);window.localStorage.removeItem("jwt"),window.location="/login"}));var D=function(){var e=S.a.get(N+"/datasets.json",{headers:T()});return function(t){return e.then((function(e){t(Re(e.data))})).catch((function(e){t(Ue(e.message))}))}},w=function(e){var t=S.a.get(N+"/datasets/"+e+".json?questions=true",{headers:T()});return function(e){return t.then((function(t){e(Le(t.data))})).catch((function(t){e(Ue(t.message))}))}},C=function(e){var t=new FormData;t.append("files[]",e.files[0]);var n=S.a.post(N+"/admin/import/instruments/",t,{headers:Object(I.a)(Object(I.a)({},T()),{"Content-Type":"multipart/form-data"})});return function(e){return e(ie("new","AdminInstrument")),n.then((function(t){e(ce("new","AdminInstrument"))})).catch((function(e){console.log("error")}))}},x=function(e){var t=new FormData;t.append("files[]",e.files[0]);var n=S.a.post(N+"/admin/import/datasets/",t,{headers:Object(I.a)(Object(I.a)({},T()),{"Content-Type":"multipart/form-data"})});return function(e){return e(ie("new","AdminDataset")),n.then((function(t){e(ce("new","AdminDataset"))})).catch((function(e){console.log("error")}))}},q=function(e,t,n){var a=new FormData;a.append("files[]",n.files[0]);var r=S.a.post(N+"/"+e+"/"+t+"/imports.json",a,{headers:Object(I.a)(Object(I.a)({},T()),{"Content-Type":"multipart/form-data"})});return function(e){return e(ie("new","AdminImportMappings")),r.then((function(t){e(ce("new","AdminImportMappings"))})).catch((function(e){console.log("error")}))}},R=function(e,t){var n=S.a.get(N+"/"+e+"/"+t+"/imports.json",{headers:T()});return function(e){return n.then((function(t){e(Ae(t.data))})).catch((function(t){e(Ue(t.message))}))}},L=function(){var e=S.a.get(N+"/imports.json",{headers:T()});return function(t){return e.then((function(e){t(Ae(e.data))})).catch((function(e){t(Ue(e.message))}))}},A=function(){var e=S.a.get(N+"/instruments.json",{headers:T()});return function(t){return e.then((function(e){t(Me(e.data))})).catch((function(e){t(Ue(e.message))}))}},M=function(e){var t=S.a.get(N+"/instruments/"+e+".json",{headers:T()});return function(e){return t.then((function(t){e(Pe(t.data))})).catch((function(t){e(Ue(t.message))}))}},P=function(e){var t=S.a.get(N+"/instruments/"+e+"/stats.json",{headers:T()});return function(n){return t.then((function(t){n(ke(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},k=function(e,t){var n=S.a.post(N+"/instruments/"+e+"/reorder_ccs.json",{updates:t},{headers:T()});return function(e){return n.then((function(e){console.log("ok")})).catch((function(e){console.log("error")}))}},Q=function(e){var t=S.a.get(N+"/instruments/"+e+"/categories.json",{headers:T()});return function(n){return t.then((function(t){n(U(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},U=function(e,t){return{type:"LOAD_INSTRUMENT_CATEGORIES",payload:{instrumentId:e,categories:t}}},z={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/code_lists.json",{headers:T()});return function(n){return t.then((function(t){n(G(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/code_lists/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"CodeList")),a.then((function(a){n(ce(t,"CodeList")),n(V(e,a.data))})).catch((function(e){n(ze(t,"CodeList",e.response.data.error_sentence))}))}},create:function(e,t){var n=S.a.post(N+"/instruments/"+e+"/code_lists.json",t,{headers:T()});return function(t){return t(ie("new","CodeList")),n.then((function(n){t(ce("new","CodeList")),t(V(e,n.data)),t(We(Object(u.reverse)(m.instruments.instrument.build.codeLists.show,{instrument_id:e,codeListId:n.data.id})))})).catch((function(e){t(ze("new","CodeList",e.response.data.error_sentence))}))}},delete:function(e,t){var n=S.a.delete(N+"/instruments/"+e+"/code_lists/"+t+".json",{headers:T()});return function(a){return n.then((function(n){a(Qe(e,"CodeList",t)),a(We(Object(u.reverse)(m.instruments.instrument.build.codeLists.all,{instrument_id:e})))})).catch((function(e){a(ce(t,"CodeList")),a(ze(t,"CodeList",e.response.data.error_sentence))}))}}},G=function(e,t){return{type:"LOAD_INSTRUMENT_CODE_LISTS",payload:{instrumentId:e,codeLists:t}}},V=function(e,t){return{type:"LOAD_INSTRUMENT_CODE_LIST",payload:{instrumentId:e,codeList:t}}},W={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/cc_sequences.json",{headers:T()});return function(n){return t.then((function(t){n(B(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/cc_sequences/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"CcSequence")),a.then((function(a){n(ce(t,"CcSequence")),n(F(e,a.data))})).catch((function(e){n(ze(t,"CcSequence",e.response.data))}))}},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},a=S.a.post(N+"/instruments/"+e+"/cc_sequences.json",t,{headers:T()});return function(t){return t(ie("new","CcSequence")),a.then((function(a){t(ce("new","CcSequence")),t(F(e,a.data)),n({id:a.data.id})})).catch((function(e){t(ze("new","CcSequence",e.response.data))}))}},delete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=S.a.delete(N+"/instruments/"+e+"/cc_sequences/"+t+".json",{headers:T()});return function(r){return r(ie(t,"CcSequence")),a.then((function(a){r(ce(t,"CcSequence")),r(Qe(e,"CcSequence",t)),n()})).catch((function(e){r(ze(t,"CcSequence",e.response.data))}))}}},B=function(e,t){return{type:"LOAD_INSTRUMENT_SEQUENCES",payload:{instrumentId:e,sequences:t}}},F=function(e,t){return{type:"LOAD_INSTRUMENT_SEQUENCE",payload:{instrumentId:e,sequence:t}}},Y={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/cc_statements.json",{headers:T()});return function(n){return t.then((function(t){n(H(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/cc_statements/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"CcStatement")),a.then((function(a){n(ce(t,"CcStatement")),n(J(e,a.data))})).catch((function(e){n(ze(t,"CcStatement",e.response.data))}))}},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},a=S.a.post(N+"/instruments/"+e+"/cc_statements.json",t,{headers:T()});return function(t){return t(ie("new","CcStatement")),a.then((function(a){t(ce("new","CcStatement")),t(J(e,a.data)),n({id:a.data.id})})).catch((function(e){t(ze("new","CcStatement",e.response.data))}))}},delete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=S.a.delete(N+"/instruments/"+e+"/cc_statements/"+t+".json",{headers:T()});return function(r){return r(ie(t,"CcStatement")),a.then((function(a){r(ce(t,"CcStatement")),r(Qe(e,"CcStatement",t)),n()})).catch((function(e){r(ze(t,"CcStatement",e.response.data))}))}}},H=function(e,t){return{type:"LOAD_INSTRUMENT_STATEMENTS",payload:{instrumentId:e,statements:t}}},J=function(e,t){return{type:"LOAD_INSTRUMENT_STATEMENT",payload:{instrumentId:e,statement:t}}},X={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/cc_loops.json",{headers:T()});return function(n){return t.then((function(t){n(K(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/cc_loops/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"CcLoop")),a.then((function(a){n(ce(t,"CcLoop")),n($(e,a.data))})).catch((function(e){n(ze(t,"CcLoop",e.response.data.error_sentence))}))}},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},a=S.a.post(N+"/instruments/"+e+"/cc_loops.json",t,{headers:T()});return function(t){return t(ie("new","CcLoop")),a.then((function(a){t(ce("new","CcLoop")),t($(e,a.data)),n({id:a.data.id})})).catch((function(e){t(ze("new","CcLoop",e.response.data.error_sentence))}))}},delete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=S.a.delete(N+"/instruments/"+e+"/cc_loops/"+t+".json",{headers:T()});return function(r){return r(ie(t,"CcLoop")),a.then((function(a){r(ce(t,"CcLoop")),r(Qe(e,"CcLoop",t)),n()})).catch((function(e){r(ze(t,"CcLoop",e.response.data.error_sentence))}))}}},K=function(e,t){return{type:"LOAD_INSTRUMENT_LOOPS",payload:{instrumentId:e,loops:t}}},$=function(e,t){return{type:"LOAD_INSTRUMENT_LOOP",payload:{instrumentId:e,loop:t}}},Z=function(e){var t=S.a.get(N+"/instruments/"+e+"/response_units.json",{headers:T()});return function(n){return t.then((function(t){n(ee(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},ee=function(e,t){return{type:"LOAD_INSTRUMENT_RESPONSE_UNITS",payload:{instrumentId:e,responseUnits:t}}},te={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/cc_conditions.json",{headers:T()});return function(n){return t.then((function(t){n(ne(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/cc_conditions/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"CcCondition")),a.then((function(a){n(ce(t,"CcCondition")),n(ae(e,a.data))})).catch((function(e){n(ze(t,"CcCondition",e.response.data))}))}},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},a=S.a.post(N+"/instruments/"+e+"/cc_conditions.json",t,{headers:T()});return function(t){return t(ie("new","CcCondition")),a.then((function(a){t(ce("new","CcCondition")),t(ae(e,a.data)),n({id:a.data.id})})).catch((function(e){t(ze("new","CcCondition",e.response.data))}))}},delete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=S.a.delete(N+"/instruments/"+e+"/cc_conditions/"+t+".json",{headers:T()});return function(r){return r(ie(t,"CcCondition")),a.then((function(a){r(ce(t,"CcCondition")),r(Qe(e,"CcCondition",t)),n()})).catch((function(e){r(ze(t,"CcCondition",e.response.data))}))}}},ne=function(e,t){return{type:"LOAD_INSTRUMENT_CONDITIONS",payload:{instrumentId:e,conditions:t}}},ae=function(e,t){return{type:"LOAD_INSTRUMENT_CONDITION",payload:{instrumentId:e,condition:t}}},re={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/cc_questions.json",{headers:T()});return function(n){return t.then((function(t){n(le(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/cc_questions/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"CcQuestion")),a.then((function(a){n(ce(t,"CcQuestion")),n(oe(e,a.data))})).catch((function(e){n(ze(t,"CcQuestion",e.response.data))}))}},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},a=S.a.post(N+"/instruments/"+e+"/cc_questions.json",t,{headers:T()});return function(t){return t(ie("new","CcQuestion")),a.then((function(a){t(ce("new","CcQuestion")),t(oe(e,a.data)),n({id:a.data.id})})).catch((function(e){t(ze("new","CcQuestion",e.response.data))}))}},delete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=S.a.delete(N+"/instruments/"+e+"/cc_questions/"+t+".json",{headers:T()});return function(r){return r(ie(t,"CcQuestion")),a.then((function(a){r(ce(t,"CcQuestion")),r(Qe(e,"CcQuestion",t)),n()})).catch((function(e){r(ze(t,"CcQuestion",e.response.data))}))}},topic:{set:function(e,t,n){var a=S.a.post(N+"/instruments/"+e+"/cc_questions/"+t+"/set_topic.json",{topic_id:n},{headers:T()});return function(n){return n(ie(t,"CcQuestion")),a.then((function(a){n(ce(t,"CcQuestion")),n(oe(e,a.data))})).catch((function(e){n(ze(t,"CcQuestion",e.response.data.message))}))}}},variables:{add:function(e,t,n){var a=S.a.post(N+"/instruments/"+e+"/cc_questions/"+t+"/add_variables.json",{variable_names:n},{headers:T()});return function(n){return n(ie(t,"CcQuestion")),a.then((function(a){n(ce(t,"CcQuestion")),n(oe(e,a.data))})).catch((function(e){n(ze(t,"CcQuestion",e.response.data.message))}))}},remove:function(e,t,n){var a=S.a.post(N+"/instruments/"+e+"/cc_questions/"+t+"/remove_variable.json",{variable_id:n},{headers:T()});return function(n){return n(ie(t,"CcQuestion")),a.then((function(a){n(ce(t,"CcQuestion")),n(oe(e,a.data))})).catch((function(e){n(ze(t,"CcQuestion",e.message))}))}}}},ie=function(e,t){return{type:"SAVING",payload:{id:e,type:t}}},ce=function(e,t){return{type:"SAVED",payload:{id:e,type:t}}},le=function(e,t){return{type:"LOAD_INSTRUMENT_QUESTIONS",payload:{instrumentId:e,questions:t}}},oe=function(e,t){return{type:"LOAD_INSTRUMENT_QUESTION",payload:{instrumentId:e,question:t}}},se={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/question_items.json",{headers:T()});return function(n){return t.then((function(t){n(ue(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/question_items/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"QuestionItem")),a.then((function(a){n(ce(t,"QuestionItem")),n(me(e,a.data))})).catch((function(e){n(ze(t,"QuestionItem",e.response.data.error_sentence))}))}},create:function(e,t){var n=S.a.post(N+"/instruments/"+e+"/question_items.json",t,{headers:T()});return function(t){return t(ie("new","QuestionItem")),n.then((function(n){t(ce("new","QuestionItem")),t(me(e,n.data)),t(We(Object(u.reverse)(m.instruments.instrument.build.questionItems.show,{instrument_id:e,questionItemId:n.data.id})))})).catch((function(e){t(ze("new","QuestionItem",e.response.data.error_sentence))}))}},delete:function(e,t){var n=S.a.delete(N+"/instruments/"+e+"/question_items/"+t+".json",{headers:T()});return function(a){return a(ie(t,"QuestionItem")),n.then((function(n){a(ce(t,"QuestionItem")),a(Qe(e,"QuestionItem",t)),a(We(Object(u.reverse)(m.instruments.instrument.build.questionItems.all,{instrument_id:e})))})).catch((function(e){a(ze(t,"QuestionItem",e.response.data.error_sentence))}))}}},ue=function(e,t){return{type:"LOAD_INSTRUMENT_QUESTION_ITEMS",payload:{instrumentId:e,questions:t}}},me=function(e,t){return{type:"LOAD_INSTRUMENT_QUESTION_ITEM",payload:{instrumentId:e,questionItem:t}}},de={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/question_grids.json",{headers:T()});return function(n){return t.then((function(t){n(pe(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/question_grids/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"QuestionGrid")),a.then((function(a){n(ce(t,"QuestionGrid")),n(be(e,a.data))})).catch((function(e){n(ze(t,"QuestionGrid",e.response.data.error_sentence))}))}},create:function(e,t){var n=S.a.post(N+"/instruments/"+e+"/question_grids.json",t,{headers:T()});return function(t){return t(ie("new","QuestionGrid")),n.then((function(n){t(ce("new","QuestionGrid")),t(be(e,n.data)),t(We(Object(u.reverse)(m.instruments.instrument.build.questionGrids.show,{instrument_id:e,questionGridId:n.data.id})))})).catch((function(e){t(ze("new","QuestionGrid",e.response.data.error_sentence))}))}},delete:function(e,t){var n=S.a.delete(N+"/instruments/"+e+"/question_grids/"+t+".json",{headers:T()});return function(a){return a(ie(t,"QuestionGrid")),n.then((function(n){a(ce(t,"QuestionGrid")),a(Qe(e,"QuestionGrid",t)),a(We(Object(u.reverse)(m.instruments.instrument.build.questionGrids.all,{instrument_id:e})))})).catch((function(e){a(ze(t,"QuestionGrid",e.response.data.error_sentence))}))}}},pe=function(e,t){return{type:"LOAD_INSTRUMENT_QUESTION_GRIDS",payload:{instrumentId:e,questions:t}}},be=function(e,t){return{type:"LOAD_INSTRUMENT_QUESTION_GRID",payload:{instrumentId:e,questionGrid:t}}},Ee={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/response_domain_numerics.json",{headers:T()});return function(n){return t.then((function(t){n(fe(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/response_domain_numerics/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"ResponseDomainNumeric")),a.then((function(a){n(ce(t,"ResponseDomainNumeric")),n(Oe(e,a.data))})).catch((function(e){n(ze(t,"ResponseDomainNumeric",e.response.data.error_sentence))}))}},create:function(e,t){var n=S.a.post(N+"/instruments/"+e+"/response_domain_numerics.json",t,{headers:T()});return function(t){return t(ie("new","ResponseDomainNumeric")),n.then((function(n){t(ce("new","ResponseDomainNumeric")),t(Oe(e,n.data)),t(We(Object(u.reverse)(m.instruments.instrument.build.responseDomains.show,{instrument_id:e,responseDomainType:n.data.type,responseDomainId:n.data.id})))})).catch((function(e){t(ze("new","ResponseDomainNumeric",e.response.data.error_sentence))}))}},delete:function(e,t){var n=S.a.delete(N+"/instruments/"+e+"/response_domain_numerics/"+t+".json",{headers:T()});return function(a){return a(ie(t,"ResponseDomainNumeric")),n.then((function(n){a(ce(t,"ResponseDomainNumeric")),a(Qe(e,"ResponseDomainNumeric",t)),a(We(Object(u.reverse)(m.instruments.instrument.build.responseDomains.all,{instrument_id:e})))})).catch((function(e){a(ze(t,"ResponseDomainNumeric",e.response.data.error_sentence))}))}}},fe=function(e,t){return{type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_NUMERICS",payload:{instrumentId:e,responseDomainNumerics:t}}},Oe=function(e,t){return{type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_NUMERIC",payload:{instrumentId:e,responseDomainNumeric:t}}},he={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/response_domain_texts.json",{headers:T()});return function(n){return t.then((function(t){n(ve(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/response_domain_texts/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"ResponseDomainText")),a.then((function(a){n(ce(t,"ResponseDomainText")),n(ge(e,a.data))})).catch((function(e){n(ze(t,"ResponseDomainText",e.response.data.error_sentence))}))}},create:function(e,t){var n=S.a.post(N+"/instruments/"+e+"/response_domain_texts.json",t,{headers:T()});return function(t){return t(ie("new","ResponseDomainText")),n.then((function(n){t(ce("new","ResponseDomainText")),t(ge(e,n.data)),t(We(Object(u.reverse)(m.instruments.instrument.build.responseDomains.show,{instrument_id:e,responseDomainType:n.data.type,responseDomainId:n.data.id})))})).catch((function(e){t(ze("new","ResponseDomainText",e.response.data.error_sentence))}))}},delete:function(e,t){var n=S.a.delete(N+"/instruments/"+e+"/response_domain_texts/"+t+".json",{headers:T()});return function(a){return a(ie(t,"ResponseDomainText")),n.then((function(n){a(ce(t,"ResponseDomainText")),a(Qe(e,"ResponseDomainText",t)),a(We(Object(u.reverse)(m.instruments.instrument.build.responseDomains.all,{instrument_id:e})))})).catch((function(e){a(ze(t,"ResponseDomainText",e.response.data.error_sentence))}))}}},ve=function(e,t){return{type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_TEXTS",payload:{instrumentId:e,responseDomainTexts:t}}},ge=function(e,t){return{type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_TEXT",payload:{instrumentId:e,responseDomainText:t}}},je={all:function(e){var t=S.a.get(N+"/instruments/"+e+"/response_domain_datetimes.json",{headers:T()});return function(n){return t.then((function(t){n(ye(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},update:function(e,t,n){var a=S.a.put(N+"/instruments/"+e+"/response_domain_datetimes/"+t+".json",n,{headers:T()});return function(n){return n(ie(t,"ResponseDomainDatetime")),a.then((function(a){n(ce(t,"ResponseDomainDatetime")),n(Ie(e,a.data))})).catch((function(e){n(ze(t,"ResponseDomainDatetime",e.response.data.error_sentence))}))}},create:function(e,t){var n=S.a.post(N+"/instruments/"+e+"/response_domain_datetimes.json",t,{headers:T()});return function(t){return t(ie("new","ResponseDomainDatetime")),n.then((function(n){t(ce("new","ResponseDomainDatetime")),t(Ie(e,n.data)),t(We(Object(u.reverse)(m.instruments.instrument.build.responseDomains.show,{instrument_id:e,responseDomainType:n.data.type,responseDomainId:n.data.id})))})).catch((function(e){t(ze("new","ResponseDomainDatetime",e.response.data.error_sentence))}))}},delete:function(e,t){var n=S.a.delete(N+"/instruments/"+e+"/response_domain_datetimes/"+t+".json",{headers:T()});return function(a){return a(ie(t,"ResponseDomainDatetime")),n.then((function(n){a(ce(t,"ResponseDomainDatetime")),a(Qe(e,"ResponseDomainDatetime",t)),a(We(Object(u.reverse)(m.instruments.instrument.build.responseDomains.all,{instrument_id:e})))})).catch((function(e){a(ze(t,"ResponseDomainDatetime",e.response.data.error_sentence))}))}}},ye=function(e,t){return{type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_DATETIMES",payload:{instrumentId:e,responseDomainDatetimes:t}}},Ie=function(e,t){return{type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_DATETIME",payload:{instrumentId:e,responseDomainDatetime:t}}},_e=function(e){var t=S.a.get(N+"/instruments/"+e+"/variables.json",{headers:T()});return function(n){return t.then((function(t){n(Se(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},Se=function(e,t){return{type:"LOAD_INSTRUMENT_VARIABLES",payload:{instrumentId:e,variables:t}}},Ne=function(e){var t=S.a.get(N+"/datasets/"+e+"/variables.json",{headers:T()});return function(n){return t.then((function(t){n(we(e,t.data))})).catch((function(e){n(Ue(e.message))}))}},Te=function(e,t,n){var a=S.a.post(N+"/datasets/"+e+"/variables/"+t+"/add_sources.json",{sources:{id:n,x:null,y:null}},{headers:T()});return function(n){return n(ie(t,"DatasetVariable")),a.then((function(a){n(ce(t,"DatasetVariable")),n(Ce(e,a.data))})).catch((function(e){n(ze(t,"DatasetVariable",e.response.data.message))}))}},De=function(e,t,n){var a=S.a.post(N+"/datasets/"+e+"/variables/"+t+"/remove_source.json",{other:{id:n.id,class:n.class,x:n.x,y:n.y}},{headers:T()});return function(n){return n(ie(t,"DatasetVariable")),a.then((function(a){n(ce(t,"DatasetVariable")),n(Ce(e,a.data))})).catch((function(e){n(ze(t,"DatasetVariable",e.message))}))}},we=function(e,t){return{type:"LOAD_DATASET_VARIABLES",payload:{datasetId:e,variables:t}}},Ce=function(e,t){return{type:"LOAD_DATASET_VARIABLE",payload:{datasetId:e,variable:t}}},xe=function(){var e=S.a.get(N+"/topics/flattened_nest.json",{headers:T()});return function(t){return e.then((function(e){t(qe(e.data))})).catch((function(e){t(Ue(e.message))}))}},qe=function(e){return{type:"LOAD_TOPICS",payload:{topics:e}}},Re=function(e){return{type:"LOAD_DATASETS",payload:{datasets:e}}},Le=function(e){return{type:"LOAD_DATASET",payload:{dataset:e}}},Ae=function(e){return{type:"LOAD_ADMIN_IMPORTS",payload:{imports:e}}},Me=function(e){return{type:"LOAD_INSTRUMENTS",payload:{instruments:e}}},Pe=function(e){return{type:"LOAD_INSTRUMENT",payload:{instrument:e}}},ke=function(e,t){return{type:"LOAD_INSTRUMENT_STATS",payload:{instrumentId:e,stats:t}}},Qe=function(e,t,n){return{type:"DELETE_INSTRUMENT_OBJECT_TYPE",payload:{instrumentId:e,id:n,objectType:t}}},Ue=function(e){return{type:"FETCH_FAILURE",payload:{error:e}}},ze=function(e,t,n){return{type:"ERROR",payload:{id:e,type:t,error:n}}},Ge=function(e){return{type:"LOGIN",payload:Object(I.a)({},e)}},Ve=function(e){return{type:"LOGIN_FAILURE",payload:{error:e}}},We=function(e){return{type:"REDIRECT",payload:{to:e}}},Be=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.a.useState(e),n=Object(p.a)(t,2),a=n[0],i=n[1],c=r.a.useCallback((function(e){return i(e.target.value)}),[]);return{value:a,onChange:c}};function Ye(){var e=Be(),t=Fe(),n=Fe(),a=Object(l.b)();return r.a.createElement(y.a,{component:"main",maxWidth:"xs"},r.a.createElement(f.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(b.a,{className:e.avatar},r.a.createElement(v.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),a(function(e,t){var n=S.a.post(N+"/users/sign_in.json",{user:{email:e,password:t}});return function(e){return n.then((function(t){e(Ge(t.data))})).catch((function(t){e(Ve(t.message))}))}}(t.value,n.value))}},r.a.createElement(O.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0},t)),r.a.createElement(O.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"},n)),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Log In"))))}var He=n(3),Je=n(430),Xe=n(431),Ke=n(403),$e=n(404),Ze=n(399),et=n(406),tt=n(219),nt=n(407),at=n(186),rt=n(251),it=n.n(rt),ct=n(253),lt=n.n(ct),ot=n(252),st=n.n(ot),ut=n(361),mt=n(400),dt=n(401),pt=n(249),bt=n.n(pt),Et=n(248),ft=n.n(Et),Ot=n(250),ht=n.n(Ot),vt=n(246),gt=n.n(vt),jt=n(425),yt=n(247),It=n.n(yt),_t=n(4),St=function(e){var t=e.text,n=e.link;return Object(_t.isEmpty)(n)?r.a.createElement(g.a,{color:"textPrimary"},t):r.a.createElement(o.b,{color:"inherit",to:n},t)},Nt=Object(j.a)((function(e){return{root:{"margin-bottom":"10px",padding:"15px"}}})),Tt=function(e){var t=e.instrumentId,n=Object(s.h)(),a=function(){return[{text:"Datasets",link:Object(u.reverse)(m.datasets.all)}]},i=function(){return[{text:"Admin",link:Object(u.reverse)(m.admin.instruments)}]},c=function(){var e=[{text:"Instruments",link:Object(u.reverse)(m.instruments.all)}];if(t){e.push({text:t,link:Object(u.reverse)(m.instruments.instrument.show,{instrument_id:t})});var a=function(){var e="/instruments\\/".concat(t,"\\/(?<type>build|map)/?(?<subtype>question_grids|question_items|response_domains|code_lists|constructs)?/?"),a=n.pathname.match(new RegExp(e));return Object(_t.get)(a,"groups",{})}();if(a)switch(a.type){case"map":e.push({text:"Map",link:Object(u.reverse)(m.instruments.instrument.map.show,{instrument_id:t})});break;case"build":e.push({text:"Build",link:Object(u.reverse)(m.instruments.instrument.build.show,{instrument_id:t})}),a.subtype&&("question_items"===a.subtype?e.push({text:"Question Items",link:Object(u.reverse)(m.instruments.instrument.build.questionItems.all,{instrument_id:t})}):"question_grids"===a.subtype?e.push({text:"Question Grids",link:Object(u.reverse)(m.instruments.instrument.build.questionGrids.all,{instrument_id:t})}):"code_lists"===a.subtype?e.push({text:"CodeLists",link:Object(u.reverse)(m.instruments.instrument.build.codeLists.all,{instrument_id:t})}):"response_domains"===a.subtype?e.push({text:"Response Domains",link:Object(u.reverse)(m.instruments.instrument.build.responseDomains.all,{instrument_id:t})}):"constructs"===a.subtype&&e.push({text:"Constructs",link:Object(u.reverse)(m.instruments.instrument.build.constructs.show,{instrument_id:t})}))}}return e},l=function(){var e=n.pathname.match(new RegExp("^\\/(?<topLevel>instruments|datasets|admin)"));switch(Object(_t.get)(Object(_t.get)(e,"groups",{}),"topLevel","instruments")){case"datasets":return a();case"admin":return i();default:return c()}}(),o=Nt();return r.a.createElement(at.a,{className:o.root},r.a.createElement(jt.a,{separator:r.a.createElement(It.a,{fontSize:"small"}),"aria-label":"breadcrumb"},l.map((function(e){return r.a.createElement(St,{text:e.text,link:e.link})}))))},Dt=function(e){switch(e){case"statement":return"652d90";case"loop":return"37b34a";case"question":return"00adee";case"sequence":return"faaf40";case"condition":return"f1003a";default:return"d3d3d3"}},wt=n(402),Ct=n(78),xt=n.n(Ct),qt=n(79),Rt=n.n(qt);function Lt(){return r.a.createElement(g.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(o.b,{color:"inherit",to:"https://material-ui.com/"},"Archivist")," ",(new Date).getFullYear(),".")}var At=Object(j.a)((function(e){return{root:{display:"flex"},nested:{paddingLeft:e.spacing(4)},toolbar:{paddingRight:24},toolbarIcon:Object(I.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7),[e.breakpoints.up("sm")]:{width:e.spacing(9)}},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",flexDirection:"column"},fixedHeight:{height:240}}})),Mt=function(){var e=At(),t=r.a.useState(!0),n=Object(p.a)(t,2),a=n[0],i=n[1];return r.a.createElement("div",null,r.a.createElement(ut.a,{button:!0},r.a.createElement(mt.a,null,r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.all)},r.a.createElement(ft.a,null))),r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.all)},r.a.createElement(dt.a,{primary:"Instruments"}))),r.a.createElement(ut.a,{button:!0},r.a.createElement(mt.a,null,r.a.createElement(bt.a,null)),r.a.createElement(o.b,{to:Object(u.reverse)(m.datasets.all)},r.a.createElement(dt.a,{primary:"Datasets"}))),r.a.createElement(ut.a,{button:!0,onClick:function(){i(!a)}},r.a.createElement(mt.a,null,r.a.createElement(ht.a,{style:{color:"37b34a"}})),r.a.createElement(dt.a,{primary:"Admin"}),a?r.a.createElement(xt.a,null):r.a.createElement(Rt.a,null)),r.a.createElement(wt.a,{in:a,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ze.a,{component:"div",disablePadding:!0},r.a.createElement(ut.a,{button:!0,className:e.nested},r.a.createElement(o.b,{to:Object(u.reverse)(m.admin.instruments.all)},r.a.createElement(dt.a,{primary:"Instruments"}))),r.a.createElement(ut.a,{button:!0,className:e.nested},r.a.createElement(o.b,{to:Object(u.reverse)(m.admin.datasets.all)},r.a.createElement(dt.a,{primary:"Datasets"}))),r.a.createElement(ut.a,{button:!0,className:e.nested},r.a.createElement(o.b,{to:Object(u.reverse)(m.admin.import)},r.a.createElement(dt.a,{primary:"Import"}))),r.a.createElement(ut.a,{button:!0,className:e.nested},r.a.createElement(o.b,{to:Object(u.reverse)(m.admin.imports)},r.a.createElement(dt.a,{primary:"DDI Imports"}))))))},Pt=function(e){var t=At(),n=r.a.useState(!0),a=Object(p.a)(n,2),i=a[0],c=a[1],o=Object(l.b)(),s=e.instrumentId;return r.a.createElement("div",{className:t.root},r.a.createElement(gt.a,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,"Archivist")),r.a.createElement(f.a,null),r.a.createElement(Ke.a,{position:"absolute",className:Object(He.a)(t.appBar,i&&t.appBarShift)},r.a.createElement($e.a,{className:t.toolbar},r.a.createElement(tt.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},className:Object(He.a)(t.menuButton,i&&t.menuButtonHidden)},r.a.createElement(it.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},e.title),r.a.createElement(tt.a,{color:"inherit"},r.a.createElement(st.a,{onClick:function(){o({type:"LOGOUT"})}})))),r.a.createElement(Je.a,{variant:"permanent",classes:{paper:Object(He.a)(t.drawerPaper,!i&&t.drawerPaperClose)},open:i},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement("img",{src:"/logo.svg",alt:"BigCo Inc. logo",style:{width:"51%"}}),r.a.createElement(tt.a,{onClick:function(){c(!1)}},r.a.createElement(lt.a,null))),r.a.createElement(et.a,null),r.a.createElement(Mt,null),r.a.createElement(et.a,null)),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(y.a,{maxWidth:!1,maxHeight:!1,className:t.container},r.a.createElement(nt.a,{container:!0,spacing:3},r.a.createElement(nt.a,{item:!0,xs:12},r.a.createElement(Tt,{instrumentId:s}),r.a.createElement(at.a,{className:t.paper},e.children))),r.a.createElement(Xe.a,{pt:4},r.a.createElement(Lt,null)))))},kt=n(153),Qt=n(18),Ut=n(423),zt=n(409),Gt=function(e,t){var n=Object(l.c)((function(e){return e.statuses})),a=t+":"+e;return Object(_t.get)(n,a,{})},Vt=function(e){var t=e.id,n=e.type,a=Gt(t,n);return Object(_t.isEmpty)(a)||Object(_t.isNil)(a.error)?a&&a.saved?r.a.createElement("div",null,r.a.createElement(Ut.a,{severity:"success"},r.a.createElement(zt.a,null,"new"===t?"Created":"Saved"))):"":r.a.createElement("div",null,r.a.createElement(Ut.a,{severity:"error"},r.a.createElement(zt.a,null,"Error"),a.errorMessage))},Wt=n(195),Bt=function(e){var t=e.name,n=Object(Wt.a)(e,["name"]);return r.a.createElement(Qt.a,{name:t},(function(e){var t=e.input,a=(t.value,t.onChange),i=Object(Wt.a)(t,["value","onChange"]);return r.a.createElement("input",Object.assign({},i,{type:"file",onChange:function(e){var t=e.target;return a(t.files)}},n))}))},Ft=Object(j.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Dt("statement"))}}),Yt=[{size:12,field:r.a.createElement(Bt,{name:"files"})}],Ht=function(e){Object(kt.a)(e);var t=Object(l.b)(),n=Ft();Gt("new","AdminInstrument");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement("h2",null,"Upload DDI Instrument Files"),r.a.createElement(Vt,{type:"AdminInstrument",id:"new"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){t(C(e))},initialValues:{files:[]},validate:function(e){return{}},render:function(e){var t=e.handleSubmit,a=e.form.mutators,i=(a.push,a.pop,e.pristine,e.form,e.submitting);e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16},className:n.paper},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},Yt.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},"Only DDI-L 3.2 Instrument files are accepted.",r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:i},"Import Instrument")))))}}))},Jt=Object(j.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Dt("statement"))}}),Xt=[{size:12,field:r.a.createElement(Bt,{name:"files"})}],Kt=function(e){Object(kt.a)(e);var t=Object(l.b)(),n=Jt();Gt("new","AdminDataset");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement("h2",null,"Upload DDI Dataset Files"),r.a.createElement(Vt,{type:"AdminDataset",id:"new"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){t(x(e))},initialValues:{files:[]},validate:function(e){return{}},render:function(e){var t=e.handleSubmit,a=e.form.mutators,i=(a.push,a.pop,e.pristine,e.form,e.submitting);e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16},className:n.paper},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},Xt.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},"Only DDI-L 3.2 Dataset files are accepted.",r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:i},"Import Dataset")))))}}))},$t=function(){Object(l.b)();return Object(a.useEffect)((function(){}),[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Import"},r.a.createElement(Ht,null),r.a.createElement(Kt,null)))},Zt=n(410),en=n(414),tn=n(413),nn=n(411),an=n(412),rn=n(415),cn=n(427),ln=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.imports})),n=r.a.useState(0),i=Object(p.a)(n,2),c=i[0],o=i[1],s=r.a.useState(20),u=Object(p.a)(s,2),m=u[0],d=u[1],b=Object.values(t);return Object(a.useEffect)((function(){e(L())}),[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"DDI Imports"},r.a.createElement(Zt.a,{size:"small"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"ID"),r.a.createElement(tn.a,null,"File"),r.a.createElement(tn.a,null,"Type"),r.a.createElement(tn.a,null,"State"),r.a.createElement(tn.a,null,"Created At"),r.a.createElement(tn.a,null,"Actions"))),r.a.createElement(en.a,null,b.slice(c*m,c*m+m).map((function(e){return r.a.createElement(an.a,{key:e.id},r.a.createElement(tn.a,null,e.id),r.a.createElement(tn.a,null,e.file),r.a.createElement(tn.a,null,e.type),r.a.createElement(tn.a,null,e.state),r.a.createElement(tn.a,null,e.created_at),r.a.createElement(tn.a,null,r.a.createElement(E.a,{variant:"outlined"},"View")))}))),r.a.createElement(rn.a,null,r.a.createElement(an.a,null,r.a.createElement(cn.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:b.length,rowsPerPage:m,page:c,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){d(parseInt(e.target.value,10)),o(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))))},on=n(417),sn=function(e){var t=e.values,n=r.a.useState(0),a=Object(p.a)(n,2),i=a[0],c=a[1],l=r.a.useState(20),o=Object(p.a)(l,2),s=o[0],u=o[1],m=t;return r.a.createElement(Zt.a,{size:"small"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"ID"),r.a.createElement(tn.a,null,"File"),r.a.createElement(tn.a,null,"Type"),r.a.createElement(tn.a,null,"State"),r.a.createElement(tn.a,null,"Created At"),r.a.createElement(tn.a,null,"Actions"))),r.a.createElement(en.a,null,m.slice(i*s,i*s+s).map((function(e){return r.a.createElement(an.a,{key:e.id},r.a.createElement(tn.a,null,e.id),r.a.createElement(tn.a,null,e.file),r.a.createElement(tn.a,null,e.type),r.a.createElement(tn.a,null,e.state),r.a.createElement(tn.a,null,e.created_at),r.a.createElement(tn.a,null,r.a.createElement(on.a,{variant:"outlined"},r.a.createElement(E.a,null,"View Log"))))}))),r.a.createElement(rn.a,null,r.a.createElement(an.a,null,r.a.createElement(cn.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:m.length,rowsPerPage:s,page:i,onChangePage:function(e,t){c(t)},onChangeRowsPerPage:function(e){u(parseInt(e.target.value,10)),c(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))},un=Object(j.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Dt("statement"))}}),mn=[{size:12,field:r.a.createElement(Bt,{name:"files"})}],dn=function(e){var t=e.type,n=e.hint,a=e.onSubmit,i=void 0===a?function(){}:a,c=(Object(l.b)(),un());Gt("new","AdminImportMapping");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement("h2",null,"Import Mappings"),r.a.createElement(Vt,{type:"AdminImportMapping",id:"new"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:i,initialValues:{files:[]},validate:function(e){return{}},render:function(e){var a=e.handleSubmit,i=e.form.mutators,l=(i.push,i.pop,e.pristine,e.form,e.submitting);e.values;return r.a.createElement("form",{onSubmit:a,noValidate:!0},r.a.createElement(at.a,{style:{padding:16},className:c.paper},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},mn.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},n,r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:l},"Import ",t)))))}}))},pn=n(112),bn=n.n(pn),En=function(){return r.a.createElement(Xe.a,{style:{height:200,"margin-top":50},m:"auto"},r.a.createElement(bn.a,{color:"#".concat(Dt(Object(_t.shuffle)(["sequence","condition","question","statement","loop"])[0]))}))},fn=function(e){var t=Object(l.b)(),n=Object(_t.get)(e,"match.params.instrumentId",""),i=Object.values(Object(l.c)((function(e){return e.instrumentImportMappings}))),c=Object(a.useState)(!1),o=Object(p.a)(c,2),s=o[0],u=o[1];return Object(a.useEffect)((function(){Promise.all([t(R("instruments",n))]).then((function(){u(!0)}))}),[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Instruments Import Mappings"},s?r.a.createElement(r.a.Fragment,null,r.a.createElement(dn,{type:"Instrument",hint:"You can import multiple Q-V and T-Q mapping files. Only TXT files are accepted.",onSubmit:function(e){t(q("instruments",n,e))}}),r.a.createElement(sn,{values:i})):r.a.createElement(En,null)))},On=function(e){var t=Object(l.b)(),n=Object(_t.get)(e,"match.params.datasetId",""),i=Object.values(Object(l.c)((function(e){return e.datasetImportMappings}))),c=Object(a.useState)(!1),o=Object(p.a)(c,2),s=o[0],u=o[1];return Object(a.useEffect)((function(){Promise.all([t(R("datasets",n))]).then((function(){u(!0)}))}),[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Datasets Import Mappings"},s?r.a.createElement(r.a.Fragment,null,r.a.createElement(dn,{type:"Dataset",hint:"You can import multiple T-V and DV mapping files. Only TXT files are accepted.",onSubmit:function(e){t(q("datasets",n,e))}}),r.a.createElement(sn,{values:i})):r.a.createElement(En,null)))},hn=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.instruments})),n=r.a.useState(0),i=Object(p.a)(n,2),c=i[0],s=i[1],d=r.a.useState(20),b=Object(p.a)(d,2),f=b[0],O=b[1],h=Object.values(t);return Object(a.useEffect)((function(){e(A())}),[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Admin Instruments"},r.a.createElement(Zt.a,{size:"small"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"ID"),r.a.createElement(tn.a,null,"Prefix"),r.a.createElement(tn.a,null,"Study"),r.a.createElement(tn.a,null,"Actions"))),r.a.createElement(en.a,null,h.slice(c*f,c*f+f).map((function(e){return r.a.createElement(an.a,{key:e.id},r.a.createElement(tn.a,null,e.id),r.a.createElement(tn.a,null,e.prefix),r.a.createElement(tn.a,null,e.study),r.a.createElement(tn.a,null,r.a.createElement(on.a,{variant:"outlined"},r.a.createElement(E.a,null,"Edit"),r.a.createElement(E.a,null,"Copy"),r.a.createElement(E.a,null,r.a.createElement(o.b,{to:Object(u.reverse)(m.admin.instruments.importMappings,{instrumentId:e.id})},"Import Mappings")),r.a.createElement(E.a,null,"QV"),r.a.createElement(E.a,null,"Topics"),r.a.createElement(E.a,null,r.a.createElement(o.b,{to:Object(u.reverse)(m.admin.instruments.importMappings,{instrumentId:e.id})},"View Imports")),r.a.createElement(E.a,null,"Clear Cache"),r.a.createElement(E.a,null,"Delete"))))}))),r.a.createElement(rn.a,null,r.a.createElement(an.a,null,r.a.createElement(cn.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:h.length,rowsPerPage:f,page:c,onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){O(parseInt(e.target.value,10)),s(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))))},vn=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.datasets})),n=r.a.useState(0),i=Object(p.a)(n,2),c=i[0],s=i[1],d=r.a.useState(20),b=Object(p.a)(d,2),f=b[0],O=b[1],h=Object.values(t);return Object(a.useEffect)((function(){e(D())}),[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Admin Datasets"},r.a.createElement(Zt.a,{size:"small"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"ID"),r.a.createElement(tn.a,null,"Name"),r.a.createElement(tn.a,null,"Study"),r.a.createElement(tn.a,null,"Actions"))),r.a.createElement(en.a,null,h.slice(c*f,c*f+f).map((function(e){return r.a.createElement(an.a,{key:e.id},r.a.createElement(tn.a,null,e.id),r.a.createElement(tn.a,null,e.name),r.a.createElement(tn.a,null,e.study),r.a.createElement(tn.a,null,r.a.createElement(on.a,{variant:"outlined"},r.a.createElement(E.a,null,"Edit"),r.a.createElement(E.a,null,r.a.createElement(o.b,{to:Object(u.reverse)(m.admin.datasets.importMappings,{datasetId:e.id})},"Import Mappings")),r.a.createElement(E.a,null,"DV"),r.a.createElement(E.a,null,"Topics"),r.a.createElement(E.a,null,r.a.createElement(o.b,{to:Object(u.reverse)(m.admin.datasets.importMappings,{datasetId:e.id})},"View Imports")),r.a.createElement(E.a,null,"Delete"))))}))),r.a.createElement(rn.a,null,r.a.createElement(an.a,null,r.a.createElement(cn.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:h.length,rowsPerPage:f,page:c,onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){O(parseInt(e.target.value,10)),s(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))))},gn=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.instruments})),n=r.a.useState(0),i=Object(p.a)(n,2),c=i[0],s=i[1],d=r.a.useState(20),b=Object(p.a)(d,2),f=b[0],O=b[1],h=Object.values(t);return Object(a.useEffect)((function(){e(A())}),[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Instruments"},r.a.createElement(Zt.a,{size:"small"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"ID"),r.a.createElement(tn.a,null,"Prefix"),r.a.createElement(tn.a,null,"Control Constructs"),r.a.createElement(tn.a,null,"Q-V Mappings"),r.a.createElement(tn.a,null,"Study"),r.a.createElement(tn.a,null,"Actions"))),r.a.createElement(en.a,null,h.slice(c*f,c*f+f).map((function(e){return r.a.createElement(an.a,{key:e.id},r.a.createElement(tn.a,null,e.id),r.a.createElement(tn.a,null,e.prefix),r.a.createElement(tn.a,null,e.ccs),r.a.createElement(tn.a,null,e.qvs),r.a.createElement(tn.a,null,e.study),r.a.createElement(tn.a,null,r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.show,{instrument_id:e.prefix})},"View")),r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.show,{instrument_id:e.prefix})},"Build")),r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.map.show,{instrument_id:e.prefix})},"Map"))))}))),r.a.createElement(rn.a,null,r.a.createElement(an.a,null,r.a.createElement(cn.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:h.length,rowsPerPage:f,page:c,onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){O(parseInt(e.target.value,10)),s(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))))},jn=n(422),yn=function(e){var t=Object(l.b)(),n=Object(_t.get)(e,"match.params.dataset_id",""),i=Object(l.c)((function(e){return Object(_t.get)(e.datasets,n)})),c=Object(l.c)((function(e){return Object(_t.get)(e.datasetVariables,n,{})})),o=r.a.useState(0),s=Object(p.a)(o,2),u=s[0],m=s[1],d=r.a.useState(20),b=Object(p.a)(d,2),E=b[0],f=b[1],h=Object.values(c),v=Object(a.useState)(!1),g=Object(p.a)(v,2),j=g[0],y=g[1];Object(a.useEffect)((function(){Promise.all([t(w(n)),t(Ne(n))]).then((function(){y(!0)}))}),[]);var I=function(e){var t=e.sources,n=e.datasetId,a=e.variable,i=e.sourceOptions;i=i.filter((function(e){return Object(_t.get)(e.topic,"id")==Object(_t.get)(a.topic,"id")}));var c=a.id,o=Object(l.b)(),s=[],u=function(e,a,r){switch(r){case"select-option":if(s=a.filter((function(e){return!t.includes(e)})),!Object(_t.isEmpty)(s))return i=s.map((function(e){return e.label})),void o(Te(n,c,i));break;case"remove-option":if(s=t.filter((function(e){return!a.includes(e)})),!Object(_t.isEmpty)(s))return void s.map((function(e){o(De(n,c,e))}));break;default:return null}var i};return Object(_t.isEmpty)(t)?r.a.createElement("div",null,r.a.createElement(jn.a,{multiple:!0,id:"tags-outlined",options:Object.values(i),getOptionLabel:function(e){return e.label},onChange:u,value:[],filterSelectedOptions:!0,renderInput:function(e){return r.a.createElement(O.a,Object.assign({},e,{variant:"outlined",label:"Sources",placeholder:"Add source"}))}})):r.a.createElement("div",null,r.a.createElement(jn.a,{multiple:!0,id:"tags-outlined",options:Object.values(i),getOptionLabel:function(e){return e.label},onChange:u,value:t,getOptionSelected:function(e,t){return e.id===t.id},filterSelectedOptions:!0,renderInput:function(e){return r.a.createElement(O.a,Object.assign({},e,{variant:"outlined",label:"Sources",placeholder:"Add source"}))}}))};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Datasets"},j?r.a.createElement(Zt.a,{size:"small"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"ID"),r.a.createElement(tn.a,null,"Name"),r.a.createElement(tn.a,null,"Label"),r.a.createElement(tn.a,null,"Type"),r.a.createElement(tn.a,null,"Used by"),r.a.createElement(tn.a,null,"Sources"),r.a.createElement(tn.a,null,"Topic"))),r.a.createElement(en.a,null,h.slice(u*E,u*E+E).map((function(e){return r.a.createElement(an.a,{key:e.id},r.a.createElement(tn.a,null,e.id),r.a.createElement(tn.a,null,e.name),r.a.createElement(tn.a,null,e.label),r.a.createElement(tn.a,null,e.var_type),r.a.createElement(tn.a,null),r.a.createElement(tn.a,null,r.a.createElement(I,{sources:e.sources,sourceOptions:Object(_t.get)(i,"questions",[]),datasetId:n,variable:e})),r.a.createElement(tn.a,null,Object(_t.get)(e.topic,"name")))}))),r.a.createElement(rn.a,null,r.a.createElement(an.a,null,r.a.createElement(cn.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:h.length,rowsPerPage:E,page:u,onChangePage:function(e,t){m(t)},onChangeRowsPerPage:function(e){f(parseInt(e.target.value,10)),m(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}})))):r.a.createElement(En,null)))},In=function(e){var t=e.instrument,n=e.mode,a=void 0===n?"view":n;return r.a.createElement("h1",null,Object(_t.get)(t,"label"),t&&r.a.createElement(r.a.Fragment,null,"view"!==a&&r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.show,{instrument_id:t.slug})},"View")),"build"!==a&&r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.show,{instrument_id:t.slug})},"Build")),"map"!==a&&r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.map.show,{instrument_id:t.slug})},"Map"))))},_n=Object(j.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},control:{width:"100%",padding:e.spacing(2)},nested:{paddingLeft:e.spacing(4)}}})),Sn=function(e,t,n){var a=Object(l.c)((function(e){return e.cc_sequences})),r=Object(_t.get)(a,e,{}),i=Object(l.c)((function(e){return e.cc_statements})),c=Object(_t.get)(i,e,{}),o=Object(l.c)((function(e){return e.cc_conditions})),s=Object(_t.get)(o,e,{}),u=Object(l.c)((function(e){return e.cc_questions})),m=Object(_t.get)(u,e,{}),d=Object(l.c)((function(e){return e.questionItems})),p=Object(_t.get)(d,e,{}),b=Object(l.c)((function(e){return e.questionGrids})),E=Object(_t.get)(b,e,{}),f={children:[]};return"CcSequence"===t&&(f=Object(_t.get)(r,n.toString(),{})),"CcStatement"===t&&(f=Object(_t.get)(c,n.toString(),{})),"CcCondition"===t&&(f=Object(_t.get)(s,n.toString(),{})),"CcQuestion"===t&&("QuestionItem"===(f=Object(_t.get)(m,n.toString(),{})).question_type?f.question=Object(_t.get)(p,f.question_id.toString(),{}):"QuestionGrid"===f.question_type&&(f.question=Object(_t.get)(E,f.question_id.toString(),{}))),f},Nn=function(e){var t=e.type,n=e.id,a=e.instrumentId,i=Sn(a,t,n);_n();return console.log(i),r.a.createElement("div",null,i.question.literal,i.question.rds&&r.a.createElement(Tn,{rds:i.question.rds}))},Tn=function(e){return e.rds.map((function(e){switch(console.log(e),e.type){case"ResponseDomainCode":return r.a.createElement("ul",null,r.a.createElement(Dn,{codes:e.codes}));case"ResponseDomainText":return r.a.createElement("ul",null,r.a.createElement("li",null,e.label));case"ResponseDomainNumeric":case"ResponseDomainDatetime":return r.a.createElement("ul",null,r.a.createElement("li",null,e.label," ",e.params," ",e.subtype));default:return console.log(e),""}}))},Dn=function(e){return e.codes.map((function(e){return r.a.createElement("li",null,e.label)}))},wn=function(e){var t=e.type,n=e.id,a=e.instrumentId,i=Sn(a,t,n);_n();return r.a.createElement("div",null,i.literal)},Cn=function e(t){var n=t.instrumentId,a=t.title,i=_n(),c=r.a.useState(!0),l=Object(p.a)(c,2),o=l[0],s=l[1],u=Sn(n,t.type,t.id);return a=Object(_t.get)(u,"literal",t.title),r.a.createElement(Ze.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:i.root},r.a.createElement(ut.a,{button:!0,onClick:function(){s(!o)}},r.a.createElement(dt.a,{primary:a}),o?r.a.createElement(xt.a,null):r.a.createElement(Rt.a,null)),!Object(_t.isEmpty)(u.children)&&r.a.createElement(wt.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ze.a,{component:"div",disablePadding:!0},u.children.map((function(t){return r.a.createElement(ut.a,{button:!0,className:i.nested},function(){switch(t.type){case"CcSequence":return r.a.createElement(xn,{instrumentId:n,id:t.id,type:t.type,title:t.type,children:Object(_t.get)(t,"children",[])});case"CcQuestion":return r.a.createElement(Nn,{instrumentId:n,id:t.id,type:t.type});case"CcCondition":return r.a.createElement(e,{instrumentId:n,id:t.id,type:t.type});default:return console.log(t),null}}())})))))},xn=function e(t){var n=t.instrumentId,a=t.title,i=_n(),c=r.a.useState(!0),l=Object(p.a)(c,2),o=l[0],s=l[1],u=Sn(n,t.type,t.id);return a=Object(_t.get)(u,"label",t.title),r.a.createElement(Ze.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:i.root},r.a.createElement(ut.a,{button:!0,onClick:function(){s(!o)}},r.a.createElement(dt.a,{primary:a}),o?r.a.createElement(xt.a,null):r.a.createElement(Rt.a,null)),!Object(_t.isEmpty)(u.children)&&r.a.createElement(wt.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ze.a,{component:"div",disablePadding:!0},u.children.map((function(t){return function(){switch(t.type){case"CcSequence":return r.a.createElement(ut.a,{button:!0,className:i.nested},r.a.createElement(e,{instrumentId:n,id:t.id,type:t.type,title:t.type,children:Object(_t.get)(t,"children",[])}));case"CcQuestion":return r.a.createElement(ut.a,{button:!0,className:i.nested},r.a.createElement(Nn,{instrumentId:n,id:t.id,type:t.type}));case"CcStatement":return r.a.createElement(ut.a,{button:!0,className:i.nested},r.a.createElement(wn,{instrumentId:n,id:t.id,type:t.type}));case"CcCondition":return r.a.createElement(ut.a,{button:!0,className:i.nested},r.a.createElement(Cn,{instrumentId:n,id:t.id,type:t.type,children:Object(_t.get)(t,"children",[])}));default:return null}}()})))))},qn=function(e){var t=Object(l.b)(),n=Object(_t.get)(e,"match.params.instrument_id",""),i=Object(l.c)((function(e){return Object(_t.get)(e.instruments,n)})),c=Object(l.c)((function(e){return e.cc_sequences})),o=Object(_t.get)(c,n,{});Object(a.useEffect)((function(){t(M(n)),t(W.all(n)),t(Y.all(n)),t(te.all(n)),t(re.all(n)),t(se.all(n)),t(de.all(n)),t(_e(n)),t(xe())}),[]);var s=Object(_t.isEmpty)(o)?void 0:Object.values(o).find((function(e){return 1==e.top}));return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"View",instrumentId:n},r.a.createElement(In,{instrument:i,mode:"view"}),Object(_t.isNil)(s)?r.a.createElement(Xe.a,{m:"auto"},r.a.createElement(bn.a,{color:"#009de6"})):r.a.createElement(xn,{instrumentId:n,type:"CcSequence",id:s.children[0].id,title:s.children[0].label,children:s.children[0].children})))},Rn=n(188),Ln=n.n(Rn),An=n(428),Mn=n(356),Pn=n(357),kn=n(363),Qn=n(187),Un=n.n(Qn),zn=Object(j.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},control:{width:"100%",padding:e.spacing(2)},nested:{paddingLeft:e.spacing(4)}}})),Gn=function(e,t,n){var a=Object(l.c)((function(e){return e.cc_sequences})),r=Object(_t.get)(a,e,{}),i=Object(l.c)((function(e){return e.cc_statements})),c=Object(_t.get)(i,e,{}),o=Object(l.c)((function(e){return e.cc_conditions})),s=Object(_t.get)(o,e,{}),u=Object(l.c)((function(e){return e.cc_questions})),m=Object(_t.get)(u,e,{}),d=Object(l.c)((function(e){return e.questionItems})),p=Object(_t.get)(d,e,{}),b=Object(l.c)((function(e){return e.questionGrids})),E=Object(_t.get)(b,e,{}),f={children:[]};return"CcSequence"===t&&(f=Object(_t.get)(r,n.toString(),{})),"CcStatement"===t&&(f=Object(_t.get)(c,n.toString(),{})),"CcCondition"===t&&(f=Object(_t.get)(s,n.toString(),{})),"CcQuestion"===t&&("QuestionItem"===(f=Object(_t.get)(m,n.toString(),{})).question_type?f.question=Object(_t.get)(p,f.question_id.toString(),{}):"QuestionGrid"===f.question_type&&(f.question=Object(_t.get)(E,f.question_id.toString(),{}))),f},Vn=function(e){var t=e.type,n=e.id,a=e.instrumentId,i=Gn(a,t,n),c=zn(),o=Object(_t.isEmpty)(i.question)?i.label:i.question.literal,s=Object(_t.get)(i,"topic",{id:null}),u=Object(_t.get)(s,"id",null),m=function(e,t){var n=Object(l.c)((function(e){return e.statuses})),a=t+":"+e;return Object(_t.get)(n,a,{})}(i.id,"CcQuestion");return r.a.createElement(ut.a,null,r.a.createElement(at.a,{className:c.control},r.a.createElement(nt.a,{container:!0,spacing:3},!Object(_t.isEmpty)(m)&&!Object(_t.isNil)(m.error)&&r.a.createElement("div",{className:c.root},r.a.createElement(Ut.a,{severity:"error"},r.a.createElement(zt.a,null,"Error"),m.errorMessage)),r.a.createElement(nt.a,{item:!0,xs:9},r.a.createElement(dt.a,{primary:o})),r.a.createElement(nt.a,{item:!0,xs:3},r.a.createElement(An.a,{label:i.label,color:"primary"}),!Object(_t.isEmpty)(m)&&!Object(_t.isNil)(m.saving)&&r.a.createElement(An.a,{label:"Saving",color:"secondary"},"              ",r.a.createElement(Un.a,null)),!Object(_t.isEmpty)(m)&&!Object(_t.isNil)(m.saved)&&r.a.createElement(An.a,{label:"Saved",color:"success",deleteIcon:r.a.createElement(Ln.a,null)})),r.a.createElement(nt.a,{item:!0,xs:6},r.a.createElement(Bn,{variables:i.variables,instrumentId:a,ccQuestionId:i.id})),r.a.createElement(nt.a,{item:!0,xs:6},r.a.createElement(Wn,{topicId:u,instrumentId:a,ccQuestionId:i.id})))))},Wn=function(e){var t=e.topicId,n=e.instrumentId,a=e.ccQuestionId,i=Object(l.b)(),c=Object(l.c)((function(e){return e.topics})),o=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),s=function(e,t,r){i(re.topic.set(n,a,e.target.value))};return Object(_t.isEmpty)(c)?"Fetching topics":Object(_t.isNil)(t)?r.a.createElement("div",null,r.a.createElement(Mn.a,{className:o.formControl},r.a.createElement(Pn.a,{htmlFor:"grouped-native-select"},"Topic"),r.a.createElement(kn.a,{native:!0,id:"grouped-native-select",onChange:s},r.a.createElement("option",{"aria-label":"None",value:""}),Object.values(c).map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},1===e.level?e.name:"--"+e.name)}))))):r.a.createElement("div",null,r.a.createElement(Mn.a,{className:o.formControl},r.a.createElement(Pn.a,{htmlFor:"grouped-native-select"},"Topic"),r.a.createElement(kn.a,{native:!0,defaultValue:t,id:"grouped-native-select",onChange:s},r.a.createElement("option",{"aria-label":"None",value:""}),Object.values(c).map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},1===e.level?e.name:"--"+e.name)})))))},Bn=function(e){var t=e.variables,n=e.instrumentId,a=e.ccQuestionId,i=Object(l.b)(),c=Object(l.c)((function(e){return e.variables})),o=Object(_t.get)(c,n,{}),s=[],u=function(e,r,c){switch(c){case"select-option":if(s=r.filter((function(e){return!t.includes(e)})),!Object(_t.isEmpty)(s))return o=s.map((function(e){return e.name})).join(","),void i(re.variables.add(n,a,o));break;case"remove-option":if(s=t.filter((function(e){return!r.includes(e)})),!Object(_t.isEmpty)(s))return l=s.map((function(e){return e.id})).join(","),void i(re.variables.remove(n,a,l));break;default:return null}var l,o};return Object(_t.isEmpty)(t)?r.a.createElement("div",null,r.a.createElement(jn.a,{multiple:!0,id:"tags-outlined",options:Object.values(o),getOptionLabel:function(e){return e.name},onChange:u,value:[],filterSelectedOptions:!0,renderInput:function(e){return r.a.createElement(O.a,Object.assign({},e,{variant:"outlined",label:"Variables",placeholder:"Add variable"}))}})):r.a.createElement("div",null,r.a.createElement(jn.a,{multiple:!0,id:"tags-outlined",options:Object.values(o),getOptionLabel:function(e){return e.name},onChange:u,value:t,getOptionSelected:function(e,t){return e.id===t.id},filterSelectedOptions:!0,renderInput:function(e){return r.a.createElement(O.a,Object.assign({},e,{variant:"outlined",label:"Variables",placeholder:"Add variable"}))}}))},Fn=function e(t){var n=t.instrumentId,a=t.title,i=zn(),c=r.a.useState(!0),l=Object(p.a)(c,2),o=l[0],s=l[1],u=Gn(n,t.type,t.id);return a=Object(_t.get)(u,"literal",t.title),r.a.createElement(Ze.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:i.root},r.a.createElement(ut.a,{button:!0,onClick:function(){s(!o)}},r.a.createElement(dt.a,{primary:a}),o?r.a.createElement(xt.a,null):r.a.createElement(Rt.a,null)),!Object(_t.isEmpty)(u.children)&&r.a.createElement(wt.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ze.a,{component:"div",disablePadding:!0},u.children.map((function(t){return r.a.createElement(ut.a,{button:!0,className:i.nested},function(){switch(t.type){case"CcSequence":return r.a.createElement(Yn,{instrumentId:n,id:t.id,type:t.type,title:t.type,children:Object(_t.get)(t,"children",[])});case"CcQuestion":return r.a.createElement(Vn,{instrumentId:n,id:t.id,type:t.type});case"CcCondition":return r.a.createElement(e,{instrumentId:n,id:t.id,type:t.type});default:return console.log(t),null}}())})))))},Yn=function e(t){var n=t.instrumentId,a=t.title,i=zn(),c=r.a.useState(!0),l=Object(p.a)(c,2),o=l[0],s=l[1],u=Gn(n,t.type,t.id);return a=Object(_t.get)(u,"label",t.title),r.a.createElement(Ze.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:i.root},r.a.createElement(ut.a,{button:!0,onClick:function(){s(!o)}},r.a.createElement(dt.a,{primary:a}),o?r.a.createElement(xt.a,null):r.a.createElement(Rt.a,null)),!Object(_t.isEmpty)(u.children)&&r.a.createElement(wt.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ze.a,{component:"div",disablePadding:!0},u.children.map((function(t){return function(){switch(t.type){case"CcSequence":return r.a.createElement(ut.a,{button:!0,className:i.nested},r.a.createElement(e,{instrumentId:n,id:t.id,type:t.type,title:t.type,children:Object(_t.get)(t,"children",[])}));case"CcQuestion":return r.a.createElement(ut.a,{button:!0,className:i.nested},r.a.createElement(Vn,{instrumentId:n,id:t.id,type:t.type}));case"CcCondition":return r.a.createElement(ut.a,{button:!0,className:i.nested},r.a.createElement(Fn,{instrumentId:n,id:t.id,type:t.type}));default:return null}}()})))))},Hn=function(e){var t=Object(l.b)(),n=Object(_t.get)(e,"match.params.instrument_id",""),i=Object(l.c)((function(e){return Object(_t.get)(e.instruments,n)})),c=Object(l.c)((function(e){return e.cc_sequences})),o=Object(_t.get)(c,n,{});Object(a.useEffect)((function(){t(M(n)),t(W.all(n)),t(Y.all(n)),t(te.all(n)),t(re.all(n)),t(se.all(n)),t(de.all(n)),t(_e(n)),t(xe())}),[]);var s=Object(_t.isEmpty)(o)?void 0:Object.values(o).find((function(e){return 1==e.top}));return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Maps",instrumentId:n},r.a.createElement(In,{instrument:i,mode:"map"}),Object(_t.isNil)(s)?r.a.createElement(Xe.a,{m:"auto"},r.a.createElement(bn.a,{color:"#009de6"})):r.a.createElement(Yn,{instrumentId:n,type:"CcSequence",id:s.children[0].id,title:s.children[0].label,children:s.children[0].children})))},Jn=n(418),Xn=Object(j.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},control:{width:"100%",padding:e.spacing(2)}}})),Kn=function(e){var t=Object(l.b)(),n=Xn(),i=Object(_t.get)(e,"match.params.instrument_id",""),c=Object(l.c)((function(e){return Object(_t.get)(e.instruments,i)})),s=Object(l.c)((function(e){return Object(_t.get)(e.instrumentStats,i,{})})),d=Object(_t.get)(s,"stats",{}),p=d.categories,b=void 0===p?0:p,E=d.code_lists,f=void 0===E?0:E,O=d.response_domain_datetimes,h=void 0===O?0:O,v=d.response_domain_numerics,g=void 0===v?0:v,j=d.response_domain_texts,y=void 0===j?0:j,I=d.question_items,_=void 0===I?0:I,S=d.question_grids,N=void 0===S?0:S,T=d.instructions,D=void 0===T?0:T,w=d.cc_conditions,C=void 0===w?0:w,x=d.cc_loops,q=void 0===x?0:x,R=d.cc_questions,L=void 0===R?0:R,A=d.cc_sequences,k=void 0===A?0:A,Q=d.cc_statements,U=void 0===Q?0:Q;Object(a.useEffect)((function(){t(M(i)),t(P(i))}),[]);var z=function(e){var t=e.label,n=e.value;return r.a.createElement(ut.a,null,r.a.createElement(dt.a,{primary:t}),r.a.createElement(Jn.a,null,r.a.createElement(An.a,{label:n})))};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:i,instrumentId:i},r.a.createElement(In,{instrument:c,mode:"build"}),r.a.createElement(nt.a,{container:!0,spacing:3},r.a.createElement(nt.a,{item:!0,xs:6},r.a.createElement(at.a,{className:n.control},r.a.createElement("h2",null,r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.codeLists.all,{instrument_id:i})},"Code Lists")),r.a.createElement(Ze.a,{dense:!0},r.a.createElement(z,{label:"Categories",value:b}),r.a.createElement(z,{label:"Code Lists",value:f})))),r.a.createElement(nt.a,{item:!0,xs:6},r.a.createElement(at.a,{className:n.control},r.a.createElement("h2",null,r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.responseDomains.all,{instrument_id:i})},"ResponseDomains")),r.a.createElement(Ze.a,{dense:!0},r.a.createElement(z,{label:"Datetime Answers",value:h}),r.a.createElement(z,{label:"Numberic Answers",value:g}),r.a.createElement(z,{label:"Text Answers",value:y})))),r.a.createElement(nt.a,{item:!0,xs:6},r.a.createElement(at.a,{className:n.control},r.a.createElement("h2",null,r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.questionItems.all,{instrument_id:i})},"Questions")),r.a.createElement(Ze.a,{dense:!0},r.a.createElement(z,{label:"Question Items",value:_}),r.a.createElement(z,{label:"Question Grids",value:N}),r.a.createElement(z,{label:"Instructions",value:D})))),r.a.createElement(nt.a,{item:!0,xs:6},r.a.createElement(at.a,{className:n.control},r.a.createElement("h2",null,r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.constructs.show,{instrument_id:i})},"Constructs")),r.a.createElement(Ze.a,{dense:!0},r.a.createElement(z,{label:"Conditions",value:C}),r.a.createElement(z,{label:"Loops",value:q}),r.a.createElement(z,{label:"Questions",value:L}),r.a.createElement(z,{label:"Sequences",value:k}),r.a.createElement(z,{label:"Statements",value:U})))))))},$n=function(e){var t=e.instrumentId,n=e.id,a=e.action,i=e.onDelete,c=void 0===i?function(){console.log("No delete callback provided")}:i,o=Object(l.b)();return Object(_t.isNil)(n)?"":r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"secondary",onClick:function(){!Object(_t.isNil)(n)&&window.confirm("Are you sure you want to delete this?")&&o(a.delete(t,n,c))}},"Delete"))},Zn=function e(t,n){if(!t)return n;var a=Object.keys(t).reduce((function(a,r){return n[r]instanceof Date||Array.isArray(n[r])?a[r]=n[r]:"object"===typeof n[r]&&null!==n[r]?a[r]=e(t[r],n[r]):a[r]="undefined"===typeof n[r]?null:n[r],a}),{});return Object(_t.merge)(a,n)},ea=n(37),ta=n(57),na=n(19),aa=Object(j.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Dt("condition"))}}),ra=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.c,{label:"Literal",name:"literal",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.c,{label:"Logic",name:"logic",margin:"none",required:!0})}],ia=function(e){var t=e.ccCondition,n=e.instrumentId,a=e.onChange,i=e.path,c=e.onDelete,o=Object(l.b)(),s=aa(),u=Gt(t.id||"new","CcCondition");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"CcCondition"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?o(te.create(n,e,(function(t){a({node:Object(I.a)(Object(I.a)({},e),t),path:i})}))):(o(te.update(n,t.id,e)),a({node:e,path:i}))},initialValues:t,validate:function(e){return function(e,t){var n={};return t.errors?Object.keys(t.errors).map((function(a){(Object(_t.isNil)(e[a])||""==e[a])&&(n[a]=t.errors[a][0])})):e.label||(n.label="Required"),n}(e,u)},mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,a=e.form.mutators,l=(a.push,a.pop,e.pristine),o=e.form,u=e.submitting,m=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16},className:s.paper},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},ra.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:o.reset,disabled:u||l},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:u},"Submit")),r.a.createElement($n,{id:m.id,instrumentId:n,action:te,onDelete:function(){c({path:i})}}))))}}))},ca=n(156),la=n(416),oa=Object(j.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Dt("question"))}}),sa=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{type:"select",size:12,field:function(e){return r.a.createElement(na.b,{name:"question_type",label:"Type",formControlProps:{margin:"none"}},r.a.createElement(la.a,null),r.a.createElement(la.a,{value:"QuestionItem"},"Item"),r.a.createElement(la.a,{value:"QuestionGrid"},"Grid"))}}],ua=function(e){var t=e.ccQuestion,n=e.instrumentId,i=e.onChange,c=e.path,o=e.onDelete,s=Object(l.c)((function(e){return e.cc_questions})),u=(Object(_t.get)(s,n,{}),Object(l.c)((function(e){return e.questionItems}))),m=Object(_t.get)(u,n,{}),d=Object(l.c)((function(e){return e.questionGrids})),b=Object(_t.get)(d,n,{}),O=Object(l.c)((function(e){return e.response_units})),h=Object(_t.get)(O,n,{}),v=Object(a.useState)("QuestionGrid"===t.question_type?b:m),g=Object(p.a)(v,2),j=g[0],y=g[1],_=Object(l.b)(),S=oa(),N=Gt(t.id||"new","CcQuestion");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"CcQuestion"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?_(re.create(n,e,(function(t){i({node:Object(I.a)(Object(I.a)({},e),t),path:c})}))):(_(re.update(n,t.id,e)),i({node:e,path:c}))},initialValues:t,validate:function(e){return function(e,t){var n={};return t.errors?Object.keys(t.errors).map((function(a){var r=["response_unit","question"].includes(a)?"".concat(a,"_id"):a;if(Object(_t.isNil)(e[r])||""==e[r])return n[r]=t.errors[a][0]})):e.label||(n.label="Required"),n}(e,N)},mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,a=e.form.mutators,i=(a.push,a.pop,e.pristine),l=e.form,s=e.submitting,u=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16},className:S.paper},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},sa.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)})),r.a.createElement(ca.a,{name:"question_type"},(function(e,t){y("QuestionGrid"===e?b:m),u.question_id=null})),r.a.createElement(nt.a,{item:!0,xs:"12",key:"question"},r.a.createElement(na.b,{name:"question_id",label:"Question",formControlProps:{margin:"none"}},r.a.createElement(la.a,null),Object.values(j).map((function(e,t){return r.a.createElement(la.a,{value:e.id},e.label)})))),r.a.createElement(nt.a,{item:!0,xs:"12",key:"response_unit_id"},r.a.createElement(na.b,{name:"response_unit_id",label:"Interviewee",formControlProps:{margin:"none"}},r.a.createElement(la.a,null),Object.values(h).map((function(e,t){return r.a.createElement(la.a,{value:e.id},e.label)})))),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:l.reset,disabled:s||i},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:s},"Submit")),r.a.createElement($n,{id:u.id,instrumentId:n,action:re,onDelete:function(){o({path:c})}}))))}}))},ma=Object(j.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Dt("statement"))}}),da=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!1})},{size:12,field:r.a.createElement(na.c,{label:"Literal",name:"literal",margin:"none",required:!1})}],pa=function(e){var t=e.ccStatement,n=e.instrumentId,a=e.onChange,i=e.path,c=e.onDelete,o=Object(l.b)(),s=ma(),u=Gt(t.id||"new","CcStatement");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"CcStatement"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?o(Y.create(n,e,(function(t){a({node:Object(I.a)(Object(I.a)({},e),t),path:i})}))):(o(Y.update(n,t.id,e)),a({node:e,path:i}))},initialValues:t,validate:function(e){return function(e,t){var n={};return t.errors?Object.keys(t.errors).map((function(a){(Object(_t.isNil)(e[a])||""==e[a])&&(n[a]=t.errors[a][0])})):e.label||(n.label="Required"),n}(e,u)},mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,a=e.form.mutators,l=(a.push,a.pop,e.pristine),o=e.form,u=e.submitting,m=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16},className:s.paper},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},da.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:o.reset,disabled:u||l},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:u},"Submit")),r.a.createElement($n,{id:m.id,instrumentId:n,action:Y,onDelete:function(){c({path:i})}}))))}}))},ba=Object(j.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Dt("sequence"))}}),Ea=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})}],fa=function(e){var t=e.ccSequence,n=e.instrumentId,a=e.onChange,i=e.path,c=e.onDelete,o=Object(l.b)(),s=ba(),u=Gt(t.id||"new","CcSequence");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"CcSequence"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?o(W.create(n,e,(function(t){a({node:Object(I.a)(Object(I.a)({},e),t),path:i})}))):(o(W.update(n,t.id,e)),a({node:e,path:i}))},initialValues:t,validate:function(e){return function(e,t){var n={};return t.errors?Object.keys(t.errors).map((function(a){(Object(_t.isNil)(e[a])||""==e[a])&&(n[a]=t.errors[a][0])})):e.label||(n.label="Required"),n}(e,u)},mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,a=e.form.mutators,l=(a.push,a.pop,e.pristine),o=e.form,u=e.submitting,m=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16},className:s.paper},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},Ea.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:o.reset,disabled:u||l},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:u},"Submit")),r.a.createElement($n,{id:m.id,instrumentId:n,action:W,onDelete:function(){c({path:i})}}))))}}))},Oa=Object(j.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Dt("loop"))}}),ha=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.c,{label:"Variable",name:"loop_var",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.c,{label:"Start Value",name:"start_val",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.c,{label:"End Value",name:"end_val",margin:"none"})},{size:12,field:r.a.createElement(na.c,{label:"Loop While",name:"loop_while",margin:"none"})}],va=function(e){var t=e.ccLoop,n=e.instrumentId,a=e.onChange,i=e.path,c=e.onDelete,o=Object(l.b)(),s=Oa(),u=Gt(t.id||"new","CcLoop");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"CcLoop"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?o(X.create(n,e,(function(t){a({node:Object(I.a)(Object(I.a)({},e),t),path:i})}))):(o(X.update(n,t.id,e)),a({node:e,path:i}))},initialValues:t,validate:function(e){return function(e,t){var n={};return t.errors?Object.keys(t.errors).map((function(a){(Object(_t.isNil)(e[a])||""==e[a])&&(n[a]=t.errors[a][0])})):(e.label||(n.label="Required"),e.start_val||(n.start_val="Required"),e.loop_var||(n.loop_var="Required")),n}(e,u)},mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,a=e.form.mutators,l=(a.push,a.pop,e.pristine),o=e.form,u=e.submitting,m=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16},className:s.paper},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},ha.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:o.reset,disabled:u||l},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:u},"Submit")),r.a.createElement($n,{id:m.id,instrumentId:n,action:X,onDelete:function(){c({path:i})}}))))}}))},ga=n(163),ja=n.n(ga),ya=n(255),Ia=n.n(ya),_a=n(104),Sa=(n(350),function e(t,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Da(t,n,a);if("condition"===c.type){r=Object(_t.get)(c,"children",[]);var l=Object(_t.get)(c,"fchildren",[]),o=[{title:"True",expanded:i,conditionId:c.id,type:"conditionTrue",children:r.map((function(n){return e(t,n.type,n.id)}))},{title:"False",expanded:i,conditionId:c.id,type:"conditionFalse",children:l.map((function(n){return e(t,n.type,n.id)}))}];return Object(I.a)(Object(I.a)({},c),{title:"".concat(c.label),expanded:i,type:c.type,children:o})}return r=Object(_t.get)(c,"children",[]),Object(I.a)(Object(I.a)({},c),{title:"".concat(c.label),expanded:i,type:c.type,children:r.map((function(n){return e(t,n.type,n.id)}))})}),Na=function(e){var t=e.topSequence,n=e.instrumentId,i=e.dispatch,c=e.onNodeSelect,l=Object(a.useState)([Sa(n,"CcSequence",t.id,!0)]),o=Object(p.a)(l,2),s=o[0],u=o[1],m=Object(a.useState)({}),d=Object(p.a)(m,2),b=d[0],f=d[1],O=Ta(),h=Object(a.useState)(),v=Object(p.a)(h,2),g=v[0],j=v[1],y=Object(a.useState)(),_=Object(p.a)(y,2),S=_[0],N=_[1],T=Object(a.useState)(),D=Object(p.a)(T,2),w=D[0],C=D[1],x=function(e){return e.treeIndex},q=function(e){return"sequence"===e.type||"loop"===e.type||"conditionTrue"===e.type||"conditionFalse"===e.type},R=function(e){u(Object(_a.f)({treeData:s,expanded:e}))},L=function(e){i(k(n,function(e){return Object(_a.d)({treeData:e,getNodeKey:function(e){var t=e.node;return{id:t.id,type:t.type,children:t.children.map((function(e){return"type ".concat(e.type," id ").concat(e.id)}))}},ignoreCollapsed:!1}).map((function(e){var t=e.node,n=e.path;if(["conditionTrue","conditionFalse"].includes(t.type))return null;var a=n[n.length-2],r=void 0!==a&&"conditionFalse"===a.type?1:0;return void 0!==a&&["conditionTrue","conditionFalse"].includes(a.type)&&(a=n[n.length-3]),{id:t.id,type:t.type,position:void 0!==a?a.children.indexOf("type ".concat(t.type," id ").concat(t.id))+1:t.position,branch:r,parent:void 0!==a?{id:a.id,type:a.type}:{}}})).filter((function(e){return null!=e}))}(e)))},A=function(e,t){var n=[];return q(e)&&n.push(r.a.createElement("button",{onClick:function(e){u(Object(_a.a)({treeData:s,parentKey:t[t.length-1],expandParent:!0,getNodeKey:x,newNode:{title:"Click to select construct type",children:[]}}).treeData),e.stopPropagation(),f({node:{type:void 0}})}},r.a.createElement(ja.a,null))),n};return r.a.createElement("div",{style:{height:1e4}},r.a.createElement(Ia.a,{placeholder:"Search (press return to perform search)",onRequestSearch:function(e){return j(e)},onCancelSearch:function(){j()}}),0===w&&!Object(_t.isNil)(g)&&r.a.createElement(Ut.a,{severity:"error"},r.a.createElement(zt.a,null,"Error"),"No results found."),w>0&&!Object(_t.isNil)(g)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"\xa0",w>0?S+1:0,"\xa0of\xa0",w||0," matches"),r.a.createElement(on.a,{color:"primary","aria-label":"outlined primary button group"},r.a.createElement(E.a,{onClick:function(){return N(null!==S?(w+S-1)%w:w-1)}},"< Prev"),r.a.createElement(E.a,{onClick:function(){return N(null!==S?(S+1)%w:0)}},"> Next"))),r.a.createElement(et.a,{className:O.divider}),r.a.createElement(on.a,{color:"primary","aria-label":"outlined primary button group"},r.a.createElement(E.a,{onClick:function(){R(!0)},startIcon:r.a.createElement(Rt.a,null)},"Expand All"),r.a.createElement(E.a,{onClick:function(){R(!1)},startIcon:r.a.createElement(xt.a,null)},"Collapse All")),r.a.createElement(_a.c,{treeData:s,onChange:function(e){u(e),L(e)},canNodeHaveChildren:function(e){return q(e)},canDrop:function(e){e.node;var t=e.nextParent;e.prevPath,e.nextPath;return!!q(t)},canDrag:function(e){var t=e.node;return!["conditionTrue","conditionFalse"].includes(t.type)},searchMethod:function(e){var t=e.node,n=e.searchQuery;return n&&t.title.toLowerCase().indexOf(n.toLowerCase())>-1},searchQuery:g,searchFocusOffset:S,searchFinishCallback:function(e){C(e.length),N(e.length>0?S%e.length:0)},generateNodeProps:function(e){var t=e.node,n=e.path;return{style:{boxShadow:t===b||"sequence"==t.type?"0px 0px 15px 3px  #".concat(Dt(t.type)):""},onClick:function(){c({node:t,path:n,callback:function(e){!function(e){var t,n=e.node,a=e.path,r=Object(_a.b)({treeData:s,path:a,getNodeKey:x,newNode:(t=n,Object(I.a)(Object(I.a)({},t),{title:"".concat(t.label),expanded:!0,type:t.type}))});u(r),L(r)}({node:e.node,path:e.path})},deleteCallback:function(e){!function(e){var t=e.path;c({}),u(Object(_a.e)({treeData:s,path:t,getNodeKey:x}))}({path:e.path})}}),f(t)},buttons:A(t,n),className:"".concat(t.type,":").concat(t.id)}}}))},Ta=Object(j.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},control:{width:"100%",padding:e.spacing(2)},main:{"min-height":"1200px"},side:{position:"absolute",width:"50%",right:"5px"},nested:{paddingLeft:e.spacing(4)},paper:{boxShadow:"5px 5px 10px 5px  #".concat(Dt("default"))},statement:{boxShadow:"2px 2px 7px 2px  #".concat(Dt("statement")),"margin-bottom":"10px"},sequence:{boxShadow:"2px 2px 7px 2px  #".concat(Dt("sequence")),"margin-bottom":"10px"},question:{boxShadow:"2px 2px 7px 2px  #".concat(Dt("question")),"margin-bottom":"10px"},loop:{boxShadow:"2px 2px 7px 2px  #".concat(Dt("loop")),"margin-bottom":"10px"},condition:{boxShadow:"2px 2px 7px 2px  #".concat(Dt("condition")),"margin-bottom":"10px"},divider:{margin:"25px"}}})),Da=function(e,t,n){var a=Object(l.c)((function(e){return e.cc_sequences})),r=Object(_t.get)(a,e,{}),i=Object(l.c)((function(e){return e.cc_statements})),c=Object(_t.get)(i,e,{}),o=Object(l.c)((function(e){return e.cc_conditions})),s=Object(_t.get)(o,e,{}),u=Object(l.c)((function(e){return e.cc_loops})),m=Object(_t.get)(u,e,{}),d=Object(l.c)((function(e){return e.cc_questions})),p=Object(_t.get)(d,e,{}),b=Object(l.c)((function(e){return e.questionItems})),E=Object(_t.get)(b,e,{}),f=Object(l.c)((function(e){return e.questionGrids})),O=Object(_t.get)(f,e,{}),h={children:[]};return"CcLoop"===t&&((h=Object(_t.get)(m,n.toString(),{})).type="loop"),"CcSequence"===t&&((h=Object(_t.get)(r,n.toString(),{})).type="sequence"),"CcStatement"===t&&((h=Object(_t.get)(c,n.toString(),{})).type="statement"),"CcCondition"===t&&((h=Object(_t.get)(s,n.toString(),{})).type="condition"),"CcQuestion"===t&&("QuestionItem"===(h=Object(_t.get)(p,n.toString(),{})).question_type?h.question=Object(_t.get)(E,h.question_id.toString(),{}):"QuestionGrid"===h.question_type&&(h.question=Object(_t.get)(O,h.question_id.toString(),{})),h.type="question"),h},wa=function(e){var t=e.object,n=e.instrumentId,a=e.onNodeSelect,i=t.node,c=void 0===i?{}:i,l=t.path,o=t.callback,s=void 0===o?function(e){console.log("No onChange callback provided")}:o,u=t.deleteCallback,m=void 0===u?function(e){console.log("No onDelete callback provided")}:u;switch(c.type){case"question":return r.a.createElement(ua,{ccQuestion:c,instrumentId:n,path:l,onChange:s,onDelete:m});case"statement":return r.a.createElement(pa,{ccStatement:c,instrumentId:n,path:l,onChange:s,onDelete:m});case"sequence":return r.a.createElement(fa,{ccSequence:c,instrumentId:n,path:l,onChange:s,onDelete:m});case"condition":return r.a.createElement(ia,{ccCondition:c,instrumentId:n,path:l,onChange:s,onDelete:m});case"loop":return r.a.createElement(va,{ccLoop:c,instrumentId:n,path:l,onChange:s,onDelete:m});case void 0:return r.a.createElement(Ca,{onNodeSelect:a,object:t});default:return""}},Ca=function(e){var t=e.object,n=e.onNodeSelect,a=Ta();return r.a.createElement(at.a,{style:{padding:16},className:a.paper},r.a.createElement("h3",null,"Select construct type"),r.a.createElement(E.a,{type:"button",variant:"outlined",className:a.question,onClick:function(){var e=Object(I.a)(Object(I.a)({},t.node),{type:"question"});n(Object(I.a)(Object(I.a)({},t),{node:e}))}},"Question"),r.a.createElement("br",null),r.a.createElement(E.a,{type:"button",variant:"outlined",className:a.condition,onClick:function(){var e=Object(I.a)(Object(I.a)({},t.node),{type:"condition"});n(Object(I.a)(Object(I.a)({},t),{node:e}))}},"Condition"),r.a.createElement("br",null),r.a.createElement(E.a,{type:"button",variant:"outlined",className:a.loop,onClick:function(){var e=Object(I.a)(Object(I.a)({},t.node),{type:"loop"});n(Object(I.a)(Object(I.a)({},t),{node:e}))}},"Loop"),r.a.createElement("br",null),r.a.createElement(E.a,{type:"button",variant:"outlined",className:a.sequence,onClick:function(){var e=Object(I.a)(Object(I.a)({},t.node),{type:"sequence"});n(Object(I.a)(Object(I.a)({},t),{node:e}))}},"Sequence"),r.a.createElement("br",null),r.a.createElement(E.a,{type:"button",variant:"outlined",className:a.statement,onClick:function(){var e=Object(I.a)(Object(I.a)({},t.node),{type:"statement"});n(Object(I.a)(Object(I.a)({},t),{node:e}))}},"Statement"))},xa=function(e){var t=Ta(),n=Object(l.b)(),i=Object(_t.get)(e,"match.params.instrument_id",""),c=Object(l.c)((function(e){return Object(_t.get)(e.instruments,i)})),o=Object(l.c)((function(e){return e.cc_sequences})),s=Object(_t.get)(o,i,null),u=Object(a.useState)({}),m=Object(p.a)(u,2),d=m[0],b=m[1],E=Object(a.useState)(!1),f=Object(p.a)(E,2),O=f[0],h=f[1];Object(a.useEffect)((function(){Promise.all([n(M(i)),n(W.all(i)),n(Y.all(i)),n(te.all(i)),n(X.all(i)),n(re.all(i)),n(se.all(i)),n(de.all(i)),n(Z(i))]).then((function(){h(!0)}))}),[]);var v=Object(_t.isEmpty)(s)||Object(_t.isNil)(s)?void 0:Object.values(s).find((function(e){return 1==e.top}));return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:"Build",instrumentId:i},r.a.createElement("h1",null,Object(_t.get)(c,"label")),O?r.a.createElement(nt.a,{container:!0,spacing:3,className:t.main},r.a.createElement(nt.a,{item:!0,xs:(Object(_t.isEmpty)(d),12)},r.a.createElement(Na,{topSequence:v.children[0],instrumentId:i,onNodeSelect:b,dispatch:n})),!Object(_t.isEmpty)(d)&&r.a.createElement(nt.a,{item:!0,xs:4,className:t.side},r.a.createElement(wa,{object:d,instrumentId:i,onNodeSelect:b}))):r.a.createElement(En,null)))},qa=n(421),Ra=n(113),La=n.n(Ra),Aa=n(164),Ma=n.n(Aa),Pa=Object(j.a)({table:{minWidth:650}}),ka=function(e){var t={};return e.label||(t.label="Required"),t},Qa=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.a,{name:"rd",formControlProps:{margin:"none"},data:{label:"Response Domain",value:!0}})},{size:12,visible:function(e){return Object(_t.get)(e,"rd",!1)},field:r.a.createElement(na.c,{name:"min_responses",multiline:!0,label:"Min Responses",margin:"none"})},{size:12,visible:function(e){return Object(_t.get)(e,"rd",!1)},field:r.a.createElement(na.c,{name:"max_responses",multiline:!0,label:"Max Responses",margin:"none"})}],Ua=function(e){var t=e.item,n=e.values;return void 0===t.visible||t.visible(n)?t.type&&"select"===t.type?t.field():t.field:""},za=function(e){var t=e.codeList,n=e.instrumentId,a=Object(l.c)((function(e){return Object(_t.get)(e.categories,n,{})})),i=Object(l.b)(),c=Pa();return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"CodeList"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?i(z.create(n,e)):i(z.update(n,t.id,e))},initialValues:t,validate:ka,mutators:Object(I.a)({},ea.a),render:function(e){var i=e.handleSubmit,l=e.form.mutators,s=l.push,d=(l.pop,e.pristine),p=e.form,b=e.submitting,f=e.values;return r.a.createElement("form",{onSubmit:i,noValidate:!0},r.a.createElement(at.a,{style:{padding:16}},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},Qa.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},r.a.createElement(Ua,{item:e,values:f}))})),r.a.createElement("h3",null,"Codes"),r.a.createElement(Ma.a,{onClick:function(){return s("codes",{})}}),r.a.createElement(qa.a,{component:at.a},r.a.createElement(Zt.a,{className:c.table,"aria-label":"simple table"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"ID"),r.a.createElement(tn.a,{size:"small"},"Value"),r.a.createElement(tn.a,null,"Label"),r.a.createElement(tn.a,null,"Actions"))),r.a.createElement(en.a,null,r.a.createElement(ta.a,{name:"codes"},(function(e){var t=e.fields;return t.map((function(e,n){return r.a.createElement(an.a,{key:e},r.a.createElement(tn.a,null,t.value[n].id),r.a.createElement(tn.a,{size:"small"},r.a.createElement(na.c,{name:"".concat(e,".value"),multiline:!0,label:"Value",margin:"none"})),r.a.createElement(tn.a,null,r.a.createElement(jn.a,{freesolo:"true",options:Object.values(a),getOptionLabel:function(e){return e.label},onChange:function(e,a,r){Object(_t.isNil)(a)?t.update(n,Object(I.a)(Object(I.a)({},t.value[n]),{category_id:null,label:null})):t.update(n,Object(I.a)(Object(I.a)({},t.value[n]),{category_id:a.id,label:a.label}))},value:{id:t.value[n].category_id,label:t.value[n].label},getOptionSelected:function(e,t){return e.id===t.id},renderInput:function(t){return r.a.createElement(na.c,Object.assign({name:"".concat(e,".label")},t,{variant:"outlined",label:"Label",placeholder:"label"}))}})),r.a.createElement(tn.a,null,r.a.createElement("span",{onClick:function(){return t.remove(n)},style:{cursor:"pointer"}},r.a.createElement(La.a,null))))}))}))))),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:p.reset,disabled:b||d},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:b},"Submit")),r.a.createElement($n,{id:f.id,instrumentId:n,action:z})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement("h3",null,"Used By"),r.a.createElement(qa.a,{component:at.a},r.a.createElement(Zt.a,{className:c.table,"aria-label":"simple table"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"ID"),r.a.createElement(tn.a,{size:"small"},"Question Type"),r.a.createElement(tn.a,null,"Label"))),r.a.createElement(en.a,null,t.used_by.map((function(e){return r.a.createElement(an.a,{key:e.id},r.a.createElement(tn.a,null,r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.questionItems.show,{instrument_id:n,questionItemId:e.id})},e.id))),r.a.createElement(tn.a,{size:"small"},e.type),r.a.createElement(tn.a,{size:"small"},e.label))}))))))))}}))},Ga=function(e){var t=e.objectTypes,n=void 0===t?[]:t,a=e.instrumentId,i=e.callback,c=void 0===i?function(){}:i,l=Object(s.g)(),o=n.map((function(e){return function(e,t){switch(e){case"ResponseDomainNumeric":return{path:Object(u.reverse)(m.instruments.instrument.build.responseDomains.show,{instrument_id:t,responseDomainType:e,responseDomainId:"new"}),text:"Numeric"};case"ResponseDomainText":return{path:Object(u.reverse)(m.instruments.instrument.build.responseDomains.show,{instrument_id:t,responseDomainType:e,responseDomainId:"new"}),text:"Text"};case"ResponseDomainDatetime":return{path:Object(u.reverse)(m.instruments.instrument.build.responseDomains.show,{instrument_id:t,responseDomainType:e,responseDomainId:"new"}),text:"Datetime"};case"CodeList":return{path:Object(u.reverse)(m.instruments.instrument.build.codeLists.show,{instrument_id:t,codeListId:"new"}),text:"New CodeList"};case"QuestionItem":return{path:Object(u.reverse)(m.instruments.instrument.build.questionItems.show,{instrument_id:t,questionItemId:"new"}),text:"Question Item"};case"QuestionGrid":return{path:Object(u.reverse)(m.instruments.instrument.build.questionGrids.show,{instrument_id:t,questionGridId:"new"}),text:"Question Grid"};default:return{path:"/",text:"Not found"}}}(e,a)}));return r.a.createElement(on.a,{color:"primary","aria-label":"outlined primary button group"},o.map((function(e){return r.a.createElement(E.a,{onClick:function(){var t;t=e.path,l.push(t),c("new")},startIcon:r.a.createElement(ja.a,null)},e.text)})))},Va=Object(j.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},side:{position:"absolute",width:"50%"},control:{width:"100%",padding:e.spacing(2)}}})),Wa=function(e){var t=Object(s.g)(),n=Object(l.b)(),i=Va(),c=Object(_t.get)(e,"match.params.codeListId",null),o=Object(_t.get)(e,"match.params.instrument_id",""),d=Object(l.c)((function(e){return Object(_t.get)(e.codeLists,o,{})})),p=Object(_t.get)(d,c,{used_by:[]});Object(a.useEffect)((function(){n(z.all(o)),n(Q(o))}),[]);var b=function(e){var t=e.label,n=e.value,a=e.id;return r.a.createElement(ut.a,null,r.a.createElement(dt.a,{primary:t,onClick:function(){E(a)}}),r.a.createElement(Jn.a,null,r.a.createElement(An.a,{label:n})))},E=function(e){var n=Object(u.reverse)(m.instruments.instrument.build.codeLists.show,{instrument_id:o,codeListId:e});t.push(n)};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:o,instrumentId:o},r.a.createElement(nt.a,{container:!0,spacing:3},r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(at.a,{className:i.control},r.a.createElement("h2",null,"Code Lists"),r.a.createElement(Ga,{instrumentId:o,objectTypes:["CodeList"]}),r.a.createElement(Ze.a,{dense:!0},Object.values(d).map((function(e){return r.a.createElement(b,{label:e.label,value:e.used_by.length,id:e.id})}))))),r.a.createElement(nt.a,{item:!0,xs:8},r.a.createElement(at.a,{className:i.side},!Object(_t.isNil)(p)&&r.a.createElement(za,{codeList:p,instrumentId:o}))))))},Ba=n(70),Fa=Object(j.a)({table:{minWidth:650}}),Ya=function(e){var t={};return e.label||(t.label="Required"),t},Ha=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.c,{label:"Instruction",name:"instruction",margin:"none"})},{size:12,field:r.a.createElement(na.c,{label:"Literal",name:"literal",margin:"none",required:!0})}],Ja=function(e){var t=e.questionItem,n=e.instrumentId,i=(Object(l.c)((function(e){return Object(_t.get)(e.categories,n,{})})),Object(l.b)()),c=Fa(),o=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainNumerics,n,{})})),s=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainTexts,n,{})})),u=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainDatetimes,n,{})})),m=[].concat(Object(Ba.a)(Object.values(o)),Object(Ba.a)(Object.values(s)),Object(Ba.a)(Object.values(u)));return Object(a.useEffect)((function(){i(Ee.all(n)),i(he.all(n)),i(je.all(n))}),[]),r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"QuestionItem"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?i(se.create(n,e)):i(se.update(n,t.id,e))},initialValues:t,validate:Ya,mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,a=e.form.mutators,i=a.push,l=(a.pop,e.pristine),o=e.form,s=e.submitting,u=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16}},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},Ha.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.field)})),r.a.createElement("h3",null,"Response Domains"),r.a.createElement(Ma.a,{onClick:function(){return i("rds",{})}}),r.a.createElement(qa.a,{component:at.a},r.a.createElement(Zt.a,{className:c.table,"aria-label":"simple table"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"Type and Label"),r.a.createElement(tn.a,null,"Actions"))),r.a.createElement(en.a,null,r.a.createElement(ta.a,{name:"rds"},(function(e){var t=e.fields;return t.map((function(e,n){return r.a.createElement(an.a,{key:e},r.a.createElement(tn.a,null,r.a.createElement(jn.a,{freesolo:"true",options:Object.values(m),getOptionLabel:function(e){return"".concat(e.type," - ").concat(e.label)},onChange:function(e,a,r){Object(_t.isNil)(a)?t.update(n,Object(I.a)(Object(I.a)({},t.value[n]),{type:null,id:null,label:null})):t.update(n,Object(I.a)(Object(I.a)({},t.value[n]),{type:a.type,id:a.id,label:a.label}))},value:{type:t.value[n].type,id:t.value[n].id,label:t.value[n].label},getOptionSelected:function(e,t){return e.type===t.type&&e.id===t.id},renderInput:function(t){return r.a.createElement(na.c,Object.assign({name:"".concat(e,".type - ").concat(e,".label")},t,{variant:"outlined",label:"Label",placeholder:"label"}))}})),r.a.createElement(tn.a,null,r.a.createElement("span",{onClick:function(){return t.remove(n)},style:{cursor:"pointer"}},r.a.createElement(La.a,null))))}))}))))),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:o.reset,disabled:s||l},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:s},"Submit")),r.a.createElement($n,{id:u.id,instrumentId:n,action:se}))))}}))},Xa=Object(j.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},side:{position:"absolute",width:"50%"},control:{width:"100%",padding:e.spacing(2)}}})),Ka=function(e){var t=Object(s.g)(),n=Object(l.b)(),i=Xa(),c=Object(_t.get)(e,"match.params.questionItemId",null),d=Object(_t.get)(e,"match.params.instrument_id",""),p=Object(l.c)((function(e){return Object(_t.get)(e.questionItems,d,{})})),b=Object(_t.get)(p,c,{used_by:[]});Object(a.useEffect)((function(){n(se.all(d))}),[]);var E=function(e){var t=e.label,n=(e.value,e.id);return r.a.createElement(ut.a,null,r.a.createElement(dt.a,{primary:t,onClick:function(){f(n)}}))},f=function(e){var n=Object(u.reverse)(m.instruments.instrument.build.questionItems.show,{instrument_id:d,questionItemId:e});t.push(n)};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:d,instrumentId:d},r.a.createElement(nt.a,{container:!0,spacing:3},r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(at.a,{className:i.control},r.a.createElement("h2",null,"Question Items ",r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.questionGrids.all,{instrument_id:d})},"Question Grids")),r.a.createElement(Ga,{instrumentId:d,objectTypes:["QuestionItem","QuestionGrid"]}),r.a.createElement(Ze.a,{dense:!0},Object.values(p).map((function(e){return r.a.createElement(E,{label:e.label,id:e.id})}))))),r.a.createElement(nt.a,{item:!0,xs:8},r.a.createElement(at.a,{className:i.side},!Object(_t.isNil)(b)&&r.a.createElement(Ja,{questionItem:b,instrumentId:d}))))))},$a=Object(j.a)({table:{minWidth:650}}),Za=function(e){var t={};return e.label||(t.label="Required"),t},er=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.c,{label:"Instruction",name:"instruction",margin:"none"})},{size:12,field:r.a.createElement(na.c,{label:"Literal",name:"literal",margin:"none",required:!0})},{type:"select",size:12,field:function(e){return r.a.createElement(na.b,{name:"horizontal_code_list_id",label:"Horizontal Code List (X)",formControlProps:{margin:"none"}},r.a.createElement(la.a,null),e.map((function(e,t){return r.a.createElement(la.a,{value:e.id},e.label)})))}},{type:"select",size:12,field:function(e){return r.a.createElement(na.b,{name:"vertical_code_list_id",label:"Vertical Code List (Y)",formControlProps:{margin:"none"}},r.a.createElement(la.a,null),e.map((function(e,t){return r.a.createElement(la.a,{value:e.id},e.label)})))}},{type:"select",size:12,field:function(e){return r.a.createElement(na.b,{name:"corner_label",label:"Corner Label",formControlProps:{margin:"none"}},r.a.createElement(la.a,null),r.a.createElement(la.a,{value:"H"},"Horizontal"),r.a.createElement(la.a,{value:"V"},"Vertical"))}},{size:12,field:r.a.createElement(na.c,{label:"Roster Label",name:"roster_label",margin:"none"})},{size:12,field:r.a.createElement(na.c,{label:"Roster Row Number",name:"roster_rows",margin:"none"})}],tr=function(e){var t=e.questionGrid,n=e.instrumentId,i=Object(l.c)((function(e){return Object(_t.get)(e.codeLists,n,{})}));i=Object.values(i).filter((function(e){return!1===e.rd}));var c=Object(l.b)(),o=$a(),s=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainNumerics,n,{})})),u=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainTexts,n,{})})),m=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainDatetimes,n,{})})),d=[].concat(Object(Ba.a)(Object.values(s)),Object(Ba.a)(Object.values(u)),Object(Ba.a)(Object.values(m)));return Object(a.useEffect)((function(){c(Ee.all(n)),c(he.all(n)),c(je.all(n))}),[]),r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"QuestionGrid"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?c(de.create(n,e)):c(de.update(n,t.id,e))},initialValues:t,validate:Za,mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,a=e.form.mutators,c=(a.push,a.pop,e.pristine),l=e.form,s=e.submitting,u=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16}},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},er.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field(i):e.field)})),r.a.createElement(ca.a,{name:"horizontal_code_list_id"},(function(e,t){var n=i.find((function(t){return t.id===e}));n&&(u.cols=n.codes.map((function(e){return{label:e.label,value:e.value,order:e.order}})))})),r.a.createElement("h3",null,"Response Domains"),r.a.createElement(qa.a,{component:at.a},r.a.createElement(Zt.a,{className:o.table,"aria-label":"simple table"},r.a.createElement(nn.a,null,r.a.createElement(an.a,null,r.a.createElement(tn.a,null,"Column"),r.a.createElement(tn.a,null,"Type and Label"),r.a.createElement(tn.a,null,"Actions"))),r.a.createElement(en.a,null,r.a.createElement(ta.a,{name:"cols"},(function(e){var t=e.fields;return t.map((function(e,n){return r.a.createElement(an.a,{key:e},r.a.createElement(tn.a,null,t.value[n].label),r.a.createElement(tn.a,null,r.a.createElement(jn.a,{freesolo:"true",options:Object.values(d),getOptionLabel:function(e){return""===e.type?"":"".concat(e.label," - ").concat(e.type)},onChange:function(e,a,r){var i;i=Object(_t.isNil)(a)?Object(I.a)(Object(I.a)({},t.value[n].rd),{type:"",id:null,label:""}):Object(I.a)(Object(I.a)({},t.value[n].rd),{type:a.type,id:a.id,label:a.label}),t.update(n,Object(I.a)(Object(I.a)({},t.value[n]),{rd:i}))},value:t.value[n].rd?{type:t.value[n].rd.type,id:t.value[n].rd.id,label:t.value[n].rd.label}:{type:"",id:null,label:""},getOptionSelected:function(e,t){return e.type===t.type&&e.id===t.id},renderInput:function(t){return r.a.createElement(na.c,Object.assign({name:"".concat(e,".type - ").concat(e,".label")},t,{variant:"outlined",label:"Label",placeholder:"label"}))}})),r.a.createElement(tn.a,null,r.a.createElement("span",{onClick:function(){return t.update(n,Object(I.a)(Object(I.a)({},t.value[n]),{rd:{type:"",id:null,label:""}}))},style:{cursor:"pointer"}},r.a.createElement(La.a,null))))}))}))))),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:l.reset,disabled:s||c},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:s},"Submit")),r.a.createElement($n,{id:u.id,instrumentId:n,action:de}))))}}))},nr=Object(j.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},side:{position:"absolute",width:"50%"},control:{width:"100%",padding:e.spacing(2)}}})),ar=function(e){var t=Object(s.g)(),n=Object(l.b)(),i=nr(),c=r.a.useState(Object(_t.get)(e,"match.params.questionGridId",null)),d=Object(p.a)(c,2),b=d[0],E=d[1],f=Object(_t.get)(e,"match.params.instrument_id",""),O=Object(l.c)((function(e){return Object(_t.get)(e.questionGrids,f,{})})),h=Object(_t.get)(O,b,{used_by:[]});Object(a.useEffect)((function(){n(de.all(f)),n(z.all(f))}),[]);var v=function(e){var t=e.label,n=e.id;return r.a.createElement(ut.a,null,r.a.createElement(dt.a,{primary:t,onClick:function(){g(n)}}))},g=function(e){var n=Object(u.reverse)(m.instruments.instrument.build.questionGrids.show,{instrument_id:f,questionGridId:e});t.push(n),E(e)};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:f,instrumentId:f},r.a.createElement(nt.a,{container:!0,spacing:3},r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(at.a,{className:i.control},r.a.createElement("h2",null,"Question Grids ",r.a.createElement(o.b,{to:Object(u.reverse)(m.instruments.instrument.build.questionItems.all,{instrument_id:f})},"Question Items")),r.a.createElement(Ga,{instrumentId:f,objectTypes:["QuestionItem","QuestionGrid"],callback:E}),r.a.createElement(Ze.a,{dense:!0},Object.values(O).map((function(e){return r.a.createElement(v,{label:e.label,id:e.id})}))))),r.a.createElement(nt.a,{item:!0,xs:8},r.a.createElement(at.a,{className:i.side},!Object(_t.isNil)(h)&&r.a.createElement(tr,{questionGrid:h,instrumentId:f}))))))},rr=Object(j.a)({table:{minWidth:650}}),ir=function(e){var t={};return e.label||(t.label="Required"),e.subtype||(t.subtype="Required"),t},cr=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{type:"select",size:12,field:function(e){return r.a.createElement(na.b,{name:"subtype",label:"Type",formControlProps:{margin:"none"},required:!0},r.a.createElement(la.a,null),r.a.createElement(la.a,{value:"Integer"},"Integer"),r.a.createElement(la.a,{value:"Float"},"Float"))}},{size:12,field:r.a.createElement(na.c,{label:"Min",name:"min",margin:"none"})},{size:12,field:r.a.createElement(na.c,{label:"Max",name:"max",margin:"none"})}],lr=function(e){var t=e.responseDomain,n=e.instrumentId,a=Object(l.c)((function(e){return Object(_t.get)(e.codeLists,n,{})})),i=Object(l.b)();rr();return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"ResponseDomain"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?i(Ee.create(n,e)):i(Ee.update(n,t.id,e))},initialValues:t,validate:ir,mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,i=e.form.mutators,c=(i.push,i.pop,e.pristine),l=e.form,o=e.submitting,s=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16}},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},cr.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field(a):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:l.reset,disabled:o||c},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:o},"Submit")),r.a.createElement($n,{id:s.id,instrumentId:n,action:Ee}))))}}))},or=Object(j.a)({table:{minWidth:650}}),sr=function(e){var t={};return e.label||(t.label="Required"),t},ur=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(na.c,{label:"Max Length",name:"maxlen",margin:"none",required:!0})}],mr=function(e){var t=e.responseDomain,n=e.instrumentId,a=Object(l.c)((function(e){return Object(_t.get)(e.codeLists,n,{})})),i=Object(l.b)();or();return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"ResponseDomain"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?i(he.create(n,e)):i(he.update(n,t.id,e))},initialValues:t,validate:sr,mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,i=e.form.mutators,c=(i.push,i.pop,e.pristine),l=e.form,o=e.submitting,s=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16}},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},ur.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field(a):e.field)})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:l.reset,disabled:o||c},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:o},"Submit")),r.a.createElement($n,{id:s.id,instrumentId:n,action:he}))))}}))},dr=Object(j.a)({table:{minWidth:650}}),pr=function(e){var t={};return e.label||(t.label="Required"),e.subtype||(t.subtype="Required"),t},br=[{size:12,field:r.a.createElement(na.c,{label:"Label",name:"label",margin:"none",required:!0})},{type:"select",size:12,field:function(e){return r.a.createElement(na.b,{name:"subtype",label:"Type",formControlProps:{margin:"none"},required:!0},r.a.createElement(la.a,{value:"Date"},"Date"),r.a.createElement(la.a,{value:"Time"},"Time"),r.a.createElement(la.a,{value:"Duration"},"Duration"))}},{size:12,visible:function(e){return"Duration"===Object(_t.get)(e,"subtype","")},field:r.a.createElement(na.c,{label:"Format",name:"format",margin:"none"})}],Er=function(e){var t=e.item,n=e.values;return void 0===t.visible||t.visible(n)?t.type&&"select"===t.type?t.field():t.field:""},fr=function(e){var t=e.responseDomain,n=e.instrumentId,a=Object(l.b)();dr();return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Vt,{id:t.id||"new",type:"ResponseDomain"}),r.a.createElement(f.a,null),r.a.createElement(Qt.b,{onSubmit:function(e){e=Zn(t,e),Object(_t.isNil)(t.id)?a(je.create(n,e)):a(je.update(n,t.id,e))},initialValues:t,validate:pr,mutators:Object(I.a)({},ea.a),render:function(e){var t=e.handleSubmit,a=e.form.mutators,i=(a.push,a.pop,e.pristine),c=e.form,l=e.submitting,o=e.values;return r.a.createElement("form",{onSubmit:t,noValidate:!0},r.a.createElement(at.a,{style:{padding:16}},r.a.createElement(nt.a,{container:!0,alignItems:"flex-start",spacing:2},br.map((function(e,t){return r.a.createElement(nt.a,{item:!0,xs:e.size,key:t},r.a.createElement(Er,{item:e,values:o}))})),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:c.reset,disabled:l||i},"Reset")),r.a.createElement(nt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:l},"Submit")),r.a.createElement($n,{id:o.id,instrumentId:n,action:je}))))}}))},Or=Object(j.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},side:{position:"absolute",width:"50%"},control:{width:"100%",padding:e.spacing(2)}}})),hr=function(e){var t=Object(s.g)(),n=Object(l.b)(),i=Or(),c=Object(_t.get)(e,"match.params.instrument_id",""),o=Object(_t.get)(e,"match.params.responseDomainId",null),d=Object(_t.get)(e,"match.params.responseDomainType",null),p=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainNumerics,c,{})})),b=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainTexts,c,{})})),E=Object(l.c)((function(e){return Object(_t.get)(e.responseDomainDatetimes,c,{})})),f=[].concat(Object(Ba.a)(Object.values(p)),Object(Ba.a)(Object.values(b)),Object(Ba.a)(Object.values(E))),O=f.find((function(e){return e.id==o&&e.type==d}))||{};Object(a.useEffect)((function(){n(Ee.all(c)),n(he.all(c)),n(je.all(c))}),[]);var h=function(e){var t=e.label,n=e.type,a=e.id;return r.a.createElement(ut.a,null,r.a.createElement(dt.a,{primary:t,onClick:function(){v(n,a)}}),r.a.createElement(Jn.a,null,r.a.createElement(An.a,{label:n})))},v=function(e,n){var a=Object(u.reverse)(m.instruments.instrument.build.responseDomains.show,{instrument_id:c,responseDomainType:e,responseDomainId:n});t.push(a)};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Pt,{title:c,instrumentId:c},r.a.createElement(nt.a,{container:!0,spacing:3},r.a.createElement(nt.a,{item:!0,xs:4},r.a.createElement(at.a,{className:i.control},r.a.createElement("h2",null,"Response Domains"),r.a.createElement(Ga,{instrumentId:c,objectTypes:["ResponseDomainText","ResponseDomainNumeric","ResponseDomainDatetime"]}),r.a.createElement(Ze.a,{dense:!0},Object.values(f).map((function(e){return r.a.createElement(h,{label:e.label,type:e.type,id:e.id})}))))),r.a.createElement(nt.a,{item:!0,xs:8},r.a.createElement(at.a,{className:i.side},function(){switch(d){case"ResponseDomainNumeric":return r.a.createElement(lr,{responseDomain:O,instrumentId:c});case"ResponseDomainText":return r.a.createElement(mr,{responseDomain:O,instrumentId:c});case"ResponseDomainDatetime":return r.a.createElement(fr,{responseDomain:O,instrumentId:c});default:return""}}())))))},vr=function(){return"NoMatch"},gr=function(){var e=Object(l.c)((function(e){return Object(_t.get)(e.common,"redirect")}));Object(l.b)();return e?r.a.createElement(s.a,{to:e}):""},jr=n(259),yr=n(420),Ir=Object(jr.a)({palette:{primary:{main:"#009de6"},secondary:{main:"#652d90"},admin:{main:"#37b34a"},error:{main:"#eb008b"},warning:{main:"#eb008b"},info:{main:"#faaf40"},success:{main:"#37b34a"}}}),_r=function(){return console.log(m),r.a.createElement(yr.a,{theme:Ir},r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(gr,null),r.a.createElement(s.d,null,r.a.createElement(d,{type:"guest",exact:!0,path:m.login,component:Ye}),r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(s.a,{to:m.instruments.all})}}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.map.show,component:Hn}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.show,component:Kn}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.show,component:qn}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.codeLists.all,component:Wa}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.codeLists.show,component:Wa}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.codeLists.new,component:Wa}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.questionItems.all,component:Ka}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.questionItems.show,component:Ka}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.questionItems.new,component:Ka}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.questionGrids.all,component:ar}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.questionGrids.show,component:ar}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.questionGrids.new,component:ar}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.responseDomains.all,component:hr}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.responseDomains.show,component:hr}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.responseDomains.new,component:hr}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.instrument.build.constructs.show,component:xa}),r.a.createElement(d,{type:"private",exact:!0,path:m.instruments.all,component:gn}),r.a.createElement(d,{type:"private",exact:!0,path:"/datasets/:dataset_id",component:yn}),r.a.createElement(d,{type:"private",exact:!0,path:m.admin.datasets.all,component:vn}),r.a.createElement(d,{type:"private",exact:!0,path:m.admin.import,component:$t}),r.a.createElement(d,{type:"private",exact:!0,path:m.admin.imports,component:ln}),r.a.createElement(d,{type:"private",exact:!0,path:m.admin.instruments.all,component:hn}),r.a.createElement(d,{type:"private",exact:!0,path:m.admin.instruments.importMappings,component:fn}),r.a.createElement(d,{type:"private",exact:!0,path:m.admin.datasets.importMappings,component:On}),r.a.createElement(d,{type:"guest",component:vr})))))},Sr=n(83),Nr=function(e){return e.reduce((function(e,t){return e[t.prefix]=t,e}),{})},Tr=function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})},Dr=Object(Sr.c)({common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REDIRECT":return Object(I.a)(Object(I.a)({},e),{redirect:t.payload.to});case"REDIRECT_CLEAR":return Object(I.a)(Object(I.a)({},e),{redirect:void 0});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthUser:!!window.localStorage.getItem("jwt")},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return window.localStorage.setItem("jwt",t.payload.jwt),{isAuthUser:!0};case"LOGOUT":return window.localStorage.removeItem("jwt"),{isAuthUser:!1};default:return e}},datasets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATASETS":return Tr(t.payload.datasets);case"LOAD_DATASET":return Object(I.a)(Object(I.a)({},e),{[t.payload.dataset.id]:t.payload.dataset});default:return e}},instruments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENTS":return Nr(t.payload.instruments);case"LOAD_INSTRUMENT":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrument.prefix]:t.payload.instrument});default:return e}},imports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_IMPORTS":return Nr(t.payload.imports);case"LOAD_IMPORT":return Object(I.a)(Object(I.a)({},e),{[t.payload.import.prefix]:t.payload.import});default:return e}},instrumentStats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_STATS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:t.payload.stats});default:return e}},cc_sequences:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_SEQUENCES":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.sequences)});case"LOAD_INSTRUMENT_SEQUENCE":var n=e[t.payload.instrumentId];return n[t.payload.sequence.id]=t.payload.sequence,Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:n});default:return e}},cc_statements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_STATEMENTS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.statements)});case"LOAD_INSTRUMENT_STATEMENT":var n=e[t.payload.instrumentId];return n[t.payload.statement.id]=t.payload.statement,Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:n});default:return e}},cc_conditions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_CONDITIONS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.conditions)});case"LOAD_INSTRUMENT_CONDITION":var n=e[t.payload.instrumentId];return n[t.payload.condition.id]=t.payload.condition,Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:n});default:return e}},cc_loops:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_LOOPS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.loops)});case"LOAD_INSTRUMENT_LOOP":var n=e[t.payload.instrumentId];return n[t.payload.loop.id]=t.payload.loop,Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:n});default:return e}},cc_questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_QUESTIONS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.questions)});case"LOAD_INSTRUMENT_QUESTION":var n=e[t.payload.instrumentId];return n[t.payload.question.id]=t.payload.question,Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:n});default:return e}},response_units:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_RESPONSE_UNITS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.responseUnits)});case"LOAD_INSTRUMENT_RESPONSE_UNIT":var n=e[t.payload.instrumentId];return n[t.payload.responseUnit.id]=t.payload.responseUnit,Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:n});default:return e}},questionItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_QUESTION_ITEMS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.questions)});case"LOAD_INSTRUMENT_QUESTION_ITEM":var n=Object(_t.get)(e,t.payload.instrumentId,{}),a=Object(I.a)(Object(I.a)({},n),{[t.payload.questionItem.id]:t.payload.questionItem});return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:a});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("QuestionItem"===t.payload.objectType){var r=Object(_t.get)(e,t.payload.instrumentId,{});return delete r[t.payload.id],Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:r})}return e;default:return e}},questionGrids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_QUESTION_GRIDS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.questions)});case"LOAD_INSTRUMENT_QUESTION_GRID":var n=Object(_t.get)(e,t.payload.instrumentId,{}),a=Object(I.a)(Object(I.a)({},n),{[t.payload.questionGrid.id]:t.payload.questionGrid});return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:a});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("QuestionGrid"===t.payload.objectType){var r=Object(_t.get)(e,t.payload.instrumentId,{});return delete r[t.payload.id],Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:r})}return e;default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_CATEGORIES":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.categories)});default:return e}},codeLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_CODE_LISTS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.codeLists)});case"LOAD_INSTRUMENT_CODE_LIST":a=Object(_t.get)(e,t.payload.instrumentId,{});var n=Object(I.a)(Object(I.a)({},a),{[t.payload.codeList.id]:t.payload.codeList});return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:n});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("CodeList"===t.payload.objectType){var a=Object(_t.get)(e,t.payload.instrumentId,{});return delete a[t.payload.id],Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:a})}return e;default:return e}},responseDomainNumerics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_NUMERICS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.responseDomainNumerics)});case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_NUMERIC":var n=Object(_t.get)(e,t.payload.instrumentId,{}),a=Object(I.a)(Object(I.a)({},n),{[t.payload.responseDomainNumeric.id]:t.payload.responseDomainNumeric});return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:a});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("ResponseDomainNumeric"===t.payload.objectType){var r=Object(_t.get)(e,t.payload.instrumentId,{});return delete r[t.payload.id],Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:r})}return e;default:return e}},responseDomainTexts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_TEXTS":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.responseDomainTexts)});case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_TEXT":var n=Object(_t.get)(e,t.payload.instrumentId,{}),a=Object(I.a)(Object(I.a)({},n),{[t.payload.responseDomainText.id]:t.payload.responseDomainText});return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:a});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("ResponseDomainText"===t.payload.objectType){var r=Object(_t.get)(e,t.payload.instrumentId,{});return delete r[t.payload.id],Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:r})}return e;default:return e}},responseDomainDatetimes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_DATETIMES":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.responseDomainDatetimes)});case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_DATETIME":var n=Object(_t.get)(e,t.payload.instrumentId,{}),a=Object(I.a)(Object(I.a)({},n),{[t.payload.responseDomainDatetime.id]:t.payload.responseDomainDatetime});return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:a});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("ResponseDomainDatetime"===t.payload.objectType){var r=Object(_t.get)(e,t.payload.instrumentId,{});return delete r[t.payload.id],Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:r})}return e;default:return e}},datasetVariables:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATASET_VARIABLES":return Object(I.a)(Object(I.a)({},e),{[t.payload.datasetId]:Tr(t.payload.variables)});case"LOAD_DATASET_VARIABLE":var n=Object(_t.get)(e,t.payload.datasetId,{}),a=Object(I.a)(Object(I.a)({},n),{[t.payload.variable.id]:t.payload.variable});return Object(I.a)(Object(I.a)({},e),{[t.payload.datasetId]:a});default:return e}},variables:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_VARIABLES":return Object(I.a)(Object(I.a)({},e),{[t.payload.instrumentId]:Tr(t.payload.variables)});default:return e}},statuses:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SAVING":return e=n.payload.type+":"+n.payload.id,Object(I.a)(Object(I.a)({},t),{[e]:{saving:!0}});case"SAVED":return e=n.payload.type+":"+n.payload.id,Object(I.a)(Object(I.a)({},t),{[e]:{saved:!0}});case"ERROR":return e=n.payload.type+":"+n.payload.id,"object"===typeof n.payload.error&&null!==n.payload.error?Object(I.a)(Object(I.a)({},t),{[e]:{error:!0,errors:n.payload.error,errorMessage:""}}):Object(I.a)(Object(I.a)({},t),{[e]:{error:!0,errorMessage:n.payload.error}});default:return t}},topics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TOPICS":return Object(I.a)(Object(I.a)({},e),Tr(t.payload.topics));default:return e}},datasetImportMappings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATASET_IMPORT_MAPPINGS":return Object(I.a)(Object(I.a)({},e),{[t.payload.id]:Tr(t.payload.importMappings)});case"LOAD_DATASET_IMPORT_MAPPING":var n=Object(_t.get)(e,t.payload.id,{}),a=Object(I.a)(Object(I.a)({},n),{[t.payload.importMapping.id]:t.payload.importMapping});return Object(I.a)(Object(I.a)({},e),{[t.payload.datasetId]:a});default:return e}},instrumentImportMappings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INSTRUMENT_IMPORT_MAPPINGS":return Object(I.a)(Object(I.a)({},e),{[t.payload.id]:Tr(t.payload.importMappings)});case"LOAD_INSTRUMENT_IMPORT_MAPPING":var n=Object(_t.get)(e,t.payload.id,{}),a=Object(I.a)(Object(I.a)({},n),{[t.payload.importMapping.id]:t.payload.importMapping});return Object(I.a)(Object(I.a)({},e),{[t.payload.datasetId]:a});default:return e}}}),wr=n(258),Cr=Object(Sr.d)(Dr,Object(Sr.a)(wr.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,{store:Cr},r.a.createElement(_r,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[275,1,2]]]);
//# sourceMappingURL=main.6f3f2b33.chunk.js.map