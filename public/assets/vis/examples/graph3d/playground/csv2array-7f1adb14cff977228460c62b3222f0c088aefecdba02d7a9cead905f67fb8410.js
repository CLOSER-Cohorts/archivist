function csv2array(r,e){e==undefined&&(e=","),e&&e.length>1&&(e=",");for(var t="\n",a="",h=0,c=r.charAt(h),f=0,n=new Array;c!=a;){for(;" "==c||"\t"==c||"\r"==c;)c=r.charAt(++h);var A="";if('"'==c){c=r.charAt(++h);do{if('"'!=c&&(A+=c,c=r.charAt(++h)),'"'==c)'"'==r.charAt(h+1)&&(A+='"',h+=2,c=r.charAt(h))}while(c!=a&&'"'!=c);if(c==a)throw"Unexpected end of data, double-quote expected";c=r.charAt(++h)}else for(;c!=a&&c!=e&&c!=t&&" "!=c&&"\t"!=c&&"\r"!=c;)A+=c,c=r.charAt(++h);for(n.length<=f&&n.push(new Array),n[f].push(A);" "==c||"\t"==c||"\r"==c;)c=r.charAt(++h);if(c==e)0;else if(c==t)0,f++;else if(c!=a)throw"Delimiter expected after character "+h;c=r.charAt(++h)}return n}