(function(){var t;(t=angular.module("archivist.resource",["ngResource"])).factory("WrappedResource",["$resource",function(t){return function(e,r,n,i){var u;return u=this,this.data={},this.actions=null!=n?n:{save:{method:"PUT"},create:{method:"POST"}},this.index=function(t,r){return e+t+JSON.stringify(r)},this.resource=t(e,r,this.actions,i),this.resource.prototype.save=function(t,e,r){return console.trace(),null!=this.id?this.$save(t,e,r):this.$create(t,e,r)},this.query=function(t,e,r){return null==u.data[this.index("query",t)]&&(u.data[this.index("query",t)]=u.resource.query(t,function(r,n){var i,u,a,s,o;for(i=0,a=r.length;i<a;i++)for(u in s=r[i],t)o=t[u],s[u]=o;if(null!=e)return e(r,n)},r)),u.data[this.index("query",t)]},this.requery=function(t,e,r){return u.data[this.index("query",t)]=null,u.query(t,e,r)},this.get=function(t,e,r){return null==u.data[this.index("get",t)]&&(u.data[this.index("get",t)]=u.resource.get(t,e,r)),u.data[this.index("get",t)]},this.reget=function(t,e,r){return u.data[this.index("get",t)]=null,u.get(t,e,r)},this.clearCache=function(){return u.data={}},this}}]),t.factory("GetResource",["$http",function(t){return function(e,r,n){var i,u;return null==r&&(r=!1),(i=r?[]:{}).$resolved=!1,i.$promise=t.get(e,{cache:!0}),u=i.$promise.then(function(t){var e;for(e in t.data)t.data.hasOwnProperty(e)&&(i[e]=t.data[e]);return i.$resolved=!0}),"function"==typeof n&&u.then(n),i}}])}).call(this);