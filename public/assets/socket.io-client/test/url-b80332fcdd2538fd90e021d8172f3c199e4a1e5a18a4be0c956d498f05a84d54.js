var loc={},url=require("../lib/url"),expect=require("expect.js");describe("url",function(){it("works with undefined",function(){loc.hostname="woot.com",loc.protocol="https:",loc.port=4005,loc.host=loc.hostname+":"+loc.port;var o=url(undefined,loc);expect(o.host).to.be("woot.com"),expect(o.protocol).to.be("https"),expect(o.port).to.be("4005")}),it("works with relative paths",function(){loc.hostname="woot.com",loc.protocol="https:",loc.port=3e3,loc.host=loc.hostname+":"+loc.port;var o=url("/test",loc);expect(o.host).to.be("woot.com"),expect(o.protocol).to.be("https"),expect(o.port).to.be("3000")}),it("works with no protocol",function(){loc.protocol="http:";var o=url("localhost:3000",loc);expect(o.host).to.be("localhost"),expect(o.port).to.be("3000"),expect(o.protocol).to.be("http")}),it("works with no schema",function(){loc.protocol="http:";var o=url("//localhost:3000",loc);expect(o.host).to.be("localhost"),expect(o.port).to.be("3000"),expect(o.protocol).to.be("http")}),it("forces ports for unique url ids",function(){var o=url("http://google.com:80/"),t=url("http://google.com/"),e=url("https://google.com/");expect(o.id).to.be(t.id),expect(o.id).to.not.be(e.id),expect(t.id).to.not.be(e.id)}),it("identifies the namespace",function(){loc.protocol="http:",loc.hostname="woot.com",expect(url("/woot",loc).path).to.be("/woot"),expect(url("http://google.com").path).to.be("/"),expect(url("http://google.com/").path).to.be("/")}),it("works with ipv6",function(){var o=url("http://[::1]");expect(o.protocol).to.be("http"),expect(o.host).to.be("::1"),expect(o.port).to.be("80"),expect(o.id).to.be("http://[::1]:80")}),it("works with ipv6 location",function(){loc.protocol="http:",loc.hostname="[::1]",loc.port="",loc.host=loc.hostname+":"+loc.port;var o=url(undefined,loc);expect(o.protocol).to.be("http"),expect(o.host).to.be("::1"),expect(o.port).to.be("80"),expect(o.id).to.be("http://[::1]:80")})});