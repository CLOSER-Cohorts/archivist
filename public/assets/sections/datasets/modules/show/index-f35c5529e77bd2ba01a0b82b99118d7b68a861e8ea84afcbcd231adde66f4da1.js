(function(){angular.module("archivist.datasets.show",["ngVis","archivist.data_manager"]).controller("DatasetsShowController",["$scope","$routeParams","VisDataSet","DataManager",function(e,t,n,a){return e.dataset=a.getDataset(t.id,{variables:!0,questions:!0},function(){return e.breadcrumbs=[{label:"Datasets",link:"/datasets",active:!1},{label:e.dataset.name,link:!1,active:!0}]}),e.pageSize=20,e.clusterMenuOptions=[["Remove Topic",function(e){return console.log("Removing topic"),console.log(e)}]],e.graphData={},e.graphOptions={interaction:{dragNodes:!1},layout:{hierarchical:{enabled:!0,direction:"LR"}}},e.graphEvents={click:function(t){if(1===t.nodes.length)return t.nodes[0]<2e7?("CcQuestion",t.nodes[0]-1e7):("Variable",t.nodes[0]-2e7),e.current_cluster_selection=e.graphData.nodes.get(t.nodes[0]),console.log(e)}},e.loadNetworkData=function(t){var o,r;return e.current_cluster_selection={topic:{name:""}},r=new n,o=new n,e.cluster=a.getCluster("Variable",t.id,!0,function(){var t,n,a,l,s,i,c,u,d,g,p,h,b;for({},t=0,l=(u=e.cluster.strands).length;t<l;t++)for(n=0,s=(d=(h=u[t]).members).length;n<s;n++)if((c=d[n]).id+="Variable"===c.type?2e7:1e7,c.group="strand:"+h.id.toString(),c.borderWidth=null!=c.topic?3:1,c.color={border:h.good?"black":"red"},b="<span",h.good||(b+=' style="color: red;"'),b+=">"+c.text,null!=c.topic&&(b+="<br/>"+c.topic.name),b+="</span>",c.title=b,r.add(c),null!=c.sources)for(a=0,i=(g=c.sources).length;a<i;a++)p=g[a],o.add({from:c.id,to:p.id+("Variable"===p.type?2e7:1e7),dashes:!p.interstrand});return console.log(r)}),e.graphData={nodes:r,edges:o}},e.split_mapping=function(e,t,n,a){return null==n&&(n=null),null==a&&(a=null),e.$split_mapping({other:{"class":t["class"],id:t.id},x:n,y:a})},e.detectKey=function(e,t,n,a){var o;return null==n&&(n=null),null==a&&(a=null),13===e.keyCode&&(o=e.target.value.split(","),t.$add_mapping({sources:{id:o,x:n,y:a}})),console.log(t)},console.log(e)}])}).call(this);