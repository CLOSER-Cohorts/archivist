(function(){angular.module("archivist.datasets.index",["archivist.data_manager"]).controller("DatasetsIndexController",["$scope","$http","DataManager",function(t,e,a){return t.datasets=a.getDatasets(),t.pageSize=24,t.currentPage=1,t.filterStudy=function(e){return t.filteredStudy=e},e.get("/studies.json").success(function(e){return t.studies=e}),console.log(t)}])}).call(this),function(){angular.module("archivist.datasets.show",["ngVis","archivist.data_manager"]).controller("DatasetsShowController",["$scope","$routeParams","VisDataSet","DataManager",function(t,e,a,n){return t.dataset=n.getDataset(e.id,{variables:!0,questions:!0},function(){return t.breadcrumbs=[{label:"Datasets",link:"/datasets",active:!1},{label:t.dataset.name,link:!1,active:!0}]}),t.pageSize=20,t.clusterMenuOptions=[["Remove Topic",function(t){return console.log("Removing topic"),console.log(t)}]],t.graphData={},t.graphOptions={interaction:{dragNodes:!1},layout:{hierarchical:{enabled:!0,direction:"LR"}}},t.graphEvents={click:function(e){if(1===e.nodes.length)return e.nodes[0]<2e7?("CcQuestion",e.nodes[0]-1e7):("Variable",e.nodes[0]-2e7),t.current_cluster_selection=t.graphData.nodes.get(e.nodes[0]),console.log(t)}},t.loadNetworkData=function(e){var s,r;return t.current_cluster_selection={topic:{name:""}},r=new a,s=new a,t.cluster=n.getCluster("Variable",e.id,!0,function(){var e,a,n,o,l,i,c,u,d,g,p,h,f;for({},e=0,o=(u=t.cluster.strands).length;e<o;e++)for(a=0,l=(d=(h=u[e]).members).length;a<l;a++)if((c=d[a]).id+="Variable"===c.type?2e7:1e7,c.group="strand:"+h.id.toString(),c.borderWidth=null!=c.topic?3:1,c.color={border:h.good?"black":"red"},f="<span",h.good||(f+=' style="color: red;"'),f+=">"+c.text,null!=c.topic&&(f+="<br/>"+c.topic.name),f+="</span>",c.title=f,r.add(c),null!=c.sources)for(n=0,i=(g=c.sources).length;n<i;n++)p=g[n],s.add({from:c.id,to:p.id+("Variable"===p.type?2e7:1e7),dashes:!p.interstrand});return console.log(r)}),t.graphData={nodes:r,edges:s}},t.split_mapping=function(t,e,a,n){return null==a&&(a=null),null==n&&(n=null),t.$split_mapping({other:{"class":e["class"],id:e.id},x:a,y:n})},t.detectKey=function(t,e,a,n){var s;return null==a&&(a=null),null==n&&(n=null),13===t.keyCode&&(s=t.target.value.split(","),e.$add_mapping({sources:{id:s,x:a,y:n}})),console.log(e)},console.log(t)}])}.call(this),function(){angular.module("archivist.datasets.edit",["archivist.data_manager"]).controller("DatasetsEditController",["$http","$scope","$routeParams","$location","Flash","DataManager",function(t,e,a,n,s,r){return e.dataset=r.getDataset(a.id,{},function(){return e.page.title=e.dataset.name+" | Edit",e.breadcrumbs=[{label:"Datasets",link:"/datasets",active:!1},{label:e.dataset.name,link:"/datasets/"+e.dataset.id,active:!1},{label:"Edit",link:!1,active:!0}]}),t.get("/studies.json").success(function(t){return e.studies=t}),e.updateDataset=function(){return e.dataset.$save({},function(){return s.add("success","Dataset updated successfully!"),n.path("/datasets"),r.clearCache()},function(){return s.add("error","Dataset could not be updated.")})}}])}.call(this),function(){}.call(this);