(function(){angular.module("archivist.datasets",["templates","ngRoute","archivist.datasets.index","archivist.datasets.show","archivist.datasets.edit"]).config(["$routeProvider",function(t){return t.when("/datasets",{templateUrl:"partials/datasets/index.html",controller:"DatasetsIndexController"}).when("/datasets/:id",{templateUrl:"partials/datasets/show.html",controller:"DatasetsShowController"}).when("/datasets/:id/edit",{templateUrl:"partials/datasets/edit.html",controller:"DatasetsEditController"})}])}).call(this),function(){angular.module("archivist.datasets.index",["archivist.data_manager"]).controller("DatasetsIndexController",["$scope","$http","DataManager",function(t,e,a){return t.datasets=a.getDatasets(),t.pageSize=24,t.currentPage=1,t.filterStudy=function(e){return t.filteredStudy=e},e.get("/studies.json").success(function(e){return t.studies=e}),console.log(t)}])}.call(this),function(){angular.module("archivist.datasets.show",["ngVis","archivist.data_manager"]).controller("DatasetsShowController",["$scope","$routeParams","VisDataSet","DataManager",function(t,e,a,s){return t.dataset=s.getDataset(e.id,{variables:!0,questions:!0},function(){return t.breadcrumbs=[{label:"Datasets",link:"/datasets",active:!1},{label:t.dataset.name,link:!1,active:!0}]}),t.pageSize=20,t.clusterMenuOptions=[["Remove Topic",function(t){return console.log("Removing topic"),console.log(t)}]],t.graphData={},t.graphOptions={interaction:{dragNodes:!1},layout:{hierarchical:{enabled:!0,direction:"LR"}}},t.graphEvents={click:function(e){if(1===e.nodes.length)return e.nodes[0]<2e7?("CcQuestion",e.nodes[0]-1e7):("Variable",e.nodes[0]-2e7),t.current_cluster_selection=t.graphData.nodes.get(e.nodes[0]),console.log(t)}},t.loadNetworkData=function(e){var n,r;return t.current_cluster_selection={topic:{name:""}},r=new a,n=new a,t.cluster=s.getCluster("Variable",e.id,!0,function(){var e,a,s,l,o,i,d,c,u,g,p,h,f;for({},e=0,l=(c=t.cluster.strands).length;e<l;e++)for(a=0,o=(u=(h=c[e]).members).length;a<o;a++)if((d=u[a]).id+="Variable"===d.type?2e7:1e7,d.group="strand:"+h.id.toString(),d.borderWidth=null!=d.topic?3:1,d.color={border:h.good?"black":"red"},f="<span",h.good||(f+=' style="color: red;"'),f+=">"+d.text,null!=d.topic&&(f+="<br/>"+d.topic.name),f+="</span>",d.title=f,r.add(d),null!=d.sources)for(s=0,i=(g=d.sources).length;s<i;s++)p=g[s],n.add({from:d.id,to:p.id+("Variable"===p.type?2e7:1e7),dashes:!p.interstrand});return console.log(r)}),t.graphData={nodes:r,edges:n}},t.split_mapping=function(t,e,a,s){return null==a&&(a=null),null==s&&(s=null),t.$split_mapping({other:{"class":e["class"],id:e.id},x:a,y:s})},t.detectKey=function(t,e,a,s){var n;return null==a&&(a=null),null==s&&(s=null),13===t.keyCode&&(n=t.target.value.split(","),e.$add_mapping({sources:{id:n,x:a,y:s}})),console.log(e)},console.log(t)}])}.call(this),function(){angular.module("archivist.datasets.edit",["archivist.data_manager"]).controller("DatasetsEditController",["$http","$scope","$routeParams","$location","Flash","DataManager",function(t,e,a,s,n,r){return e.dataset=r.getDataset(a.id,{},function(){return e.page.title=e.dataset.name+" | Edit",e.breadcrumbs=[{label:"Datasets",link:"/datasets",active:!1},{label:e.dataset.name,link:"/datasets/"+e.dataset.id,active:!1},{label:"Edit",link:!1,active:!0}]}),t.get("/studies.json").success(function(t){return e.studies=t}),e.updateDataset=function(){return e.dataset.$save({},function(){return n.add("success","Dataset updated successfully!"),s.path("/datasets"),r.clearCache()},function(){return n.add("error","Dataset could not be updated.")})}}])}.call(this),function(){}.call(this);