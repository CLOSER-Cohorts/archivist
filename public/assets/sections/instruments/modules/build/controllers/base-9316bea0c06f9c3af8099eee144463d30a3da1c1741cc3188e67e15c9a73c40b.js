(function(){angular.module("archivist.build").controller("BaseBuildController",["$scope","$routeParams","$location","$timeout","Flash","DataManager","RealTimeListener","RealTimeLocking",function(e,t,n,r,l,i,u,a){return e.page.title=e.title,e.underscored=e.title.toLowerCase().replaceAll(" ","_"),e.main_panel="partials/build/"+e.underscored+".html",e.url_path_args=n.path().split("/"),e.newMode="new"===e.url_path_args.slice(0).pop(),"function"==typeof e.before_instrument_loaded&&e.before_instrument_loaded(),e.instrument=i.getInstrument(t.id,e.instrument_options,function(){return e.page.title=e.instrument.prefix+" | "+e.title,e.reset(),e.breadcrumbs=[{label:"Instruments",link:"/instruments",active:!1},{label:e.instrument.prefix,link:"/instruments/"+e.instrument.id.toString(),active:!1},{label:"Build",link:"/instruments/"+e.instrument.id.toString()+"/build",active:!1},{label:e.title,link:!1,active:!0}],r(function(){return jQuery(".first-field").first().focus()},0),"function"==typeof e.after_instrument_loaded&&e.after_instrument_loaded(),console.log(e)}),null==e.cancel&&(e.cancel=function(){return console.log("cancel called"),e.newMode?e.editMode=e.newMode=!1:e.reset(),null}),null==e.edit_path&&(e.edit_path=function(t){var n;return n=["instruments",e.instrument.id,"build"],e.extra_url_parameters&&(n=n.concat(e.extra_url_parameters)),null!=t&&(null!=t.type&&n.push(t.type.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")+"s"),n.push(t.id)),n.join("/")}),null==e.startEditMode&&(e.startEditMode=function(){return e.editMode=!0,console.log(e.current),a.lock({type:e.current.type,id:e.current.id}),null}),null==e.change_panel&&(e.change_panel=function(t){return localStorage.setItem("sidebar_scroll",jQuery(".sidebar").scrollTop()),n.url(e.edit_path(t))}),e.listener=u(function(){if(!e.editMode)return e.reset()})}])}).call(this);