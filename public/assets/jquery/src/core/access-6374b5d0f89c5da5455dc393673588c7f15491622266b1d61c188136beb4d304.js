define(["../core","../core/toType","../var/isFunction"],function(n,e,l){"use strict";var r=function(c,t,i,u,o,f,a){var s=0,d=c.length,v=null==i;if("object"===e(i))for(s in o=!0,i)r(c,t,s,i[s],!0,f,a);else if(u!==undefined&&(o=!0,l(u)||(a=!0),v&&(a?(t.call(c,u),t=null):(v=t,t=function(e,l,r){return v.call(n(e),r)})),t))for(;s<d;s++)t(c[s],i,a?u:u.call(c[s],s,t(c[s],i)));return o?c:v?t.call(c):d?t(c[0],i):f};return r});