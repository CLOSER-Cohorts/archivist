define(["./core","./var/document","./var/isFunction","./var/rnothtmlwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseXML","./event/trigger","./deferred","./serialize"],function(e,t,a,r,n,o,s){"use strict";function i(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var o,s=0,i=t.toLowerCase().match(r)||[];if(a(n))for(;o=i[s++];)"+"===o[0]?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(n)):(e[o]=e[o]||[]).push(n)}}function c(t,a,r,n){function o(c){var d;return s[c]=!0,e.each(t[c]||[],function(e,t){var c=t(a,r,n);return"string"!=typeof c||i||s[c]?i?!(d=c):void 0:(a.dataTypes.unshift(c),o(c),!1)}),d}var s={},i=t===j;return o(a.dataTypes[0])||!s["*"]&&o("*")}function d(t,a){var r,n,o=e.ajaxSettings.flatOptions||{};for(r in a)a[r]!==undefined&&((o[r]?t:n||(n={}))[r]=a[r]);return n&&e.extend(!0,t,n),t}function f(e,t,a){for(var r,n,o,s,i=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(n in i)if(i[n]&&i[n].test(r)){c.unshift(n);break}if(c[0]in a)o=c[0];else{for(n in a){if(!c[0]||e.converters[n+" "+c[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),a[o]}function u(e,t,a,r){var n,o,s,i,c,d={},f=e.dataTypes.slice();if(f[1])for(s in e.converters)d[s.toLowerCase()]=e.converters[s];for(o=f.shift();o;)if(e.responseFields[o]&&(a[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=f.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=d[c+" "+o]||d["* "+o]))for(n in d)if((i=n.split(" "))[1]===o&&(s=d[c+" "+i[0]]||d["* "+i[0]])){!0===s?s=d[n]:!0!==d[n]&&(o=i[0],f.unshift(i[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}var p=/%20/g,l=/#.*$/,h=/([?&])_=[^&]*/,x=/^(.*?):[ \t]*([^\r\n]*)$/gm,y=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,m=/^(?:GET|HEAD)$/,g=/^\/\//,v={},j={},T="*/".concat("*"),w=t.createElement("a");return w.href=n.href,e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:n.href,type:"GET",isLocal:y.test(n.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":T,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,a){return a?d(d(t,e.ajaxSettings),a):d(e.ajaxSettings,t)},ajaxPrefilter:i(v),ajaxTransport:i(j),ajax:function(a,i){function d(t,a,r,n){var o,s,i,c,d,p=a;L||(L=!0,H&&window.clearTimeout(H),y=undefined,S=n||"",X.readyState=t>0?4:0,o=t>=200&&t<300||304===t,r&&(c=f(E,X,r)),c=u(E,c,X,o),o?(E.ifModified&&((d=X.getResponseHeader("Last-Modified"))&&(e.lastModified[b]=d),(d=X.getResponseHeader("etag"))&&(e.etag[b]=d)),204===t||"HEAD"===E.type?p="nocontent":304===t?p="notmodified":(p=c.state,s=c.data,o=!(i=c.error))):(i=p,!t&&p||(p="error",t<0&&(t=0))),X.status=t,X.statusText=(a||p)+"",o?N.resolveWith(F,[s,p,X]):N.rejectWith(F,[X,p,i]),X.statusCode(k),k=undefined,R&&O.trigger(o?"ajaxSuccess":"ajaxError",[X,E,o?s:i]),$.fireWith(F,[X,p]),R&&(O.trigger("ajaxComplete",[X,E]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof a&&(i=a,a=undefined),i=i||{};var y,b,S,C,H,M,L,R,D,q,E=e.ajaxSetup({},i),F=E.context||E,O=E.context&&(F.nodeType||F.jquery)?e(F):e.event,N=e.Deferred(),$=e.Callbacks("once memory"),k=E.statusCode||{},A={},J={},W="canceled",X={readyState:0,getResponseHeader:function(e){var t;if(L){if(!C)for(C={};t=x.exec(S);)C[t[1].toLowerCase()]=t[2];t=C[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return L?S:null},setRequestHeader:function(e,t){return null==L&&(e=J[e.toLowerCase()]=J[e.toLowerCase()]||e,A[e]=t),this},overrideMimeType:function(e){return null==L&&(E.mimeType=e),this},statusCode:function(e){var t;if(e)if(L)X.always(e[X.status]);else for(t in e)k[t]=[k[t],e[t]];return this},abort:function(e){var t=e||W;return y&&y.abort(t),d(0,t),this}};if(N.promise(X),E.url=((a||E.url||n.href)+"").replace(g,n.protocol+"//"),E.type=i.method||i.type||E.method||E.type,E.dataTypes=(E.dataType||"*").toLowerCase().match(r)||[""],null==E.crossDomain){M=t.createElement("a");try{M.href=E.url,M.href=M.href,E.crossDomain=w.protocol+"//"+w.host!=M.protocol+"//"+M.host}catch(G){E.crossDomain=!0}}if(E.data&&E.processData&&"string"!=typeof E.data&&(E.data=e.param(E.data,E.traditional)),c(v,E,i,X),L)return X;for(D in(R=e.event&&E.global)&&0==e.active++&&e.event.trigger("ajaxStart"),E.type=E.type.toUpperCase(),E.hasContent=!m.test(E.type),b=E.url.replace(l,""),E.hasContent?E.data&&E.processData&&0===(E.contentType||"").indexOf("application/x-www-form-urlencoded")&&(E.data=E.data.replace(p,"+")):(q=E.url.slice(b.length),E.data&&(E.processData||"string"==typeof E.data)&&(b+=(s.test(b)?"&":"?")+E.data,delete E.data),!1===E.cache&&(b=b.replace(h,"$1"),q=(s.test(b)?"&":"?")+"_="+o+++q),E.url=b+q),E.ifModified&&(e.lastModified[b]&&X.setRequestHeader("If-Modified-Since",e.lastModified[b]),e.etag[b]&&X.setRequestHeader("If-None-Match",e.etag[b])),(E.data&&E.hasContent&&!1!==E.contentType||i.contentType)&&X.setRequestHeader("Content-Type",E.contentType),X.setRequestHeader("Accept",E.dataTypes[0]&&E.accepts[E.dataTypes[0]]?E.accepts[E.dataTypes[0]]+("*"!==E.dataTypes[0]?", "+T+"; q=0.01":""):E.accepts["*"]),E.headers)X.setRequestHeader(D,E.headers[D]);if(E.beforeSend&&(!1===E.beforeSend.call(F,X,E)||L))return X.abort();if(W="abort",$.add(E.complete),X.done(E.success),X.fail(E.error),y=c(j,E,i,X)){if(X.readyState=1,R&&O.trigger("ajaxSend",[X,E]),L)return X;E.async&&E.timeout>0&&(H=window.setTimeout(function(){X.abort("timeout")},E.timeout));try{L=!1,y.send(A,d)}catch(G){if(L)throw G;d(-1,G)}}else d(-1,"No Transport");return X},getJSON:function(t,a,r){return e.get(t,a,r,"json")},getScript:function(t,a){return e.get(t,undefined,a,"script")}}),e.each(["get","post"],function(t,r){e[r]=function(t,n,o,s){return a(n)&&(s=s||o,o=n,n=undefined),e.ajax(e.extend({url:t,type:r,dataType:s,data:n,success:o},e.isPlainObject(t)&&t))}}),e});