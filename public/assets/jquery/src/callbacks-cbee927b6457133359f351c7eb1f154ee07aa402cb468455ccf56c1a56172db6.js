define(["./core","./core/toType","./var/isFunction","./var/rnothtmlwhite"],function(n,t,r,e){"use strict";function i(t){var r={};return n.each(t.match(e)||[],function(n,t){r[t]=!0}),r}return n.Callbacks=function(e){e="string"==typeof e?i(e):n.extend({},e);var u,c,o,f,h=[],s=[],a=-1,l=function(){for(f=f||e.once,o=u=!0;s.length;a=-1)for(c=s.shift();++a<h.length;)!1===h[a].apply(c[0],c[1])&&e.stopOnFalse&&(a=h.length,c=!1);e.memory||(c=!1),u=!1,f&&(h=c?[]:"")},p={add:function(){return h&&(c&&!u&&(a=h.length-1,s.push(c)),function i(u){n.each(u,function(n,u){r(u)?e.unique&&p.has(u)||h.push(u):u&&u.length&&"string"!==t(u)&&i(u)})}(arguments),c&&!u&&l()),this},remove:function(){return n.each(arguments,function(t,r){for(var e;(e=n.inArray(r,h,e))>-1;)h.splice(e,1),e<=a&&a--}),this},has:function(t){return t?n.inArray(t,h)>-1:h.length>0},empty:function(){return h&&(h=[]),this},disable:function(){return f=s=[],h=c="",this},disabled:function(){return!h},lock:function(){return f=s=[],c||u||(h=c=""),this},locked:function(){return!!f},fireWith:function(n,t){return f||(t=[n,(t=t||[]).slice?t.slice():t],s.push(t),u||l()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!o}};return p},n});