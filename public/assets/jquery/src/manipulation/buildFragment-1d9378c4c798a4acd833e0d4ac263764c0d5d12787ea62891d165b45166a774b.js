define(["../core","../core/toType","./var/rtagName","./var/rscriptType","./wrapMap","./getAll","./setGlobalEval"],function(e,t,r,n,i,o,a){"use strict";function l(l,c,f,p,d){for(var u,h,m,C,g,v,y=c.createDocumentFragment(),T=[],w=0,x=l.length;w<x;w++)if((u=l[w])||0===u)if("object"===t(u))e.merge(T,u.nodeType?[u]:u);else if(s.test(u)){for(h=h||y.appendChild(c.createElement("div")),m=(r.exec(u)||["",""])[1].toLowerCase(),C=i[m]||i._default,h.innerHTML=C[1]+e.htmlPrefilter(u)+C[2],v=C[0];v--;)h=h.lastChild;e.merge(T,h.childNodes),(h=y.firstChild).textContent=""}else T.push(c.createTextNode(u));for(y.textContent="",w=0;u=T[w++];)if(p&&e.inArray(u,p)>-1)d&&d.push(u);else if(g=e.contains(u.ownerDocument,u),h=o(y.appendChild(u),"script"),g&&a(h),f)for(v=0;u=h[v++];)n.test(u.type||"")&&f.push(u);return y}var s=/<|&#?\w+;/;return l});