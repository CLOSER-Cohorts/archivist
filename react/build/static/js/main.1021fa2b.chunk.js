(this["webpackJsonpheyslate-react"]=this["webpackJsonpheyslate-react"]||[]).push([[0],{272:function(e,t,a){e.exports=a(350)},350:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),s=a.n(l),i=a(8),c=a(20),o=a(38),m=a(11),d={login:"/login",datasets:Object(m.include)("/datasets",{all:""}),admin:Object(m.include)("/admin/",{import:"import",imports:Object(m.include)("imports/",{all:"",show:":importId"}),instruments:Object(m.include)("instruments/",{all:"",importMappings:":instrumentId/imports"}),datasets:Object(m.include)("datasets/",{all:"",importMappings:":datasetId/imports"})}),instruments:Object(m.include)("/instruments",{all:"",instrument:Object(m.include)(":instrument_id/",{show:"",map:Object(m.include)("map/",{show:""}),build:Object(m.include)("build/",{show:"",constructs:Object(m.include)("constructs/",{show:""}),codeLists:Object(m.include)("code_lists/",{all:"",show:":codeListId",new:"new"}),questionItems:Object(m.include)("question_items/",{all:"",show:":questionItemId",new:"new"}),questionGrids:Object(m.include)("question_grids/",{all:"",show:":questionGridId",new:"new"}),responseDomains:Object(m.include)("response_domains/",{all:"",new:"new",show:":responseDomainType/:responseDomainId"})})})})};var u=e=>{const t=Object(i.c)(e=>e.auth.isAuthUser),a=e.type;return"guest"===a&&t?r.a.createElement(o.a,{to:Object(m.reverse)(d.instruments.all)}):"private"!==a||t?r.a.createElement(o.b,e):r.a.createElement(o.a,{to:Object(m.reverse)(d.login)})},p=a(21),b=a(427),E=a(359),O=a(397),j=a(398),y=a(243),h=a.n(y),g=a(126),v=a(394),I=a(396),_=a(6),S=a(15),D=a.n(S);const N="https://closer-react.herokuapp.com",T=()=>({Authorization:"Bearer "+window.localStorage.getItem("jwt"),"Content-Type":"application/json"});D.a.interceptors.response.use((function(e){return e}),(function(e){if(401!==e.response.status)return Promise.reject(e);window.localStorage.removeItem("jwt"),window.location="/login"}));const f=()=>{const e=D.a.get(N+"/datasets.json",{headers:T()});return t=>e.then(e=>{t(Le(e.data))}).catch(e=>{t(Ve(e.message))})},w=e=>{const t=D.a.get(N+"/datasets/"+e+".json?questions=true",{headers:T()});return e=>t.then(t=>{e(Ae(t.data))}).catch(t=>{e(Ve(t.message))})},C=e=>{let t=new FormData;t.append("files[]",e.files[0]);const a=D.a.post(N+"/admin/import/instruments/",t,{headers:Object(_.a)(Object(_.a)({},T()),{"Content-Type":"multipart/form-data"})});return e=>(e(se("new","AdminInstrument")),a.then(t=>{e(ie("new","AdminInstrument"))}).catch(e=>{console.log("error")}))},x=e=>{let t=new FormData;t.append("files[]",e.files[0]);const a=D.a.post(N+"/admin/import/datasets/",t,{headers:Object(_.a)(Object(_.a)({},T()),{"Content-Type":"multipart/form-data"})});return e=>(e(se("new","AdminDataset")),a.then(t=>{e(ie("new","AdminDataset"))}).catch(e=>{console.log("error")}))},q=(e,t,a)=>{let n=new FormData;n.append("files[]",a.files[0]);const r=D.a.post(N+"/"+e+"/"+t+"/imports.json",n,{headers:Object(_.a)(Object(_.a)({},T()),{"Content-Type":"multipart/form-data"})});return e=>(e(se("new","AdminImportMappings")),r.then(t=>{e(ie("new","AdminImportMappings"))}).catch(e=>{console.log("error")}))},R=(e,t)=>{const a=D.a.get(N+"/"+e+"/"+t+"/imports.json",{headers:T()});return e=>a.then(t=>{e(Me(t.data))}).catch(t=>{e(Ve(t.message))})},L=()=>{const e=D.a.get(N+"/imports.json",{headers:T()});return t=>e.then(e=>{t(Me(e.data))}).catch(e=>{t(Ve(e.message))})},A=e=>{const t=D.a.get(N+"/imports/"+e+".json",{headers:T()});return e=>t.then(t=>{e(Pe(t.data))}).catch(t=>{e(Ve(t.message))})},M=()=>{const e=D.a.get(N+"/instruments.json",{headers:T()});return t=>e.then(e=>{t(ke(e.data))}).catch(e=>{t(Ve(e.message))})},P=e=>{const t=D.a.get(N+"/instruments/"+e+".json",{headers:T()});return e=>t.then(t=>{e(Qe(t.data))}).catch(t=>{e(Ve(t.message))})},k=e=>{const t=D.a.get(N+"/instruments/"+e+"/stats.json",{headers:T()});return a=>t.then(t=>{a(Ue(e,t.data))}).catch(e=>{a(Ve(e.message))})},Q=(e,t)=>{const a=D.a.post(N+"/instruments/"+e+"/reorder_ccs.json",{updates:t},{headers:T()});return e=>a.then(e=>{console.log("ok")}).catch(e=>{console.log("error")})},U=e=>{const t=D.a.get(N+"/instruments/"+e+"/categories.json",{headers:T()});return a=>t.then(t=>{a(z(e,t.data))}).catch(e=>{a(Ve(e.message))})},z=(e,t)=>({type:"LOAD_INSTRUMENT_CATEGORIES",payload:{instrumentId:e,categories:t}}),V={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/code_lists.json",{headers:T()});return a=>t.then(t=>{a(G(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/code_lists/"+t+".json",a,{headers:T()});return a=>(a(se(t,"CodeList")),n.then(n=>{a(ie(t,"CodeList")),a(W(e,n.data))}).catch(e=>{a(Ge(t,"CodeList",e.response.data.error_sentence))}))},create:(e,t)=>{const a=D.a.post(N+"/instruments/"+e+"/code_lists.json",t,{headers:T()});return t=>(t(se("new","CodeList")),a.then(a=>{t(ie("new","CodeList")),t(W(e,a.data)),t(Fe(Object(m.reverse)(d.instruments.instrument.build.codeLists.show,{instrument_id:e,codeListId:a.data.id})))}).catch(e=>{t(Ge("new","CodeList",e.response.data.error_sentence))}))},delete:(e,t)=>{const a=D.a.delete(N+"/instruments/"+e+"/code_lists/"+t+".json",{headers:T()});return n=>a.then(a=>{n(ze(e,"CodeList",t)),n(Fe(Object(m.reverse)(d.instruments.instrument.build.codeLists.all,{instrument_id:e})))}).catch(e=>{n(ie(t,"CodeList")),n(Ge(t,"CodeList",e.response.data.error_sentence))})}},G=(e,t)=>({type:"LOAD_INSTRUMENT_CODE_LISTS",payload:{instrumentId:e,codeLists:t}}),W=(e,t)=>({type:"LOAD_INSTRUMENT_CODE_LIST",payload:{instrumentId:e,codeList:t}}),B={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/cc_sequences.json",{headers:T()});return a=>t.then(t=>{a(F(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/cc_sequences/"+t+".json",a,{headers:T()});return a=>(a(se(t,"CcSequence")),n.then(n=>{a(ie(t,"CcSequence")),a(Y(e,n.data))}).catch(e=>{a(Ge(t,"CcSequence",e.response.data))}))},create:(e,t,a=(e=>{}))=>{const n=D.a.post(N+"/instruments/"+e+"/cc_sequences.json",t,{headers:T()});return t=>(t(se("new","CcSequence")),n.then(n=>{t(ie("new","CcSequence")),t(Y(e,n.data)),a({id:n.data.id})}).catch(e=>{t(Ge("new","CcSequence",e.response.data))}))},delete:(e,t,a=(()=>{}))=>{const n=D.a.delete(N+"/instruments/"+e+"/cc_sequences/"+t+".json",{headers:T()});return r=>(r(se(t,"CcSequence")),n.then(n=>{r(ie(t,"CcSequence")),r(ze(e,"CcSequence",t)),a()}).catch(e=>{r(Ge(t,"CcSequence",e.response.data))}))}},F=(e,t)=>({type:"LOAD_INSTRUMENT_SEQUENCES",payload:{instrumentId:e,sequences:t}}),Y=(e,t)=>({type:"LOAD_INSTRUMENT_SEQUENCE",payload:{instrumentId:e,sequence:t}}),H={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/cc_statements.json",{headers:T()});return a=>t.then(t=>{a(J(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/cc_statements/"+t+".json",a,{headers:T()});return a=>(a(se(t,"CcStatement")),n.then(n=>{a(ie(t,"CcStatement")),a(X(e,n.data))}).catch(e=>{a(Ge(t,"CcStatement",e.response.data))}))},create:(e,t,a=(e=>{}))=>{const n=D.a.post(N+"/instruments/"+e+"/cc_statements.json",t,{headers:T()});return t=>(t(se("new","CcStatement")),n.then(n=>{t(ie("new","CcStatement")),t(X(e,n.data)),a({id:n.data.id})}).catch(e=>{t(Ge("new","CcStatement",e.response.data))}))},delete:(e,t,a=(()=>{}))=>{const n=D.a.delete(N+"/instruments/"+e+"/cc_statements/"+t+".json",{headers:T()});return r=>(r(se(t,"CcStatement")),n.then(n=>{r(ie(t,"CcStatement")),r(ze(e,"CcStatement",t)),a()}).catch(e=>{r(Ge(t,"CcStatement",e.response.data))}))}},J=(e,t)=>({type:"LOAD_INSTRUMENT_STATEMENTS",payload:{instrumentId:e,statements:t}}),X=(e,t)=>({type:"LOAD_INSTRUMENT_STATEMENT",payload:{instrumentId:e,statement:t}}),K={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/cc_loops.json",{headers:T()});return a=>t.then(t=>{a($(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/cc_loops/"+t+".json",a,{headers:T()});return a=>(a(se(t,"CcLoop")),n.then(n=>{a(ie(t,"CcLoop")),a(Z(e,n.data))}).catch(e=>{a(Ge(t,"CcLoop",e.response.data.error_sentence))}))},create:(e,t,a=(e=>{}))=>{const n=D.a.post(N+"/instruments/"+e+"/cc_loops.json",t,{headers:T()});return t=>(t(se("new","CcLoop")),n.then(n=>{t(ie("new","CcLoop")),t(Z(e,n.data)),a({id:n.data.id})}).catch(e=>{t(Ge("new","CcLoop",e.response.data.error_sentence))}))},delete:(e,t,a=(()=>{}))=>{const n=D.a.delete(N+"/instruments/"+e+"/cc_loops/"+t+".json",{headers:T()});return r=>(r(se(t,"CcLoop")),n.then(n=>{r(ie(t,"CcLoop")),r(ze(e,"CcLoop",t)),a()}).catch(e=>{r(Ge(t,"CcLoop",e.response.data.error_sentence))}))}},$=(e,t)=>({type:"LOAD_INSTRUMENT_LOOPS",payload:{instrumentId:e,loops:t}}),Z=(e,t)=>({type:"LOAD_INSTRUMENT_LOOP",payload:{instrumentId:e,loop:t}}),ee=e=>{const t=D.a.get(N+"/instruments/"+e+"/response_units.json",{headers:T()});return a=>t.then(t=>{a(te(e,t.data))}).catch(e=>{a(Ve(e.message))})},te=(e,t)=>({type:"LOAD_INSTRUMENT_RESPONSE_UNITS",payload:{instrumentId:e,responseUnits:t}}),ae={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/cc_conditions.json",{headers:T()});return a=>t.then(t=>{a(ne(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/cc_conditions/"+t+".json",a,{headers:T()});return a=>(a(se(t,"CcCondition")),n.then(n=>{a(ie(t,"CcCondition")),a(re(e,n.data))}).catch(e=>{a(Ge(t,"CcCondition",e.response.data))}))},create:(e,t,a=(e=>{}))=>{const n=D.a.post(N+"/instruments/"+e+"/cc_conditions.json",t,{headers:T()});return t=>(t(se("new","CcCondition")),n.then(n=>{t(ie("new","CcCondition")),t(re(e,n.data)),a({id:n.data.id})}).catch(e=>{t(Ge("new","CcCondition",e.response.data))}))},delete:(e,t,a=(()=>{}))=>{const n=D.a.delete(N+"/instruments/"+e+"/cc_conditions/"+t+".json",{headers:T()});return r=>(r(se(t,"CcCondition")),n.then(n=>{r(ie(t,"CcCondition")),r(ze(e,"CcCondition",t)),a()}).catch(e=>{r(Ge(t,"CcCondition",e.response.data))}))}},ne=(e,t)=>({type:"LOAD_INSTRUMENT_CONDITIONS",payload:{instrumentId:e,conditions:t}}),re=(e,t)=>({type:"LOAD_INSTRUMENT_CONDITION",payload:{instrumentId:e,condition:t}}),le={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/cc_questions.json",{headers:T()});return a=>t.then(t=>{a(ce(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/cc_questions/"+t+".json",a,{headers:T()});return a=>(a(se(t,"CcQuestion")),n.then(n=>{a(ie(t,"CcQuestion")),a(oe(e,n.data))}).catch(e=>{a(Ge(t,"CcQuestion",e.response.data))}))},create:(e,t,a=(e=>{}))=>{const n=D.a.post(N+"/instruments/"+e+"/cc_questions.json",t,{headers:T()});return t=>(t(se("new","CcQuestion")),n.then(n=>{t(ie("new","CcQuestion")),t(oe(e,n.data)),a({id:n.data.id})}).catch(e=>{t(Ge("new","CcQuestion",e.response.data))}))},delete:(e,t,a=(()=>{}))=>{const n=D.a.delete(N+"/instruments/"+e+"/cc_questions/"+t+".json",{headers:T()});return r=>(r(se(t,"CcQuestion")),n.then(n=>{r(ie(t,"CcQuestion")),r(ze(e,"CcQuestion",t)),a()}).catch(e=>{r(Ge(t,"CcQuestion",e.response.data))}))},topic:{set:(e,t,a)=>{const n=D.a.post(N+"/instruments/"+e+"/cc_questions/"+t+"/set_topic.json",{topic_id:a},{headers:T()});return a=>(a(se(t,"CcQuestion")),n.then(n=>{a(ie(t,"CcQuestion")),a(oe(e,n.data))}).catch(e=>{a(Ge(t,"CcQuestion",e.response.data.message))}))}},variables:{add:(e,t,a)=>{const n=D.a.post(N+"/instruments/"+e+"/cc_questions/"+t+"/add_variables.json",{variable_names:a},{headers:T()});return a=>(a(se(t,"CcQuestion")),n.then(n=>{a(ie(t,"CcQuestion")),a(oe(e,n.data))}).catch(e=>{a(Ge(t,"CcQuestion",e.response.data.message))}))},remove:(e,t,a)=>{const n=D.a.post(N+"/instruments/"+e+"/cc_questions/"+t+"/remove_variable.json",{variable_id:a},{headers:T()});return a=>(a(se(t,"CcQuestion")),n.then(n=>{a(ie(t,"CcQuestion")),a(oe(e,n.data))}).catch(e=>{a(Ge(t,"CcQuestion",e.message))}))}}},se=(e,t)=>({type:"SAVING",payload:{id:e,type:t}}),ie=(e,t)=>({type:"SAVED",payload:{id:e,type:t}}),ce=(e,t)=>({type:"LOAD_INSTRUMENT_QUESTIONS",payload:{instrumentId:e,questions:t}}),oe=(e,t)=>({type:"LOAD_INSTRUMENT_QUESTION",payload:{instrumentId:e,question:t}}),me={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/question_items.json",{headers:T()});return a=>t.then(t=>{a(de(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/question_items/"+t+".json",a,{headers:T()});return a=>(a(se(t,"QuestionItem")),n.then(n=>{a(ie(t,"QuestionItem")),a(ue(e,n.data))}).catch(e=>{a(Ge(t,"QuestionItem",e.response.data.error_sentence))}))},create:(e,t)=>{const a=D.a.post(N+"/instruments/"+e+"/question_items.json",t,{headers:T()});return t=>(t(se("new","QuestionItem")),a.then(a=>{t(ie("new","QuestionItem")),t(ue(e,a.data)),t(Fe(Object(m.reverse)(d.instruments.instrument.build.questionItems.show,{instrument_id:e,questionItemId:a.data.id})))}).catch(e=>{t(Ge("new","QuestionItem",e.response.data.error_sentence))}))},delete:(e,t)=>{const a=D.a.delete(N+"/instruments/"+e+"/question_items/"+t+".json",{headers:T()});return n=>(n(se(t,"QuestionItem")),a.then(a=>{n(ie(t,"QuestionItem")),n(ze(e,"QuestionItem",t)),n(Fe(Object(m.reverse)(d.instruments.instrument.build.questionItems.all,{instrument_id:e})))}).catch(e=>{n(Ge(t,"QuestionItem",e.response.data.error_sentence))}))}},de=(e,t)=>({type:"LOAD_INSTRUMENT_QUESTION_ITEMS",payload:{instrumentId:e,questions:t}}),ue=(e,t)=>({type:"LOAD_INSTRUMENT_QUESTION_ITEM",payload:{instrumentId:e,questionItem:t}}),pe={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/question_grids.json",{headers:T()});return a=>t.then(t=>{a(be(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/question_grids/"+t+".json",a,{headers:T()});return a=>(a(se(t,"QuestionGrid")),n.then(n=>{a(ie(t,"QuestionGrid")),a(Ee(e,n.data))}).catch(e=>{a(Ge(t,"QuestionGrid",e.response.data.error_sentence))}))},create:(e,t)=>{const a=D.a.post(N+"/instruments/"+e+"/question_grids.json",t,{headers:T()});return t=>(t(se("new","QuestionGrid")),a.then(a=>{t(ie("new","QuestionGrid")),t(Ee(e,a.data)),t(Fe(Object(m.reverse)(d.instruments.instrument.build.questionGrids.show,{instrument_id:e,questionGridId:a.data.id})))}).catch(e=>{t(Ge("new","QuestionGrid",e.response.data.error_sentence))}))},delete:(e,t)=>{const a=D.a.delete(N+"/instruments/"+e+"/question_grids/"+t+".json",{headers:T()});return n=>(n(se(t,"QuestionGrid")),a.then(a=>{n(ie(t,"QuestionGrid")),n(ze(e,"QuestionGrid",t)),n(Fe(Object(m.reverse)(d.instruments.instrument.build.questionGrids.all,{instrument_id:e})))}).catch(e=>{n(Ge(t,"QuestionGrid",e.response.data.error_sentence))}))}},be=(e,t)=>({type:"LOAD_INSTRUMENT_QUESTION_GRIDS",payload:{instrumentId:e,questions:t}}),Ee=(e,t)=>({type:"LOAD_INSTRUMENT_QUESTION_GRID",payload:{instrumentId:e,questionGrid:t}}),Oe={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/response_domain_numerics.json",{headers:T()});return a=>t.then(t=>{a(je(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/response_domain_numerics/"+t+".json",a,{headers:T()});return a=>(a(se(t,"ResponseDomainNumeric")),n.then(n=>{a(ie(t,"ResponseDomainNumeric")),a(ye(e,n.data))}).catch(e=>{a(Ge(t,"ResponseDomainNumeric",e.response.data.error_sentence))}))},create:(e,t)=>{const a=D.a.post(N+"/instruments/"+e+"/response_domain_numerics.json",t,{headers:T()});return t=>(t(se("new","ResponseDomainNumeric")),a.then(a=>{t(ie("new","ResponseDomainNumeric")),t(ye(e,a.data)),t(Fe(Object(m.reverse)(d.instruments.instrument.build.responseDomains.show,{instrument_id:e,responseDomainType:a.data.type,responseDomainId:a.data.id})))}).catch(e=>{t(Ge("new","ResponseDomainNumeric",e.response.data.error_sentence))}))},delete:(e,t)=>{const a=D.a.delete(N+"/instruments/"+e+"/response_domain_numerics/"+t+".json",{headers:T()});return n=>(n(se(t,"ResponseDomainNumeric")),a.then(a=>{n(ie(t,"ResponseDomainNumeric")),n(ze(e,"ResponseDomainNumeric",t)),n(Fe(Object(m.reverse)(d.instruments.instrument.build.responseDomains.all,{instrument_id:e})))}).catch(e=>{n(Ge(t,"ResponseDomainNumeric",e.response.data.error_sentence))}))}},je=(e,t)=>({type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_NUMERICS",payload:{instrumentId:e,responseDomainNumerics:t}}),ye=(e,t)=>({type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_NUMERIC",payload:{instrumentId:e,responseDomainNumeric:t}}),he={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/response_domain_texts.json",{headers:T()});return a=>t.then(t=>{a(ge(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/response_domain_texts/"+t+".json",a,{headers:T()});return a=>(a(se(t,"ResponseDomainText")),n.then(n=>{a(ie(t,"ResponseDomainText")),a(ve(e,n.data))}).catch(e=>{a(Ge(t,"ResponseDomainText",e.response.data.error_sentence))}))},create:(e,t)=>{const a=D.a.post(N+"/instruments/"+e+"/response_domain_texts.json",t,{headers:T()});return t=>(t(se("new","ResponseDomainText")),a.then(a=>{t(ie("new","ResponseDomainText")),t(ve(e,a.data)),t(Fe(Object(m.reverse)(d.instruments.instrument.build.responseDomains.show,{instrument_id:e,responseDomainType:a.data.type,responseDomainId:a.data.id})))}).catch(e=>{t(Ge("new","ResponseDomainText",e.response.data.error_sentence))}))},delete:(e,t)=>{const a=D.a.delete(N+"/instruments/"+e+"/response_domain_texts/"+t+".json",{headers:T()});return n=>(n(se(t,"ResponseDomainText")),a.then(a=>{n(ie(t,"ResponseDomainText")),n(ze(e,"ResponseDomainText",t)),n(Fe(Object(m.reverse)(d.instruments.instrument.build.responseDomains.all,{instrument_id:e})))}).catch(e=>{n(Ge(t,"ResponseDomainText",e.response.data.error_sentence))}))}},ge=(e,t)=>({type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_TEXTS",payload:{instrumentId:e,responseDomainTexts:t}}),ve=(e,t)=>({type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_TEXT",payload:{instrumentId:e,responseDomainText:t}}),Ie={all:e=>{const t=D.a.get(N+"/instruments/"+e+"/response_domain_datetimes.json",{headers:T()});return a=>t.then(t=>{a(_e(e,t.data))}).catch(e=>{a(Ve(e.message))})},update:(e,t,a)=>{const n=D.a.put(N+"/instruments/"+e+"/response_domain_datetimes/"+t+".json",a,{headers:T()});return a=>(a(se(t,"ResponseDomainDatetime")),n.then(n=>{a(ie(t,"ResponseDomainDatetime")),a(Se(e,n.data))}).catch(e=>{a(Ge(t,"ResponseDomainDatetime",e.response.data.error_sentence))}))},create:(e,t)=>{const a=D.a.post(N+"/instruments/"+e+"/response_domain_datetimes.json",t,{headers:T()});return t=>(t(se("new","ResponseDomainDatetime")),a.then(a=>{t(ie("new","ResponseDomainDatetime")),t(Se(e,a.data)),t(Fe(Object(m.reverse)(d.instruments.instrument.build.responseDomains.show,{instrument_id:e,responseDomainType:a.data.type,responseDomainId:a.data.id})))}).catch(e=>{t(Ge("new","ResponseDomainDatetime",e.response.data.error_sentence))}))},delete:(e,t)=>{const a=D.a.delete(N+"/instruments/"+e+"/response_domain_datetimes/"+t+".json",{headers:T()});return n=>(n(se(t,"ResponseDomainDatetime")),a.then(a=>{n(ie(t,"ResponseDomainDatetime")),n(ze(e,"ResponseDomainDatetime",t)),n(Fe(Object(m.reverse)(d.instruments.instrument.build.responseDomains.all,{instrument_id:e})))}).catch(e=>{n(Ge(t,"ResponseDomainDatetime",e.response.data.error_sentence))}))}},_e=(e,t)=>({type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_DATETIMES",payload:{instrumentId:e,responseDomainDatetimes:t}}),Se=(e,t)=>({type:"LOAD_INSTRUMENT_RESPONSE_DOMAIN_DATETIME",payload:{instrumentId:e,responseDomainDatetime:t}}),De=e=>{const t=D.a.get(N+"/instruments/"+e+"/variables.json",{headers:T()});return a=>t.then(t=>{a(Ne(e,t.data))}).catch(e=>{a(Ve(e.message))})},Ne=(e,t)=>({type:"LOAD_INSTRUMENT_VARIABLES",payload:{instrumentId:e,variables:t}}),Te=e=>{const t=D.a.get(N+"/datasets/"+e+"/variables.json",{headers:T()});return a=>t.then(t=>{a(Ce(e,t.data))}).catch(e=>{a(Ve(e.message))})},fe=(e,t,a)=>{const n=D.a.post(N+"/datasets/"+e+"/variables/"+t+"/add_sources.json",{sources:{id:a,x:null,y:null}},{headers:T()});return a=>(a(se(t,"DatasetVariable")),n.then(n=>{a(ie(t,"DatasetVariable")),a(xe(e,n.data))}).catch(e=>{a(Ge(t,"DatasetVariable",e.response.data.message))}))},we=(e,t,a)=>{const n=D.a.post(N+"/datasets/"+e+"/variables/"+t+"/remove_source.json",{other:{id:a.id,class:a.class,x:a.x,y:a.y}},{headers:T()});return a=>(a(se(t,"DatasetVariable")),n.then(n=>{a(ie(t,"DatasetVariable")),a(xe(e,n.data))}).catch(e=>{a(Ge(t,"DatasetVariable",e.message))}))},Ce=(e,t)=>({type:"LOAD_DATASET_VARIABLES",payload:{datasetId:e,variables:t}}),xe=(e,t)=>({type:"LOAD_DATASET_VARIABLE",payload:{datasetId:e,variable:t}}),qe=()=>{const e=D.a.get(N+"/topics/flattened_nest.json",{headers:T()});return t=>e.then(e=>{t(Re(e.data))}).catch(e=>{t(Ve(e.message))})},Re=e=>({type:"LOAD_TOPICS",payload:{topics:e}}),Le=e=>({type:"LOAD_DATASETS",payload:{datasets:e}}),Ae=e=>({type:"LOAD_DATASET",payload:{dataset:e}}),Me=e=>({type:"LOAD_ADMIN_IMPORTS",payload:{imports:e}}),Pe=e=>({type:"LOAD_ADMIN_IMPORT",payload:{import:e}}),ke=e=>({type:"LOAD_INSTRUMENTS",payload:{instruments:e}}),Qe=e=>({type:"LOAD_INSTRUMENT",payload:{instrument:e}}),Ue=(e,t)=>({type:"LOAD_INSTRUMENT_STATS",payload:{instrumentId:e,stats:t}}),ze=(e,t,a)=>({type:"DELETE_INSTRUMENT_OBJECT_TYPE",payload:{instrumentId:e,id:a,objectType:t}}),Ve=e=>({type:"FETCH_FAILURE",payload:{error:e}}),Ge=(e,t,a)=>({type:"ERROR",payload:{id:e,type:t,error:a}}),We=e=>({type:"LOGIN",payload:Object(_.a)({},e)}),Be=e=>({type:"LOGIN_FAILURE",payload:{error:e}}),Fe=e=>({type:"REDIRECT",payload:{to:e}}),Ye=Object(v.a)(e=>({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}})),He=(e="")=>{const t=r.a.useState(e),a=Object(p.a)(t,2),n=a[0],l=a[1];return{value:n,onChange:r.a.useCallback(e=>l(e.target.value),[])}};function Je(){const e=Ye(),t=He(),a=He(),n=Object(i.b)();return r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(O.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(b.a,{className:e.avatar},r.a.createElement(h.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:e=>{e.preventDefault(),n(((e,t)=>{const a=D.a.post(N+"/users/sign_in.json",{user:{email:e,password:t}});return e=>a.then(t=>{e(We(t.data))}).catch(t=>{e(Be(t.message))})})(t.value,a.value))}},r.a.createElement(j.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0},t)),r.a.createElement(j.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"},a)),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Log In"))))}var Xe=a(4),Ke=a(431),$e=a(432),Ze=a(404),et=a(405),tt=a(400),at=a(407),nt=a(215),rt=a(408),lt=a(184),st=a(249),it=a.n(st),ct=a(251),ot=a.n(ct),mt=a(250),dt=a.n(mt),ut=a(360),pt=a(401),bt=a(402),Et=a(247),Ot=a.n(Et),jt=a(246),yt=a.n(jt),ht=a(248),gt=a.n(ht),vt=a(244),It=a.n(vt),_t=a(426),St=a(245),Dt=a.n(St),Nt=a(3);const Tt=e=>{const t=e.text,a=e.link;return Object(Nt.isEmpty)(a)?r.a.createElement(g.a,{color:"textPrimary"},t):r.a.createElement(c.b,{color:"inherit",to:a},t)},ft=Object(v.a)(e=>({root:{"margin-bottom":"10px",padding:"15px"}}));var wt=e=>{const t=e.instrumentId,a=Object(o.h)(),n=()=>[{text:"Datasets",link:Object(m.reverse)(d.datasets.all)}],l=()=>[{text:"Admin",link:Object(m.reverse)(d.admin.instruments)}],s=()=>{var e=[{text:"Instruments",link:Object(m.reverse)(d.instruments.all)}];if(t){e.push({text:t,link:Object(m.reverse)(d.instruments.instrument.show,{instrument_id:t})});const n=(()=>{const e="/instruments\\/".concat(t,"\\/(?<type>build|map)/?(?<subtype>question_grids|question_items|response_domains|code_lists|constructs)?/?"),n=a.pathname.match(new RegExp(e));return Object(Nt.get)(n,"groups",{})})();if(n)switch(n.type){case"map":e.push({text:"Map",link:Object(m.reverse)(d.instruments.instrument.map.show,{instrument_id:t})});break;case"build":e.push({text:"Build",link:Object(m.reverse)(d.instruments.instrument.build.show,{instrument_id:t})}),n.subtype&&("question_items"===n.subtype?e.push({text:"Question Items",link:Object(m.reverse)(d.instruments.instrument.build.questionItems.all,{instrument_id:t})}):"question_grids"===n.subtype?e.push({text:"Question Grids",link:Object(m.reverse)(d.instruments.instrument.build.questionGrids.all,{instrument_id:t})}):"code_lists"===n.subtype?e.push({text:"CodeLists",link:Object(m.reverse)(d.instruments.instrument.build.codeLists.all,{instrument_id:t})}):"response_domains"===n.subtype?e.push({text:"Response Domains",link:Object(m.reverse)(d.instruments.instrument.build.responseDomains.all,{instrument_id:t})}):"constructs"===n.subtype&&e.push({text:"Constructs",link:Object(m.reverse)(d.instruments.instrument.build.constructs.show,{instrument_id:t})}))}}return e},i=(()=>{var e=a.pathname.match(new RegExp("^\\/(?<topLevel>instruments|datasets|admin)"));switch(Object(Nt.get)(Object(Nt.get)(e,"groups",{}),"topLevel","instruments")){case"datasets":return n();case"admin":return l();default:return s()}})(),c=ft();return r.a.createElement(lt.a,{className:c.root},r.a.createElement(_t.a,{separator:r.a.createElement(Dt.a,{fontSize:"small"}),"aria-label":"breadcrumb"},i.map(e=>r.a.createElement(Tt,{text:e.text,link:e.link}))))};const Ct=e=>{switch(e){case"statement":return"652d90";case"loop":return"37b34a";case"question":return"00adee";case"sequence":return"faaf40";case"condition":return"f1003a";default:return"d3d3d3"}};var xt=a(403),qt=a(77),Rt=a.n(qt),Lt=a(78),At=a.n(Lt);function Mt(){return r.a.createElement(g.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(c.b,{color:"inherit",to:"https://material-ui.com/"},"Archivist")," ",(new Date).getFullYear(),".")}const Pt=Object(v.a)(e=>({root:{display:"flex"},nested:{paddingLeft:e.spacing(4)},toolbar:{paddingRight:24},toolbarIcon:Object(_.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7),[e.breakpoints.up("sm")]:{width:e.spacing(9)}},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",flexDirection:"column"},fixedHeight:{height:240}})),kt=()=>{const e=Pt(),t=r.a.useState(!0),a=Object(p.a)(t,2),n=a[0],l=a[1];return r.a.createElement("div",null,r.a.createElement(ut.a,{button:!0},r.a.createElement(pt.a,null,r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.all)},r.a.createElement(yt.a,null))),r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.all)},r.a.createElement(bt.a,{primary:"Instruments"}))),r.a.createElement(ut.a,{button:!0},r.a.createElement(pt.a,null,r.a.createElement(Ot.a,null)),r.a.createElement(c.b,{to:Object(m.reverse)(d.datasets.all)},r.a.createElement(bt.a,{primary:"Datasets"}))),r.a.createElement(ut.a,{button:!0,onClick:()=>{l(!n)}},r.a.createElement(pt.a,null,r.a.createElement(gt.a,{style:{color:"37b34a"}})),r.a.createElement(bt.a,{primary:"Admin"}),n?r.a.createElement(Rt.a,null):r.a.createElement(At.a,null)),r.a.createElement(xt.a,{in:n,timeout:"auto",unmountOnExit:!0},r.a.createElement(tt.a,{component:"div",disablePadding:!0},r.a.createElement(ut.a,{button:!0,className:e.nested},r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.instruments.all)},r.a.createElement(bt.a,{primary:"Instruments"}))),r.a.createElement(ut.a,{button:!0,className:e.nested},r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.datasets.all)},r.a.createElement(bt.a,{primary:"Datasets"}))),r.a.createElement(ut.a,{button:!0,className:e.nested},r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.import)},r.a.createElement(bt.a,{primary:"Import"}))),r.a.createElement(ut.a,{button:!0,className:e.nested},r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.imports.all)},r.a.createElement(bt.a,{primary:"DDI Imports"}))))))},Qt=e=>{const t=Pt(),a=r.a.useState(!0),n=Object(p.a)(a,2),l=n[0],s=n[1],c=Object(i.b)(),o=e.instrumentId;return r.a.createElement("div",{className:t.root},r.a.createElement(It.a,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,"Archivist")),r.a.createElement(O.a,null),r.a.createElement(Ze.a,{position:"absolute",className:Object(Xe.a)(t.appBar,l&&t.appBarShift)},r.a.createElement(et.a,{className:t.toolbar},r.a.createElement(nt.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:()=>{s(!0)},className:Object(Xe.a)(t.menuButton,l&&t.menuButtonHidden)},r.a.createElement(it.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},e.title),r.a.createElement(nt.a,{color:"inherit"},r.a.createElement(dt.a,{onClick:()=>{c({type:"LOGOUT"})}})))),r.a.createElement(Ke.a,{variant:"permanent",classes:{paper:Object(Xe.a)(t.drawerPaper,!l&&t.drawerPaperClose)},open:l},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement("img",{src:"/logo.svg",alt:"BigCo Inc. logo",style:{width:"51%"}}),r.a.createElement(nt.a,{onClick:()=>{s(!1)}},r.a.createElement(ot.a,null))),r.a.createElement(at.a,null),r.a.createElement(kt,null),r.a.createElement(at.a,null)),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(I.a,{maxWidth:!1,maxHeight:!1,className:t.container},r.a.createElement(rt.a,{container:!0,spacing:3},r.a.createElement(rt.a,{item:!0,xs:12},r.a.createElement(wt,{instrumentId:o}),r.a.createElement(lt.a,{className:t.paper},e.children))),r.a.createElement($e.a,{pt:4},r.a.createElement(Mt,null)))))};var Ut=a(151),zt=a(18),Vt=a(424),Gt=a(410);const Wt=(e,t)=>{const a=Object(i.c)(e=>e.statuses),n=t+":"+e;return Object(Nt.get)(a,n,{})},Bt=e=>{const t=e.id,a=e.type,n=Wt(t,a);return Object(Nt.isEmpty)(n)||Object(Nt.isNil)(n.error)?n&&n.saved?r.a.createElement("div",null,r.a.createElement(Vt.a,{severity:"success"},r.a.createElement(Gt.a,null,"new"===t?"Created":"Saved"))):"":r.a.createElement("div",null,r.a.createElement(Vt.a,{severity:"error"},r.a.createElement(Gt.a,null,"Error"),n.errorMessage))};var Ft=a(192);const Yt=e=>{let t=e.name,a=Object(Ft.a)(e,["name"]);return r.a.createElement(zt.a,{name:t},e=>{let t=e.input,n=(t.value,t.onChange),l=Object(Ft.a)(t,["value","onChange"]);return r.a.createElement("input",Object.assign({},l,{type:"file",onChange:({target:e})=>n(e.files)},a))})},Ht=Object(v.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Ct("statement"))}}),Jt=[{size:12,field:r.a.createElement(Yt,{name:"files"})}],Xt=e=>{Object(Ut.a)(e);const t=Object(i.b)(),a=Ht();Wt("new","AdminInstrument");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement("h2",null,"Upload DDI Instrument Files"),r.a.createElement(Bt,{type:"AdminInstrument",id:"new"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{t(C(e))},initialValues:{files:[]},validate:e=>((e,t)=>{const a={};return e.files&&!Object(Nt.isEmpty)(e.files)||(a.files="Required"),a})(e),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:l,form:s,submitting:i,values:c})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16},className:a.paper},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},Jt.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},"Only DDI-L 3.2 Instrument files are accepted.",r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:i},"Import Instrument")))))}))},Kt=Object(v.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Ct("statement"))}}),$t=[{size:12,field:r.a.createElement(Yt,{name:"files"})}],Zt=e=>{Object(Ut.a)(e);const t=Object(i.b)(),a=Kt();Wt("new","AdminDataset");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement("h2",null,"Upload DDI Dataset Files"),r.a.createElement(Bt,{type:"AdminDataset",id:"new"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{t(x(e))},initialValues:{files:[]},validate:e=>((e,t)=>{const a={};return e.files&&!Object(Nt.isEmpty)(e.files)||(a.files="Required"),a})(e),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:l,form:s,submitting:i,values:c})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16},className:a.paper},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},$t.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},"Only DDI-L 3.2 Dataset files are accepted.",r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:i},"Import Dataset")))))}))};var ea=()=>{Object(i.b)();return Object(n.useEffect)(()=>{},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Import"},r.a.createElement(Xt,null),r.a.createElement(Zt,null)))},ta=a(411),aa=a(415),na=a(414),ra=a(412),la=a(413);var sa=e=>{const t=Object(i.b)(),a=Object(Nt.get)(e,"match.params.importId",""),l=Object(i.c)(e=>e.imports),s=Object(Nt.get)(l,a,{logs:[]}),c=Object(Nt.get)(s,"logs",[]),o=Object.values(c);return Object(n.useEffect)(()=>{t(A(a))},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"DDI Imports"},r.a.createElement("ul",null,r.a.createElement("li",null,"Filename : ",s.filename),r.a.createElement("li",null,"State : ",s.state),r.a.createElement("li",null,"Created At : ",s.created_at)),r.a.createElement(ta.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"Input"),r.a.createElement(na.a,null,"Matches"),r.a.createElement(na.a,null,"Outcome"))),r.a.createElement(aa.a,null,o.map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,e.original_text),r.a.createElement(na.a,null,e.matches),r.a.createElement(na.a,null,e.outcome)))))))},ia=a(416),ca=a(428);var oa=()=>{const e=Object(i.b)(),t=Object(i.c)(e=>e.imports),a=r.a.useState(0),l=Object(p.a)(a,2),s=l[0],o=l[1],u=r.a.useState(20),b=Object(p.a)(u,2),O=b[0],j=b[1],y=Object.values(t).sort().reverse();return Object(n.useEffect)(()=>{e(L())},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"DDI Imports"},r.a.createElement(ta.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,null,"File"),r.a.createElement(na.a,null,"Type"),r.a.createElement(na.a,null,"State"),r.a.createElement(na.a,null,"Created At"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,y.slice(s*O,s*O+O).map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,e.id),r.a.createElement(na.a,null,e.filename),r.a.createElement(na.a,null,e.import_type),r.a.createElement(na.a,null,e.state),r.a.createElement(na.a,null,e.created_at),r.a.createElement(na.a,null,r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.imports.show,{importId:e.id})},"View Log")))))),r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:y.length,rowsPerPage:O,page:s,onChangePage:(e,t)=>{o(t)},onChangeRowsPerPage:e=>{j(parseInt(e.target.value,10)),o(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))))},ma=a(418);const da=({values:e})=>{const t=r.a.useState(0),a=Object(p.a)(t,2),n=a[0],l=a[1],s=r.a.useState(20),i=Object(p.a)(s,2),c=i[0],o=i[1],m=e;return r.a.createElement(ta.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,null,"File"),r.a.createElement(na.a,null,"Type"),r.a.createElement(na.a,null,"State"),r.a.createElement(na.a,null,"Created At"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,m.slice(n*c,n*c+c).map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,e.id),r.a.createElement(na.a,null,e.file),r.a.createElement(na.a,null,e.type),r.a.createElement(na.a,null,e.state),r.a.createElement(na.a,null,e.created_at),r.a.createElement(na.a,null,r.a.createElement(ma.a,{variant:"outlined"},r.a.createElement(E.a,null,"View Log")))))),r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:m.length,rowsPerPage:c,page:n,onChangePage:(e,t)=>{l(t)},onChangeRowsPerPage:e=>{o(parseInt(e.target.value,10)),l(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))},ua=Object(v.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Ct("statement"))}}),pa=[{size:12,field:r.a.createElement(Yt,{name:"files"})}],ba=({type:e,hint:t,onSubmit:a=(()=>{})})=>{Object(i.b)();const n=ua();Wt("new","AdminImportMapping");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement("h2",null,"Import Mappings"),r.a.createElement(Bt,{type:"AdminImportMapping",id:"new"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:a,initialValues:{files:[]},validate:e=>({}),render:({handleSubmit:a,form:{mutators:{push:l,pop:s}},pristine:i,form:c,submitting:o,values:m})=>r.a.createElement("form",{onSubmit:a,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16},className:n.paper},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},pa.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},t,r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:o},"Import ",e)))))}))};var Ea=a(112),Oa=a.n(Ea);const ja=()=>r.a.createElement($e.a,{style:{height:200,"margin-top":50},m:"auto"},r.a.createElement(Oa.a,{color:"#".concat(Ct(Object(Nt.shuffle)(["sequence","condition","question","statement","loop"])[0]))}));var ya=e=>{const t=Object(i.b)(),a=Object(Nt.get)(e,"match.params.instrumentId",""),l=Object.values(Object(i.c)(e=>e.instrumentImportMappings)),s=Object(n.useState)(!1),c=Object(p.a)(s,2),o=c[0],m=c[1];return Object(n.useEffect)(()=>{Promise.all([t(R("instruments",a))]).then(()=>{m(!0)})},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Instruments Import Mappings"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(ba,{type:"Instrument",hint:"You can import multiple Q-V and T-Q mapping files. Only TXT files are accepted.",onSubmit:e=>{t(q("instruments",a,e))}}),r.a.createElement(da,{values:l})):r.a.createElement(ja,null)))};var ha=e=>{const t=Object(i.b)(),a=Object(Nt.get)(e,"match.params.datasetId",""),l=Object.values(Object(i.c)(e=>e.datasetImportMappings)),s=Object(n.useState)(!1),c=Object(p.a)(s,2),o=c[0],m=c[1];return Object(n.useEffect)(()=>{Promise.all([t(R("datasets",a))]).then(()=>{m(!0)})},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Datasets Import Mappings"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(ba,{type:"Dataset",hint:"You can import multiple T-V and DV mapping files. Only TXT files are accepted.",onSubmit:e=>{t(q("datasets",a,e))}}),r.a.createElement(da,{values:l})):r.a.createElement(ja,null)))};var ga=()=>{const e=Object(i.b)(),t=Object(i.c)(e=>e.instruments),a=r.a.useState(0),l=Object(p.a)(a,2),s=l[0],o=l[1],u=r.a.useState(20),b=Object(p.a)(u,2),O=b[0],j=b[1],y=Object.values(t);return Object(n.useEffect)(()=>{e(M())},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Admin Instruments"},r.a.createElement(ta.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,null,"Prefix"),r.a.createElement(na.a,null,"Study"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,y.slice(s*O,s*O+O).map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,e.id),r.a.createElement(na.a,null,e.prefix),r.a.createElement(na.a,null,e.study),r.a.createElement(na.a,null,r.a.createElement(ma.a,{variant:"outlined"},r.a.createElement(E.a,null,"Edit"),r.a.createElement(E.a,null,"Copy"),r.a.createElement(E.a,null,r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.instruments.importMappings,{instrumentId:e.id})},"Import Mappings")),r.a.createElement(E.a,null,"QV"),r.a.createElement(E.a,null,"Topics"),r.a.createElement(E.a,null,r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.instruments.importMappings,{instrumentId:e.id})},"View Imports")),r.a.createElement(E.a,null,"Clear Cache"),r.a.createElement(E.a,null,"Delete")))))),r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:y.length,rowsPerPage:O,page:s,onChangePage:(e,t)=>{o(t)},onChangeRowsPerPage:e=>{j(parseInt(e.target.value,10)),o(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))))};var va=()=>{const e=Object(i.b)(),t=Object(i.c)(e=>e.datasets),a=r.a.useState(0),l=Object(p.a)(a,2),s=l[0],o=l[1],u=r.a.useState(20),b=Object(p.a)(u,2),O=b[0],j=b[1],y=Object.values(t);return Object(n.useEffect)(()=>{e(f())},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Admin Datasets"},r.a.createElement(ta.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,null,"Name"),r.a.createElement(na.a,null,"Study"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,y.slice(s*O,s*O+O).map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,e.id),r.a.createElement(na.a,null,e.name),r.a.createElement(na.a,null,e.study),r.a.createElement(na.a,null,r.a.createElement(ma.a,{variant:"outlined"},r.a.createElement(E.a,null,"Edit"),r.a.createElement(E.a,null,r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.datasets.importMappings,{datasetId:e.id})},"Import Mappings")),r.a.createElement(E.a,null,"DV"),r.a.createElement(E.a,null,"Topics"),r.a.createElement(E.a,null,r.a.createElement(c.b,{to:Object(m.reverse)(d.admin.datasets.importMappings,{datasetId:e.id})},"View Imports")),r.a.createElement(E.a,null,"Delete")))))),r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:y.length,rowsPerPage:O,page:s,onChangePage:(e,t)=>{o(t)},onChangeRowsPerPage:e=>{j(parseInt(e.target.value,10)),o(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))))};var Ia=()=>{const e=Object(i.b)(),t=Object(i.c)(e=>e.instruments),a=r.a.useState(0),l=Object(p.a)(a,2),s=l[0],o=l[1],u=r.a.useState(20),b=Object(p.a)(u,2),O=b[0],j=b[1],y=Object.values(t);return Object(n.useEffect)(()=>{e(M())},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Instruments"},r.a.createElement(ta.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,null,"Prefix"),r.a.createElement(na.a,null,"Control Constructs"),r.a.createElement(na.a,null,"Q-V Mappings"),r.a.createElement(na.a,null,"Study"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,y.slice(s*O,s*O+O).map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,e.id),r.a.createElement(na.a,null,e.prefix),r.a.createElement(na.a,null,e.ccs),r.a.createElement(na.a,null,e.qvs),r.a.createElement(na.a,null,e.study),r.a.createElement(na.a,null,r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.show,{instrument_id:e.prefix})},"View")),r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.show,{instrument_id:e.prefix})},"Build")),r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.map.show,{instrument_id:e.prefix})},"Map")))))),r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:y.length,rowsPerPage:O,page:s,onChangePage:(e,t)=>{o(t)},onChangeRowsPerPage:e=>{j(parseInt(e.target.value,10)),o(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}}))))))};var _a=()=>{const e=Object(i.b)(),t=Object(i.c)(e=>e.datasets),a=r.a.useState(0),l=Object(p.a)(a,2),s=l[0],o=l[1],d=r.a.useState(20),u=Object(p.a)(d,2),b=u[0],O=u[1],j=Object.values(t),y=Object(n.useState)(!1),h=Object(p.a)(y,2),g=h[0],v=h[1];return Object(n.useEffect)(()=>{Promise.all([e(f())]).then(()=>{v(!0)})},[]),r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Datasets"},g?r.a.createElement(ta.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,null,"Name"),r.a.createElement(na.a,null,"Variables"),r.a.createElement(na.a,null,"Q-V Mappings"),r.a.createElement(na.a,null,"DV Mappings"),r.a.createElement(na.a,null,"Study"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,j.slice(s*b,s*b+b).map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,e.id),r.a.createElement(na.a,null,e.name),r.a.createElement(na.a,null,e.variables),r.a.createElement(na.a,null,e.qvs),r.a.createElement(na.a,null,e.dvs),r.a.createElement(na.a,null,e.study),r.a.createElement(na.a,null,r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)("/datasets/:dataset_id",{dataset_id:e.id})},"View")))))),r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:j.length,rowsPerPage:b,page:s,onChangePage:(e,t)=>{o(t)},onChangeRowsPerPage:e=>{O(parseInt(e.target.value,10)),o(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}})))):r.a.createElement(ja,null)))},Sa=a(423);var Da=e=>{const t=Object(i.b)(),a=Object(Nt.get)(e,"match.params.dataset_id",""),l=Object(i.c)(e=>Object(Nt.get)(e.datasets,a)),s=Object(i.c)(e=>Object(Nt.get)(e.datasetVariables,a,{})),c=r.a.useState(0),o=Object(p.a)(c,2),m=o[0],d=o[1],u=r.a.useState(20),b=Object(p.a)(u,2),E=b[0],O=b[1],y=Object.values(s),h=Object(n.useState)(!1),g=Object(p.a)(h,2),v=g[0],I=g[1];Object(n.useEffect)(()=>{Promise.all([t(w(a)),t(Te(a))]).then(()=>{I(!0)})},[]);const _=e=>{const t=e.sources,a=e.datasetId,n=e.variable;let l=e.sourceOptions;l=l.filter(e=>Object(Nt.get)(e.topic,"id")==Object(Nt.get)(n.topic,"id"));const s=n.id,c=Object(i.b)();var o=[];const m=(e,n,r)=>{switch(r){case"select-option":if(o=n.filter(e=>!t.includes(e)),!Object(Nt.isEmpty)(o))return l=o.map(e=>e.label),void c(fe(a,s,l));break;case"remove-option":if(o=t.filter(e=>!n.includes(e)),!Object(Nt.isEmpty)(o))return void o.map(e=>{c(we(a,s,e))});break;default:return null}var l};return Object(Nt.isEmpty)(t)?r.a.createElement("div",null,r.a.createElement(Sa.a,{multiple:!0,id:"tags-outlined",options:Object.values(l),getOptionLabel:e=>e.label,onChange:m,value:[],filterSelectedOptions:!0,renderInput:e=>r.a.createElement(j.a,Object.assign({},e,{variant:"outlined",label:"Sources",placeholder:"Add source"}))})):r.a.createElement("div",null,r.a.createElement(Sa.a,{multiple:!0,id:"tags-outlined",options:Object.values(l),getOptionLabel:e=>e.label,onChange:m,value:t,getOptionSelected:(e,t)=>e.id===t.id,filterSelectedOptions:!0,renderInput:e=>r.a.createElement(j.a,Object.assign({},e,{variant:"outlined",label:"Sources",placeholder:"Add source"}))}))};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Datasets"},v?r.a.createElement(ta.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,null,"Name"),r.a.createElement(na.a,null,"Label"),r.a.createElement(na.a,null,"Type"),r.a.createElement(na.a,null,"Used by"),r.a.createElement(na.a,null,"Sources"),r.a.createElement(na.a,null,"Topic"))),r.a.createElement(aa.a,null,y.slice(m*E,m*E+E).map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,e.id),r.a.createElement(na.a,null,e.name),r.a.createElement(na.a,null,e.label),r.a.createElement(na.a,null,e.var_type),r.a.createElement(na.a,null),r.a.createElement(na.a,null,r.a.createElement(_,{sources:e.sources,sourceOptions:Object(Nt.get)(l,"questions",[]),datasetId:a,variable:e})),r.a.createElement(na.a,null,Object(Nt.get)(e.topic,"name"))))),r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{rowsPerPageOptions:[20,50,100,{label:"All",value:-1}],colSpan:3,count:y.length,rowsPerPage:E,page:m,onChangePage:(e,t)=>{d(t)},onChangeRowsPerPage:e=>{O(parseInt(e.target.value,10)),d(0)},SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}})))):r.a.createElement(ja,null)))};const Na=({instrument:e,mode:t="view"})=>r.a.createElement("h1",null,Object(Nt.get)(e,"label"),e&&r.a.createElement(r.a.Fragment,null,"view"!==t&&r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.show,{instrument_id:e.slug})},"View")),"build"!==t&&r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.show,{instrument_id:e.slug})},"Build")),"map"!==t&&r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.map.show,{instrument_id:e.slug})},"Map")))),Ta=Object(v.a)(e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},control:{width:"100%",padding:e.spacing(2)},nested:{paddingLeft:e.spacing(4)}})),fa=(e,t,a)=>{const n=Object(i.c)(e=>e.cc_sequences),r=Object(Nt.get)(n,e,{}),l=Object(i.c)(e=>e.cc_statements),s=Object(Nt.get)(l,e,{}),c=Object(i.c)(e=>e.cc_conditions),o=Object(Nt.get)(c,e,{}),m=Object(i.c)(e=>e.cc_questions),d=Object(Nt.get)(m,e,{}),u=Object(i.c)(e=>e.questionItems),p=Object(Nt.get)(u,e,{}),b=Object(i.c)(e=>e.questionGrids),E=Object(Nt.get)(b,e,{});var O={children:[]};return"CcSequence"===t&&(O=Object(Nt.get)(r,a.toString(),{})),"CcStatement"===t&&(O=Object(Nt.get)(s,a.toString(),{})),"CcCondition"===t&&(O=Object(Nt.get)(o,a.toString(),{})),"CcQuestion"===t&&("QuestionItem"===(O=Object(Nt.get)(d,a.toString(),{})).question_type?O.question=Object(Nt.get)(p,O.question_id.toString(),{}):"QuestionGrid"===O.question_type&&(O.question=Object(Nt.get)(E,O.question_id.toString(),{}))),O},wa=e=>{const t=e.type,a=e.id,n=e.instrumentId,l=fa(n,t,a);Ta();return console.log(l),r.a.createElement("div",null,l.question.literal,l.question.rds&&r.a.createElement(Ca,{rds:l.question.rds}))},Ca=({rds:e})=>e.map(e=>{switch(console.log(e),e.type){case"ResponseDomainCode":return r.a.createElement("ul",null,r.a.createElement(xa,{codes:e.codes}));case"ResponseDomainText":return r.a.createElement("ul",null,r.a.createElement("li",null,e.label));case"ResponseDomainNumeric":case"ResponseDomainDatetime":return r.a.createElement("ul",null,r.a.createElement("li",null,e.label," ",e.params," ",e.subtype));default:return console.log(e),""}}),xa=({codes:e})=>e.map(e=>r.a.createElement("li",null,e.label)),qa=e=>{const t=e.type,a=e.id,n=e.instrumentId,l=fa(n,t,a);Ta();return r.a.createElement("div",null,l.literal)},Ra=e=>{const t=e.instrumentId;var a=e.title;const n=Ta(),l=r.a.useState(!0),s=Object(p.a)(l,2),i=s[0],c=s[1];var o=fa(t,e.type,e.id);return a=Object(Nt.get)(o,"literal",e.title),r.a.createElement(tt.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:n.root},r.a.createElement(ut.a,{button:!0,onClick:()=>{c(!i)}},r.a.createElement(bt.a,{primary:a}),i?r.a.createElement(Rt.a,null):r.a.createElement(At.a,null)),!Object(Nt.isEmpty)(o.children)&&r.a.createElement(xt.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(tt.a,{component:"div",disablePadding:!0},o.children.map(e=>r.a.createElement(ut.a,{button:!0,className:n.nested},function(){switch(e.type){case"CcSequence":return r.a.createElement(La,{instrumentId:t,id:e.id,type:e.type,title:e.type,children:Object(Nt.get)(e,"children",[])});case"CcQuestion":return r.a.createElement(wa,{instrumentId:t,id:e.id,type:e.type});case"CcCondition":return r.a.createElement(Ra,{instrumentId:t,id:e.id,type:e.type});default:return console.log(e),null}}())))))},La=e=>{const t=e.instrumentId;var a=e.title;const n=Ta(),l=r.a.useState(!0),s=Object(p.a)(l,2),i=s[0],c=s[1];var o=fa(t,e.type,e.id);return a=Object(Nt.get)(o,"label",e.title),r.a.createElement(tt.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:n.root},r.a.createElement(ut.a,{button:!0,onClick:()=>{c(!i)}},r.a.createElement(bt.a,{primary:a}),i?r.a.createElement(Rt.a,null):r.a.createElement(At.a,null)),!Object(Nt.isEmpty)(o.children)&&r.a.createElement(xt.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(tt.a,{component:"div",disablePadding:!0},o.children.map(e=>function(){switch(e.type){case"CcSequence":return r.a.createElement(ut.a,{button:!0,className:n.nested},r.a.createElement(La,{instrumentId:t,id:e.id,type:e.type,title:e.type,children:Object(Nt.get)(e,"children",[])}));case"CcQuestion":return r.a.createElement(ut.a,{button:!0,className:n.nested},r.a.createElement(wa,{instrumentId:t,id:e.id,type:e.type}));case"CcStatement":return r.a.createElement(ut.a,{button:!0,className:n.nested},r.a.createElement(qa,{instrumentId:t,id:e.id,type:e.type}));case"CcCondition":return r.a.createElement(ut.a,{button:!0,className:n.nested},r.a.createElement(Ra,{instrumentId:t,id:e.id,type:e.type,children:Object(Nt.get)(e,"children",[])}));default:return null}}()))))};var Aa=e=>{const t=Object(i.b)(),a=Object(Nt.get)(e,"match.params.instrument_id",""),l=Object(i.c)(e=>Object(Nt.get)(e.instruments,a)),s=Object(i.c)(e=>e.cc_sequences),c=Object(Nt.get)(s,a,{});Object(n.useEffect)(()=>{t(P(a)),t(B.all(a)),t(H.all(a)),t(ae.all(a)),t(le.all(a)),t(me.all(a)),t(pe.all(a)),t(De(a)),t(qe())},[]);const o=Object(Nt.isEmpty)(c)?void 0:Object.values(c).find(e=>1==e.top);return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"View",instrumentId:a},r.a.createElement(Na,{instrument:l,mode:"view"}),Object(Nt.isNil)(o)?r.a.createElement($e.a,{m:"auto"},r.a.createElement(Oa.a,{color:"#009de6"})):r.a.createElement(La,{instrumentId:a,type:"CcSequence",id:o.children[0].id,title:o.children[0].label,children:o.children[0].children})))},Ma=a(186),Pa=a.n(Ma),ka=a(429),Qa=a(355),Ua=a(356),za=a(362),Va=a(185),Ga=a.n(Va);const Wa=Object(v.a)(e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},control:{width:"100%",padding:e.spacing(2)},nested:{paddingLeft:e.spacing(4)}})),Ba=(e,t,a)=>{const n=Object(i.c)(e=>e.cc_sequences),r=Object(Nt.get)(n,e,{}),l=Object(i.c)(e=>e.cc_statements),s=Object(Nt.get)(l,e,{}),c=Object(i.c)(e=>e.cc_conditions),o=Object(Nt.get)(c,e,{}),m=Object(i.c)(e=>e.cc_questions),d=Object(Nt.get)(m,e,{}),u=Object(i.c)(e=>e.questionItems),p=Object(Nt.get)(u,e,{}),b=Object(i.c)(e=>e.questionGrids),E=Object(Nt.get)(b,e,{});var O={children:[]};return"CcSequence"===t&&(O=Object(Nt.get)(r,a.toString(),{})),"CcStatement"===t&&(O=Object(Nt.get)(s,a.toString(),{})),"CcCondition"===t&&(O=Object(Nt.get)(o,a.toString(),{})),"CcQuestion"===t&&("QuestionItem"===(O=Object(Nt.get)(d,a.toString(),{})).question_type?O.question=Object(Nt.get)(p,O.question_id.toString(),{}):"QuestionGrid"===O.question_type&&(O.question=Object(Nt.get)(E,O.question_id.toString(),{}))),O},Fa=e=>{const t=e.type,a=e.id,n=e.instrumentId,l=Ba(n,t,a),s=Wa(),c=Object(Nt.isEmpty)(l.question)?l.label:l.question.literal,o=Object(Nt.get)(l,"topic",{id:null}),m=Object(Nt.get)(o,"id",null),d=((e,t)=>{const a=Object(i.c)(e=>e.statuses),n=t+":"+e;return Object(Nt.get)(a,n,{})})(l.id,"CcQuestion");return r.a.createElement(ut.a,null,r.a.createElement(lt.a,{className:s.control},r.a.createElement(rt.a,{container:!0,spacing:3},!Object(Nt.isEmpty)(d)&&!Object(Nt.isNil)(d.error)&&r.a.createElement("div",{className:s.root},r.a.createElement(Vt.a,{severity:"error"},r.a.createElement(Gt.a,null,"Error"),d.errorMessage)),r.a.createElement(rt.a,{item:!0,xs:9},r.a.createElement(bt.a,{primary:c})),r.a.createElement(rt.a,{item:!0,xs:3},r.a.createElement(ka.a,{label:l.label,color:"primary"}),!Object(Nt.isEmpty)(d)&&!Object(Nt.isNil)(d.saving)&&r.a.createElement(ka.a,{label:"Saving",color:"secondary"},"              ",r.a.createElement(Ga.a,null)),!Object(Nt.isEmpty)(d)&&!Object(Nt.isNil)(d.saved)&&r.a.createElement(ka.a,{label:"Saved",color:"success",deleteIcon:r.a.createElement(Pa.a,null)})),r.a.createElement(rt.a,{item:!0,xs:6},r.a.createElement(Ha,{variables:l.variables,instrumentId:n,ccQuestionId:l.id})),r.a.createElement(rt.a,{item:!0,xs:6},r.a.createElement(Ya,{topicId:m,instrumentId:n,ccQuestionId:l.id})))))},Ya=e=>{const t=e.topicId,a=e.instrumentId,n=e.ccQuestionId,l=Object(i.b)(),s=Object(i.c)(e=>e.topics),c=Object(v.a)(e=>({root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}})),o=(e,t,r)=>{l(le.topic.set(a,n,e.target.value))};return Object(Nt.isEmpty)(s)?"Fetching topics":Object(Nt.isNil)(t)?r.a.createElement("div",null,r.a.createElement(Qa.a,{className:c.formControl},r.a.createElement(Ua.a,{htmlFor:"grouped-native-select"},"Topic"),r.a.createElement(za.a,{native:!0,id:"grouped-native-select",onChange:o},r.a.createElement("option",{"aria-label":"None",value:""}),Object.values(s).map(e=>r.a.createElement("option",{key:e.id,value:e.id},1===e.level?e.name:"--"+e.name))))):r.a.createElement("div",null,r.a.createElement(Qa.a,{className:c.formControl},r.a.createElement(Ua.a,{htmlFor:"grouped-native-select"},"Topic"),r.a.createElement(za.a,{native:!0,defaultValue:t,id:"grouped-native-select",onChange:o},r.a.createElement("option",{"aria-label":"None",value:""}),Object.values(s).map(e=>r.a.createElement("option",{key:e.id,value:e.id},1===e.level?e.name:"--"+e.name)))))},Ha=e=>{const t=e.variables,a=e.instrumentId,n=e.ccQuestionId,l=Object(i.b)(),s=Object(i.c)(e=>e.variables),c=Object(Nt.get)(s,a,{});var o=[];const m=(e,r,s)=>{switch(s){case"select-option":if(o=r.filter(e=>!t.includes(e)),!Object(Nt.isEmpty)(o))return c=o.map(e=>e.name).join(","),void l(le.variables.add(a,n,c));break;case"remove-option":if(o=t.filter(e=>!r.includes(e)),!Object(Nt.isEmpty)(o))return i=o.map(e=>e.id).join(","),void l(le.variables.remove(a,n,i));break;default:return null}var i,c};return Object(Nt.isEmpty)(t)?r.a.createElement("div",null,r.a.createElement(Sa.a,{multiple:!0,id:"tags-outlined",options:Object.values(c),getOptionLabel:e=>e.name,onChange:m,value:[],filterSelectedOptions:!0,renderInput:e=>r.a.createElement(j.a,Object.assign({},e,{variant:"outlined",label:"Variables",placeholder:"Add variable"}))})):r.a.createElement("div",null,r.a.createElement(Sa.a,{multiple:!0,id:"tags-outlined",options:Object.values(c),getOptionLabel:e=>e.name,onChange:m,value:t,getOptionSelected:(e,t)=>e.id===t.id,filterSelectedOptions:!0,renderInput:e=>r.a.createElement(j.a,Object.assign({},e,{variant:"outlined",label:"Variables",placeholder:"Add variable"}))}))},Ja=e=>{const t=e.instrumentId;var a=e.title;const n=Wa(),l=r.a.useState(!0),s=Object(p.a)(l,2),i=s[0],c=s[1];var o=Ba(t,e.type,e.id);return a=Object(Nt.get)(o,"literal",e.title),r.a.createElement(tt.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:n.root},r.a.createElement(ut.a,{button:!0,onClick:()=>{c(!i)}},r.a.createElement(bt.a,{primary:a}),i?r.a.createElement(Rt.a,null):r.a.createElement(At.a,null)),!Object(Nt.isEmpty)(o.children)&&r.a.createElement(xt.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(tt.a,{component:"div",disablePadding:!0},o.children.map(e=>r.a.createElement(ut.a,{button:!0,className:n.nested},function(){switch(e.type){case"CcSequence":return r.a.createElement(Xa,{instrumentId:t,id:e.id,type:e.type,title:e.type,children:Object(Nt.get)(e,"children",[])});case"CcQuestion":return r.a.createElement(Fa,{instrumentId:t,id:e.id,type:e.type});case"CcCondition":return r.a.createElement(Ja,{instrumentId:t,id:e.id,type:e.type});default:return console.log(e),null}}())))))},Xa=e=>{const t=e.instrumentId;var a=e.title;const n=Wa(),l=r.a.useState(!0),s=Object(p.a)(l,2),i=s[0],c=s[1];var o=Ba(t,e.type,e.id);return a=Object(Nt.get)(o,"label",e.title),r.a.createElement(tt.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:n.root},r.a.createElement(ut.a,{button:!0,onClick:()=>{c(!i)}},r.a.createElement(bt.a,{primary:a}),i?r.a.createElement(Rt.a,null):r.a.createElement(At.a,null)),!Object(Nt.isEmpty)(o.children)&&r.a.createElement(xt.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(tt.a,{component:"div",disablePadding:!0},o.children.map(e=>function(){switch(e.type){case"CcSequence":return r.a.createElement(ut.a,{button:!0,className:n.nested},r.a.createElement(Xa,{instrumentId:t,id:e.id,type:e.type,title:e.type,children:Object(Nt.get)(e,"children",[])}));case"CcQuestion":return r.a.createElement(ut.a,{button:!0,className:n.nested},r.a.createElement(Fa,{instrumentId:t,id:e.id,type:e.type}));case"CcCondition":return r.a.createElement(ut.a,{button:!0,className:n.nested},r.a.createElement(Ja,{instrumentId:t,id:e.id,type:e.type}));default:return null}}()))))};var Ka=e=>{const t=Object(i.b)(),a=Object(Nt.get)(e,"match.params.instrument_id",""),l=Object(i.c)(e=>Object(Nt.get)(e.instruments,a)),s=Object(i.c)(e=>e.cc_sequences),c=Object(Nt.get)(s,a,{});Object(n.useEffect)(()=>{t(P(a)),t(B.all(a)),t(H.all(a)),t(ae.all(a)),t(le.all(a)),t(me.all(a)),t(pe.all(a)),t(De(a)),t(qe())},[]);const o=Object(Nt.isEmpty)(c)?void 0:Object.values(c).find(e=>1==e.top);return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Maps",instrumentId:a},r.a.createElement(Na,{instrument:l,mode:"map"}),Object(Nt.isNil)(o)?r.a.createElement($e.a,{m:"auto"},r.a.createElement(Oa.a,{color:"#009de6"})):r.a.createElement(Xa,{instrumentId:a,type:"CcSequence",id:o.children[0].id,title:o.children[0].label,children:o.children[0].children})))},$a=a(419);const Za=Object(v.a)(e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},control:{width:"100%",padding:e.spacing(2)}}));var en=e=>{const t=Object(i.b)(),a=Za(),l=Object(Nt.get)(e,"match.params.instrument_id",""),s=Object(i.c)(e=>Object(Nt.get)(e.instruments,l)),o=Object(i.c)(e=>Object(Nt.get)(e.instrumentStats,l,{})),u=Object(Nt.get)(o,"stats",{}),p=u.categories,b=void 0===p?0:p,E=u.code_lists,O=void 0===E?0:E,j=u.response_domain_datetimes,y=void 0===j?0:j,h=u.response_domain_numerics,g=void 0===h?0:h,v=u.response_domain_texts,I=void 0===v?0:v,_=u.question_items,S=void 0===_?0:_,D=u.question_grids,N=void 0===D?0:D,T=u.instructions,f=void 0===T?0:T,w=u.cc_conditions,C=void 0===w?0:w,x=u.cc_loops,q=void 0===x?0:x,R=u.cc_questions,L=void 0===R?0:R,A=u.cc_sequences,M=void 0===A?0:A,Q=u.cc_statements,U=void 0===Q?0:Q;Object(n.useEffect)(()=>{t(P(l)),t(k(l))},[]);const z=e=>{const t=e.label,a=e.value;return r.a.createElement(ut.a,null,r.a.createElement(bt.a,{primary:t}),r.a.createElement($a.a,null,r.a.createElement(ka.a,{label:a})))};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:l,instrumentId:l},r.a.createElement(Na,{instrument:s,mode:"build"}),r.a.createElement(rt.a,{container:!0,spacing:3},r.a.createElement(rt.a,{item:!0,xs:6},r.a.createElement(lt.a,{className:a.control},r.a.createElement("h2",null,r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.codeLists.all,{instrument_id:l})},"Code Lists")),r.a.createElement(tt.a,{dense:!0},r.a.createElement(z,{label:"Categories",value:b}),r.a.createElement(z,{label:"Code Lists",value:O})))),r.a.createElement(rt.a,{item:!0,xs:6},r.a.createElement(lt.a,{className:a.control},r.a.createElement("h2",null,r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.responseDomains.all,{instrument_id:l})},"ResponseDomains")),r.a.createElement(tt.a,{dense:!0},r.a.createElement(z,{label:"Datetime Answers",value:y}),r.a.createElement(z,{label:"Numberic Answers",value:g}),r.a.createElement(z,{label:"Text Answers",value:I})))),r.a.createElement(rt.a,{item:!0,xs:6},r.a.createElement(lt.a,{className:a.control},r.a.createElement("h2",null,r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.questionItems.all,{instrument_id:l})},"Questions")),r.a.createElement(tt.a,{dense:!0},r.a.createElement(z,{label:"Question Items",value:S}),r.a.createElement(z,{label:"Question Grids",value:N}),r.a.createElement(z,{label:"Instructions",value:f})))),r.a.createElement(rt.a,{item:!0,xs:6},r.a.createElement(lt.a,{className:a.control},r.a.createElement("h2",null,r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.constructs.show,{instrument_id:l})},"Constructs")),r.a.createElement(tt.a,{dense:!0},r.a.createElement(z,{label:"Conditions",value:C}),r.a.createElement(z,{label:"Loops",value:q}),r.a.createElement(z,{label:"Questions",value:L}),r.a.createElement(z,{label:"Sequences",value:M}),r.a.createElement(z,{label:"Statements",value:U})))))))};const tn=e=>{const t=e.instrumentId,a=e.id,n=e.action,l=e.onDelete,s=void 0===l?()=>{console.log("No delete callback provided")}:l,c=Object(i.b)();return Object(Nt.isNil)(a)?"":r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"secondary",onClick:()=>{!Object(Nt.isNil)(a)&&window.confirm("Are you sure you want to delete this?")&&c(n.delete(t,a,s))}},"Delete"))},an=(e,t)=>{if(!e)return t;const a=Object.keys(e).reduce((a,n)=>(t[n]instanceof Date||Array.isArray(t[n])?a[n]=t[n]:"object"===typeof t[n]&&null!==t[n]?a[n]=an(e[n],t[n]):a[n]="undefined"===typeof t[n]?null:t[n],a),{});return Object(Nt.merge)(a,t)};var nn=a(37),rn=a(57),ln=a(19);const sn=Object(v.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Ct("condition"))}}),cn=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.c,{label:"Literal",name:"literal",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.c,{label:"Logic",name:"logic",margin:"none",required:!0})}],on=e=>{const t=e.ccCondition,a=e.instrumentId,n=e.onChange,l=e.path,s=e.onDelete,c=Object(i.b)(),o=sn(),m=Wt(t.id||"new","CcCondition");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"CcCondition"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?c(ae.create(a,e,t=>{n({node:Object(_.a)(Object(_.a)({},e),t),path:l})})):(c(ae.update(a,t.id,e)),n({node:e,path:l}))},initialValues:t,validate:e=>((e,t)=>{const a={};return t.errors?Object.keys(t.errors).map(n=>{(Object(Nt.isNil)(e[n])||""==e[n])&&(a[n]=t.errors[n][0])}):e.label||(a.label="Required"),a})(e,m),mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:i,form:c,submitting:m,values:d})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16},className:o.paper},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},cn.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:c.reset,disabled:m||i},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:m},"Submit")),r.a.createElement(tn,{id:d.id,instrumentId:a,action:ae,onDelete:()=>{s({path:l})}}))))}))};var mn=a(154),dn=a(417);const un=Object(v.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Ct("question"))}}),pn=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{type:"select",size:12,field:e=>r.a.createElement(ln.b,{name:"question_type",label:"Type",formControlProps:{margin:"none"}},r.a.createElement(dn.a,null),r.a.createElement(dn.a,{value:"QuestionItem"},"Item"),r.a.createElement(dn.a,{value:"QuestionGrid"},"Grid"))}],bn=e=>{const t=e.ccQuestion,a=e.instrumentId,l=e.onChange,s=e.path,c=e.onDelete,o=Object(i.c)(e=>e.cc_questions),m=(Object(Nt.get)(o,a,{}),Object(i.c)(e=>e.questionItems)),d=Object(Nt.get)(m,a,{}),u=Object(i.c)(e=>e.questionGrids),b=Object(Nt.get)(u,a,{}),j=Object(i.c)(e=>e.response_units),y=Object(Nt.get)(j,a,{}),h=Object(n.useState)("QuestionGrid"===t.question_type?b:d),g=Object(p.a)(h,2),v=g[0],I=g[1],S=Object(i.b)(),D=un(),N=Wt(t.id||"new","CcQuestion");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"CcQuestion"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?S(le.create(a,e,t=>{l({node:Object(_.a)(Object(_.a)({},e),t),path:s})})):(S(le.update(a,t.id,e)),l({node:e,path:s}))},initialValues:t,validate:e=>((e,t)=>{const a={};return t.errors?Object.keys(t.errors).map(n=>{var r=["response_unit","question"].includes(n)?"".concat(n,"_id"):n;if(Object(Nt.isNil)(e[r])||""==e[r])return a[r]=t.errors[n][0]}):e.label||(a.label="Required"),a})(e,N),mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:l,form:i,submitting:o,values:m})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16},className:D.paper},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},pn.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)),r.a.createElement(mn.a,{name:"question_type"},(e,t)=>{I("QuestionGrid"===e?b:d),m.question_id=null}),r.a.createElement(rt.a,{item:!0,xs:"12",key:"question"},r.a.createElement(ln.b,{name:"question_id",label:"Question",formControlProps:{margin:"none"}},r.a.createElement(dn.a,null),Object.values(v).map((e,t)=>r.a.createElement(dn.a,{value:e.id},e.label)))),r.a.createElement(rt.a,{item:!0,xs:"12",key:"response_unit_id"},r.a.createElement(ln.b,{name:"response_unit_id",label:"Interviewee",formControlProps:{margin:"none"}},r.a.createElement(dn.a,null),Object.values(y).map((e,t)=>r.a.createElement(dn.a,{value:e.id},e.label)))),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:i.reset,disabled:o||l},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:o},"Submit")),r.a.createElement(tn,{id:m.id,instrumentId:a,action:le,onDelete:()=>{c({path:s})}}))))}))},En=Object(v.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Ct("statement"))}}),On=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!1})},{size:12,field:r.a.createElement(ln.c,{label:"Literal",name:"literal",margin:"none",required:!1})}],jn=e=>{const t=e.ccStatement,a=e.instrumentId,n=e.onChange,l=e.path,s=e.onDelete,c=Object(i.b)(),o=En(),m=Wt(t.id||"new","CcStatement");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"CcStatement"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?c(H.create(a,e,t=>{n({node:Object(_.a)(Object(_.a)({},e),t),path:l})})):(c(H.update(a,t.id,e)),n({node:e,path:l}))},initialValues:t,validate:e=>((e,t)=>{const a={};return t.errors?Object.keys(t.errors).map(n=>{(Object(Nt.isNil)(e[n])||""==e[n])&&(a[n]=t.errors[n][0])}):e.label||(a.label="Required"),a})(e,m),mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:i,form:c,submitting:m,values:d})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16},className:o.paper},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},On.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:c.reset,disabled:m||i},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:m},"Submit")),r.a.createElement(tn,{id:d.id,instrumentId:a,action:H,onDelete:()=>{s({path:l})}}))))}))},yn=Object(v.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Ct("sequence"))}}),hn=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})}],gn=e=>{const t=e.ccSequence,a=e.instrumentId,n=e.onChange,l=e.path,s=e.onDelete,c=Object(i.b)(),o=yn(),m=Wt(t.id||"new","CcSequence");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"CcSequence"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?c(B.create(a,e,t=>{n({node:Object(_.a)(Object(_.a)({},e),t),path:l})})):(c(B.update(a,t.id,e)),n({node:e,path:l}))},initialValues:t,validate:e=>((e,t)=>{const a={};return t.errors?Object.keys(t.errors).map(n=>{(Object(Nt.isNil)(e[n])||""==e[n])&&(a[n]=t.errors[n][0])}):e.label||(a.label="Required"),a})(e,m),mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:i,form:c,submitting:m,values:d})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16},className:o.paper},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},hn.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:c.reset,disabled:m||i},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:m},"Submit")),r.a.createElement(tn,{id:d.id,instrumentId:a,action:B,onDelete:()=>{s({path:l})}}))))}))},vn=Object(v.a)({table:{minWidth:650},paper:{boxShadow:"5px 5px 15px 5px  #".concat(Ct("loop"))}}),In=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.c,{label:"Variable",name:"loop_var",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.c,{label:"Start Value",name:"start_val",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.c,{label:"End Value",name:"end_val",margin:"none"})},{size:12,field:r.a.createElement(ln.c,{label:"Loop While",name:"loop_while",margin:"none"})}],_n=e=>{const t=e.ccLoop,a=e.instrumentId,n=e.onChange,l=e.path,s=e.onDelete,c=Object(i.b)(),o=vn(),m=Wt(t.id||"new","CcLoop");return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"CcLoop"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?c(K.create(a,e,t=>{n({node:Object(_.a)(Object(_.a)({},e),t),path:l})})):(c(K.update(a,t.id,e)),n({node:e,path:l}))},initialValues:t,validate:e=>((e,t)=>{const a={};return t.errors?Object.keys(t.errors).map(n=>{(Object(Nt.isNil)(e[n])||""==e[n])&&(a[n]=t.errors[n][0])}):(e.label||(a.label="Required"),e.start_val||(a.start_val="Required"),e.loop_var||(a.loop_var="Required")),a})(e,m),mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:i,form:c,submitting:m,values:d})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16},className:o.paper},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},In.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field([]):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:c.reset,disabled:m||i},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:m},"Submit")),r.a.createElement(tn,{id:d.id,instrumentId:a,action:K,onDelete:()=>{s({path:l})}}))))}))};var Sn=a(161),Dn=a.n(Sn),Nn=a(253),Tn=a.n(Nn),fn=a(105);a(349);const wn=(e,t,a,n=!1)=>{var r,l=qn(e,t,a);if("condition"===l.type){r=Object(Nt.get)(l,"children",[]);var s=Object(Nt.get)(l,"fchildren",[]),i=[{title:"True",expanded:n,conditionId:l.id,type:"conditionTrue",children:r.map(t=>wn(e,t.type,t.id))},{title:"False",expanded:n,conditionId:l.id,type:"conditionFalse",children:s.map(t=>wn(e,t.type,t.id))}];return Object(_.a)(Object(_.a)({},l),{title:"".concat(l.label),expanded:n,type:l.type,children:i})}return r=Object(Nt.get)(l,"children",[]),Object(_.a)(Object(_.a)({},l),{title:"".concat(l.label),expanded:n,type:l.type,children:r.map(t=>wn(e,t.type,t.id))})},Cn=e=>{const t=e.topSequence,a=e.instrumentId,l=e.dispatch,s=e.onNodeSelect,i=Object(n.useState)([wn(a,"CcSequence",t.id,!0)]),c=Object(p.a)(i,2),o=c[0],m=c[1],d=Object(n.useState)({}),u=Object(p.a)(d,2),b=u[0],O=u[1],j=xn(),y=Object(n.useState)(),h=Object(p.a)(y,2),g=h[0],v=h[1],I=Object(n.useState)(),S=Object(p.a)(I,2),D=S[0],N=S[1],T=Object(n.useState)(),f=Object(p.a)(T,2),w=f[0],C=f[1],x=({treeIndex:e})=>e,q=e=>"sequence"===e.type||"loop"===e.type||"conditionTrue"===e.type||"conditionFalse"===e.type,R=e=>{m(Object(fn.f)({treeData:o,expanded:e}))},L=e=>{l(Q(a,(e=>Object(fn.d)({treeData:e,getNodeKey:({node:e})=>({id:e.id,type:e.type,children:e.children.map(e=>"type ".concat(e.type," id ").concat(e.id))}),ignoreCollapsed:!1}).map(({node:e,path:t})=>{if(["conditionTrue","conditionFalse"].includes(e.type))return null;let a=t[t.length-2],n=void 0!==a&&"conditionFalse"===a.type?1:0;return void 0!==a&&["conditionTrue","conditionFalse"].includes(a.type)&&(a=t[t.length-3]),{id:e.id,type:e.type,position:void 0!==a?a.children.indexOf("type ".concat(e.type," id ").concat(e.id))+1:e.position,branch:n,parent:void 0!==a?{id:a.id,type:a.type}:{}}}).filter(e=>null!=e))(e)))},A=(e,t)=>{var a=[];return q(e)&&a.push(r.a.createElement("button",{onClick:e=>{m(Object(fn.a)({treeData:o,parentKey:t[t.length-1],expandParent:!0,getNodeKey:x,newNode:{title:"Click to select construct type",children:[]}}).treeData),e.stopPropagation(),O({node:{type:void 0}})}},r.a.createElement(Dn.a,null))),a};return r.a.createElement("div",{style:{height:1e4}},r.a.createElement(Tn.a,{placeholder:"Search (press return to perform search)",onRequestSearch:e=>v(e),onCancelSearch:()=>{v()}}),0===w&&!Object(Nt.isNil)(g)&&r.a.createElement(Vt.a,{severity:"error"},r.a.createElement(Gt.a,null,"Error"),"No results found."),w>0&&!Object(Nt.isNil)(g)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"\xa0",w>0?D+1:0,"\xa0of\xa0",w||0," matches"),r.a.createElement(ma.a,{color:"primary","aria-label":"outlined primary button group"},r.a.createElement(E.a,{onClick:()=>N(null!==D?(w+D-1)%w:w-1)},"< Prev"),r.a.createElement(E.a,{onClick:()=>N(null!==D?(D+1)%w:0)},"> Next"))),r.a.createElement(at.a,{className:j.divider}),r.a.createElement(ma.a,{color:"primary","aria-label":"outlined primary button group"},r.a.createElement(E.a,{onClick:()=>{R(!0)},startIcon:r.a.createElement(At.a,null)},"Expand All"),r.a.createElement(E.a,{onClick:()=>{R(!1)},startIcon:r.a.createElement(Rt.a,null)},"Collapse All")),r.a.createElement(fn.c,{treeData:o,onChange:e=>{m(e),L(e)},canNodeHaveChildren:e=>q(e),canDrop:({node:e,nextParent:t,prevPath:a,nextPath:n})=>!!q(t),canDrag:({node:e})=>!["conditionTrue","conditionFalse"].includes(e.type),searchMethod:({node:e,searchQuery:t})=>t&&e.title.toLowerCase().indexOf(t.toLowerCase())>-1,searchQuery:g,searchFocusOffset:D,searchFinishCallback:e=>{C(e.length),N(e.length>0?D%e.length:0)},generateNodeProps:({node:e,path:t})=>({style:{boxShadow:e===b||"sequence"==e.type?"0px 0px 15px 3px  #".concat(Ct(e.type)):""},onClick:()=>{s({node:e,path:t,callback:({node:e,path:t})=>{(({node:e,path:t})=>{var a,n=Object(fn.b)({treeData:o,path:t,getNodeKey:x,newNode:(a=e,Object(_.a)(Object(_.a)({},a),{title:"".concat(a.label),expanded:!0,type:a.type}))});m(n),L(n)})({node:e,path:t})},deleteCallback:({path:e})=>{(({path:e})=>{s({}),m(Object(fn.e)({treeData:o,path:e,getNodeKey:x}))})({path:e})}}),O(e)},buttons:A(e,t),className:"".concat(e.type,":").concat(e.id)})}))},xn=Object(v.a)(e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},control:{width:"100%",padding:e.spacing(2)},main:{"min-height":"1200px"},side:{position:"absolute",width:"50%",right:"5px"},nested:{paddingLeft:e.spacing(4)},paper:{boxShadow:"5px 5px 10px 5px  #".concat(Ct("default"))},statement:{boxShadow:"2px 2px 7px 2px  #".concat(Ct("statement")),"margin-bottom":"10px"},sequence:{boxShadow:"2px 2px 7px 2px  #".concat(Ct("sequence")),"margin-bottom":"10px"},question:{boxShadow:"2px 2px 7px 2px  #".concat(Ct("question")),"margin-bottom":"10px"},loop:{boxShadow:"2px 2px 7px 2px  #".concat(Ct("loop")),"margin-bottom":"10px"},condition:{boxShadow:"2px 2px 7px 2px  #".concat(Ct("condition")),"margin-bottom":"10px"},divider:{margin:"25px"}})),qn=(e,t,a)=>{const n=Object(i.c)(e=>e.cc_sequences),r=Object(Nt.get)(n,e,{}),l=Object(i.c)(e=>e.cc_statements),s=Object(Nt.get)(l,e,{}),c=Object(i.c)(e=>e.cc_conditions),o=Object(Nt.get)(c,e,{}),m=Object(i.c)(e=>e.cc_loops),d=Object(Nt.get)(m,e,{}),u=Object(i.c)(e=>e.cc_questions),p=Object(Nt.get)(u,e,{}),b=Object(i.c)(e=>e.questionItems),E=Object(Nt.get)(b,e,{}),O=Object(i.c)(e=>e.questionGrids),j=Object(Nt.get)(O,e,{});var y={children:[]};return"CcLoop"===t&&((y=Object(Nt.get)(d,a.toString(),{})).type="loop"),"CcSequence"===t&&((y=Object(Nt.get)(r,a.toString(),{})).type="sequence"),"CcStatement"===t&&((y=Object(Nt.get)(s,a.toString(),{})).type="statement"),"CcCondition"===t&&((y=Object(Nt.get)(o,a.toString(),{})).type="condition"),"CcQuestion"===t&&("QuestionItem"===(y=Object(Nt.get)(p,a.toString(),{})).question_type?y.question=Object(Nt.get)(E,y.question_id.toString(),{}):"QuestionGrid"===y.question_type&&(y.question=Object(Nt.get)(j,y.question_id.toString(),{})),y.type="question"),y},Rn=e=>{const t=e.object,a=e.instrumentId,n=e.onNodeSelect,l=t.node,s=void 0===l?{}:l,i=t.path,c=t.callback,o=void 0===c?e=>{console.log("No onChange callback provided")}:c,m=t.deleteCallback,d=void 0===m?e=>{console.log("No onDelete callback provided")}:m;switch(s.type){case"question":return r.a.createElement(bn,{ccQuestion:s,instrumentId:a,path:i,onChange:o,onDelete:d});case"statement":return r.a.createElement(jn,{ccStatement:s,instrumentId:a,path:i,onChange:o,onDelete:d});case"sequence":return r.a.createElement(gn,{ccSequence:s,instrumentId:a,path:i,onChange:o,onDelete:d});case"condition":return r.a.createElement(on,{ccCondition:s,instrumentId:a,path:i,onChange:o,onDelete:d});case"loop":return r.a.createElement(_n,{ccLoop:s,instrumentId:a,path:i,onChange:o,onDelete:d});case void 0:return r.a.createElement(Ln,{onNodeSelect:n,object:t});default:return""}},Ln=e=>{const t=e.object,a=e.onNodeSelect,n=xn();return r.a.createElement(lt.a,{style:{padding:16},className:n.paper},r.a.createElement("h3",null,"Select construct type"),r.a.createElement(E.a,{type:"button",variant:"outlined",className:n.question,onClick:()=>{var e=Object(_.a)(Object(_.a)({},t.node),{type:"question"});a(Object(_.a)(Object(_.a)({},t),{node:e}))}},"Question"),r.a.createElement("br",null),r.a.createElement(E.a,{type:"button",variant:"outlined",className:n.condition,onClick:()=>{var e=Object(_.a)(Object(_.a)({},t.node),{type:"condition"});a(Object(_.a)(Object(_.a)({},t),{node:e}))}},"Condition"),r.a.createElement("br",null),r.a.createElement(E.a,{type:"button",variant:"outlined",className:n.loop,onClick:()=>{var e=Object(_.a)(Object(_.a)({},t.node),{type:"loop"});a(Object(_.a)(Object(_.a)({},t),{node:e}))}},"Loop"),r.a.createElement("br",null),r.a.createElement(E.a,{type:"button",variant:"outlined",className:n.sequence,onClick:()=>{var e=Object(_.a)(Object(_.a)({},t.node),{type:"sequence"});a(Object(_.a)(Object(_.a)({},t),{node:e}))}},"Sequence"),r.a.createElement("br",null),r.a.createElement(E.a,{type:"button",variant:"outlined",className:n.statement,onClick:()=>{var e=Object(_.a)(Object(_.a)({},t.node),{type:"statement"});a(Object(_.a)(Object(_.a)({},t),{node:e}))}},"Statement"))};var An=e=>{const t=xn(),a=Object(i.b)(),l=Object(Nt.get)(e,"match.params.instrument_id",""),s=Object(i.c)(e=>Object(Nt.get)(e.instruments,l)),c=Object(i.c)(e=>e.cc_sequences),o=Object(Nt.get)(c,l,null),m=Object(n.useState)({}),d=Object(p.a)(m,2),u=d[0],b=d[1],E=Object(n.useState)(!1),O=Object(p.a)(E,2),j=O[0],y=O[1];Object(n.useEffect)(()=>{Promise.all([a(P(l)),a(B.all(l)),a(H.all(l)),a(ae.all(l)),a(K.all(l)),a(le.all(l)),a(me.all(l)),a(pe.all(l)),a(ee(l))]).then(()=>{y(!0)})},[]);const h=Object(Nt.isEmpty)(o)||Object(Nt.isNil)(o)?void 0:Object.values(o).find(e=>1==e.top);return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:"Build",instrumentId:l},r.a.createElement("h1",null,Object(Nt.get)(s,"label")),j?r.a.createElement(rt.a,{container:!0,spacing:3,className:t.main},r.a.createElement(rt.a,{item:!0,xs:(Object(Nt.isEmpty)(u),12)},r.a.createElement(Cn,{topSequence:h.children[0],instrumentId:l,onNodeSelect:b,dispatch:a})),!Object(Nt.isEmpty)(u)&&r.a.createElement(rt.a,{item:!0,xs:4,className:t.side},r.a.createElement(Rn,{object:u,instrumentId:l,onNodeSelect:b}))):r.a.createElement(ja,null)))},Mn=a(422),Pn=a(113),kn=a.n(Pn),Qn=a(162),Un=a.n(Qn);const zn=Object(v.a)({table:{minWidth:650}}),Vn=e=>{const t={};return e.label||(t.label="Required"),t},Gn=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.a,{name:"rd",formControlProps:{margin:"none"},data:{label:"Response Domain",value:!0}})},{size:12,visible:e=>Object(Nt.get)(e,"rd",!1),field:r.a.createElement(ln.c,{name:"min_responses",multiline:!0,label:"Min Responses",margin:"none"})},{size:12,visible:e=>Object(Nt.get)(e,"rd",!1),field:r.a.createElement(ln.c,{name:"max_responses",multiline:!0,label:"Max Responses",margin:"none"})}],Wn=e=>{const t=e.item,a=e.values;return void 0===t.visible||t.visible(a)?t.type&&"select"===t.type?t.field():t.field:""},Bn=e=>{const t=e.codeList,a=e.instrumentId,n=Object(i.c)(e=>Object(Nt.get)(e.categories,a,{})),l=Object(i.b)(),s=zn();return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"CodeList"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?l(V.create(a,e)):l(V.update(a,t.id,e))},initialValues:t,validate:Vn,mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:l,pop:i}},pristine:o,form:u,submitting:p,values:b})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16}},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},Gn.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},r.a.createElement(Wn,{item:e,values:b}))),r.a.createElement("h3",null,"Codes"),r.a.createElement(Un.a,{onClick:()=>l("codes",{})}),r.a.createElement(Mn.a,{component:lt.a},r.a.createElement(ta.a,{className:s.table,"aria-label":"simple table"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,{size:"small"},"Value"),r.a.createElement(na.a,null,"Label"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,r.a.createElement(rn.a,{name:"codes"},({fields:e})=>e.map((t,a)=>r.a.createElement(la.a,{key:t},r.a.createElement(na.a,null,e.value[a].id),r.a.createElement(na.a,{size:"small"},r.a.createElement(ln.c,{name:"".concat(t,".value"),multiline:!0,label:"Value",margin:"none"})),r.a.createElement(na.a,null,r.a.createElement(Sa.a,{freesolo:"true",options:Object.values(n),getOptionLabel:e=>e.label,onChange:(t,n,r)=>{Object(Nt.isNil)(n)?e.update(a,Object(_.a)(Object(_.a)({},e.value[a]),{category_id:null,label:null})):e.update(a,Object(_.a)(Object(_.a)({},e.value[a]),{category_id:n.id,label:n.label}))},value:{id:e.value[a].category_id,label:e.value[a].label},getOptionSelected:(e,t)=>e.id===t.id,renderInput:e=>r.a.createElement(ln.c,Object.assign({name:"".concat(t,".label")},e,{variant:"outlined",label:"Label",placeholder:"label"}))})),r.a.createElement(na.a,null,r.a.createElement("span",{onClick:()=>e.remove(a),style:{cursor:"pointer"}},r.a.createElement(kn.a,null))))))))),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:u.reset,disabled:p||o},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:p},"Submit")),r.a.createElement(tn,{id:b.id,instrumentId:a,action:V})),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement("h3",null,"Used By"),r.a.createElement(Mn.a,{component:lt.a},r.a.createElement(ta.a,{className:s.table,"aria-label":"simple table"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"ID"),r.a.createElement(na.a,{size:"small"},"Question Type"),r.a.createElement(na.a,null,"Label"))),r.a.createElement(aa.a,null,t.used_by.map(e=>r.a.createElement(la.a,{key:e.id},r.a.createElement(na.a,null,r.a.createElement(E.a,{variant:"outlined"},r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.questionItems.show,{instrument_id:a,questionItemId:e.id})},e.id))),r.a.createElement(na.a,{size:"small"},e.type),r.a.createElement(na.a,{size:"small"},e.label)))))))))}))},Fn=e=>{const t=e.objectTypes,a=void 0===t?[]:t,n=e.instrumentId,l=e.callback,s=void 0===l?()=>{}:l,i=Object(o.g)(),c=a.map(e=>((e,t)=>{switch(e){case"ResponseDomainNumeric":return{path:Object(m.reverse)(d.instruments.instrument.build.responseDomains.show,{instrument_id:t,responseDomainType:e,responseDomainId:"new"}),text:"Numeric"};case"ResponseDomainText":return{path:Object(m.reverse)(d.instruments.instrument.build.responseDomains.show,{instrument_id:t,responseDomainType:e,responseDomainId:"new"}),text:"Text"};case"ResponseDomainDatetime":return{path:Object(m.reverse)(d.instruments.instrument.build.responseDomains.show,{instrument_id:t,responseDomainType:e,responseDomainId:"new"}),text:"Datetime"};case"CodeList":return{path:Object(m.reverse)(d.instruments.instrument.build.codeLists.show,{instrument_id:t,codeListId:"new"}),text:"New CodeList"};case"QuestionItem":return{path:Object(m.reverse)(d.instruments.instrument.build.questionItems.show,{instrument_id:t,questionItemId:"new"}),text:"Question Item"};case"QuestionGrid":return{path:Object(m.reverse)(d.instruments.instrument.build.questionGrids.show,{instrument_id:t,questionGridId:"new"}),text:"Question Grid"};default:return{path:"/",text:"Not found"}}})(e,n));return r.a.createElement(ma.a,{color:"primary","aria-label":"outlined primary button group"},c.map(e=>r.a.createElement(E.a,{onClick:()=>{var t;t=e.path,i.push(t),s("new")},startIcon:r.a.createElement(Dn.a,null)},e.text)))},Yn=Object(v.a)(e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},side:{position:"absolute",width:"50%"},control:{width:"100%",padding:e.spacing(2)}}));var Hn=e=>{let t=Object(o.g)();const a=Object(i.b)(),l=Yn(),s=Object(Nt.get)(e,"match.params.codeListId",null),c=Object(Nt.get)(e,"match.params.instrument_id",""),u=Object(i.c)(e=>Object(Nt.get)(e.codeLists,c,{})),p=Object(Nt.get)(u,s,{used_by:[]});Object(n.useEffect)(()=>{a(V.all(c)),a(U(c))},[]);const b=e=>{const t=e.label,a=e.value,n=e.id;return r.a.createElement(ut.a,null,r.a.createElement(bt.a,{primary:t,onClick:()=>{E(n)}}),r.a.createElement($a.a,null,r.a.createElement(ka.a,{label:a})))},E=e=>{const a=Object(m.reverse)(d.instruments.instrument.build.codeLists.show,{instrument_id:c,codeListId:e});t.push(a)};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:c,instrumentId:c},r.a.createElement(rt.a,{container:!0,spacing:3},r.a.createElement(rt.a,{item:!0,xs:4},r.a.createElement(lt.a,{className:l.control},r.a.createElement("h2",null,"Code Lists"),r.a.createElement(Fn,{instrumentId:c,objectTypes:["CodeList"]}),r.a.createElement(tt.a,{dense:!0},Object.values(u).map(e=>r.a.createElement(b,{label:e.label,value:e.used_by.length,id:e.id}))))),r.a.createElement(rt.a,{item:!0,xs:8},r.a.createElement(lt.a,{className:l.side},!Object(Nt.isNil)(p)&&r.a.createElement(Bn,{codeList:p,instrumentId:c}))))))};const Jn=Object(v.a)({table:{minWidth:650}}),Xn=e=>{const t={};return e.label||(t.label="Required"),t},Kn=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.c,{label:"Instruction",name:"instruction",margin:"none"})},{size:12,field:r.a.createElement(ln.c,{label:"Literal",name:"literal",margin:"none",required:!0})}],$n=e=>{const t=e.questionItem,a=e.instrumentId,l=(Object(i.c)(e=>Object(Nt.get)(e.categories,a,{})),Object(i.b)()),s=Jn(),c=Object(i.c)(e=>Object(Nt.get)(e.responseDomainNumerics,a,{})),o=Object(i.c)(e=>Object(Nt.get)(e.responseDomainTexts,a,{})),m=Object(i.c)(e=>Object(Nt.get)(e.responseDomainDatetimes,a,{})),d=[...Object.values(c),...Object.values(o),...Object.values(m)];return Object(n.useEffect)(()=>{l(Oe.all(a)),l(he.all(a)),l(Ie.all(a))},[]),r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"QuestionItem"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?l(me.create(a,e)):l(me.update(a,t.id,e))},initialValues:t,validate:Xn,mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:l,form:i,submitting:c,values:o})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16}},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},Kn.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.field)),r.a.createElement("h3",null,"Response Domains"),r.a.createElement(Un.a,{onClick:()=>t("rds",{})}),r.a.createElement(Mn.a,{component:lt.a},r.a.createElement(ta.a,{className:s.table,"aria-label":"simple table"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"Type and Label"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,r.a.createElement(rn.a,{name:"rds"},({fields:e})=>e.map((t,a)=>r.a.createElement(la.a,{key:t},r.a.createElement(na.a,null,r.a.createElement(Sa.a,{freesolo:"true",options:Object.values(d),getOptionLabel:e=>"".concat(e.type," - ").concat(e.label),onChange:(t,n,r)=>{Object(Nt.isNil)(n)?e.update(a,Object(_.a)(Object(_.a)({},e.value[a]),{type:null,id:null,label:null})):e.update(a,Object(_.a)(Object(_.a)({},e.value[a]),{type:n.type,id:n.id,label:n.label}))},value:{type:e.value[a].type,id:e.value[a].id,label:e.value[a].label},getOptionSelected:(e,t)=>e.type===t.type&&e.id===t.id,renderInput:e=>r.a.createElement(ln.c,Object.assign({name:"".concat(t,".type - ").concat(t,".label")},e,{variant:"outlined",label:"Label",placeholder:"label"}))})),r.a.createElement(na.a,null,r.a.createElement("span",{onClick:()=>e.remove(a),style:{cursor:"pointer"}},r.a.createElement(kn.a,null))))))))),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:i.reset,disabled:c||l},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:c},"Submit")),r.a.createElement(tn,{id:o.id,instrumentId:a,action:me}))))}))},Zn=Object(v.a)(e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},side:{position:"absolute",width:"50%"},control:{width:"100%",padding:e.spacing(2)}}));var er=e=>{let t=Object(o.g)();const a=Object(i.b)(),l=Zn(),s=Object(Nt.get)(e,"match.params.questionItemId",null),u=Object(Nt.get)(e,"match.params.instrument_id",""),p=Object(i.c)(e=>Object(Nt.get)(e.questionItems,u,{})),b=Object(Nt.get)(p,s,{used_by:[]});Object(n.useEffect)(()=>{a(me.all(u))},[]);const E=e=>{const t=e.label,a=(e.value,e.id);return r.a.createElement(ut.a,null,r.a.createElement(bt.a,{primary:t,onClick:()=>{O(a)}}))},O=e=>{const a=Object(m.reverse)(d.instruments.instrument.build.questionItems.show,{instrument_id:u,questionItemId:e});t.push(a)};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:u,instrumentId:u},r.a.createElement(rt.a,{container:!0,spacing:3},r.a.createElement(rt.a,{item:!0,xs:4},r.a.createElement(lt.a,{className:l.control},r.a.createElement("h2",null,"Question Items ",r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.questionGrids.all,{instrument_id:u})},"Question Grids")),r.a.createElement(Fn,{instrumentId:u,objectTypes:["QuestionItem","QuestionGrid"]}),r.a.createElement(tt.a,{dense:!0},Object.values(p).map(e=>r.a.createElement(E,{label:e.label,id:e.id}))))),r.a.createElement(rt.a,{item:!0,xs:8},r.a.createElement(lt.a,{className:l.side},!Object(Nt.isNil)(b)&&r.a.createElement($n,{questionItem:b,instrumentId:u}))))))};const tr=Object(v.a)({table:{minWidth:650}}),ar=e=>{const t={};return e.label||(t.label="Required"),t},nr=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.c,{label:"Instruction",name:"instruction",margin:"none"})},{size:12,field:r.a.createElement(ln.c,{label:"Literal",name:"literal",margin:"none",required:!0})},{type:"select",size:12,field:e=>r.a.createElement(ln.b,{name:"horizontal_code_list_id",label:"Horizontal Code List (X)",formControlProps:{margin:"none"}},r.a.createElement(dn.a,null),e.map((e,t)=>r.a.createElement(dn.a,{value:e.id},e.label)))},{type:"select",size:12,field:e=>r.a.createElement(ln.b,{name:"vertical_code_list_id",label:"Vertical Code List (Y)",formControlProps:{margin:"none"}},r.a.createElement(dn.a,null),e.map((e,t)=>r.a.createElement(dn.a,{value:e.id},e.label)))},{type:"select",size:12,field:e=>r.a.createElement(ln.b,{name:"corner_label",label:"Corner Label",formControlProps:{margin:"none"}},r.a.createElement(dn.a,null),r.a.createElement(dn.a,{value:"H"},"Horizontal"),r.a.createElement(dn.a,{value:"V"},"Vertical"))},{size:12,field:r.a.createElement(ln.c,{label:"Roster Label",name:"roster_label",margin:"none"})},{size:12,field:r.a.createElement(ln.c,{label:"Roster Row Number",name:"roster_rows",margin:"none"})}],rr=e=>{const t=e.questionGrid,a=e.instrumentId;var l=Object(i.c)(e=>Object(Nt.get)(e.codeLists,a,{}));l=Object.values(l).filter(e=>!1===e.rd);const s=Object(i.b)(),c=tr(),o=Object(i.c)(e=>Object(Nt.get)(e.responseDomainNumerics,a,{})),m=Object(i.c)(e=>Object(Nt.get)(e.responseDomainTexts,a,{})),d=Object(i.c)(e=>Object(Nt.get)(e.responseDomainDatetimes,a,{})),u=[...Object.values(o),...Object.values(m),...Object.values(d)];return Object(n.useEffect)(()=>{s(Oe.all(a)),s(he.all(a)),s(Ie.all(a))},[]),r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"QuestionGrid"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?s(pe.create(a,e)):s(pe.update(a,t.id,e))},initialValues:t,validate:ar,mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:s,form:i,submitting:o,values:m})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16}},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},nr.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field(l):e.field)),r.a.createElement(mn.a,{name:"horizontal_code_list_id"},(e,t)=>{const a=l.find(t=>t.id===e);a&&(m.cols=a.codes.map(e=>({label:e.label,value:e.value,order:e.order})))}),r.a.createElement("h3",null,"Response Domains"),r.a.createElement(Mn.a,{component:lt.a},r.a.createElement(ta.a,{className:c.table,"aria-label":"simple table"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(na.a,null,"Column"),r.a.createElement(na.a,null,"Type and Label"),r.a.createElement(na.a,null,"Actions"))),r.a.createElement(aa.a,null,r.a.createElement(rn.a,{name:"cols"},({fields:e})=>e.map((t,a)=>r.a.createElement(la.a,{key:t},r.a.createElement(na.a,null,e.value[a].label),r.a.createElement(na.a,null,r.a.createElement(Sa.a,{freesolo:"true",options:Object.values(u),getOptionLabel:e=>""===e.type?"":"".concat(e.label," - ").concat(e.type),onChange:(t,n,r)=>{var l;l=Object(Nt.isNil)(n)?Object(_.a)(Object(_.a)({},e.value[a].rd),{type:"",id:null,label:""}):Object(_.a)(Object(_.a)({},e.value[a].rd),{type:n.type,id:n.id,label:n.label}),e.update(a,Object(_.a)(Object(_.a)({},e.value[a]),{rd:l}))},value:e.value[a].rd?{type:e.value[a].rd.type,id:e.value[a].rd.id,label:e.value[a].rd.label}:{type:"",id:null,label:""},getOptionSelected:(e,t)=>e.type===t.type&&e.id===t.id,renderInput:e=>r.a.createElement(ln.c,Object.assign({name:"".concat(t,".type - ").concat(t,".label")},e,{variant:"outlined",label:"Label",placeholder:"label"}))})),r.a.createElement(na.a,null,r.a.createElement("span",{onClick:()=>e.update(a,Object(_.a)(Object(_.a)({},e.value[a]),{rd:{type:"",id:null,label:""}})),style:{cursor:"pointer"}},r.a.createElement(kn.a,null))))))))),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:i.reset,disabled:o||s},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:o},"Submit")),r.a.createElement(tn,{id:m.id,instrumentId:a,action:pe}))))}))},lr=Object(v.a)(e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},side:{position:"absolute",width:"50%"},control:{width:"100%",padding:e.spacing(2)}}));var sr=e=>{let t=Object(o.g)();const a=Object(i.b)(),l=lr(),s=r.a.useState(Object(Nt.get)(e,"match.params.questionGridId",null)),u=Object(p.a)(s,2),b=u[0],E=u[1],O=Object(Nt.get)(e,"match.params.instrument_id",""),j=Object(i.c)(e=>Object(Nt.get)(e.questionGrids,O,{})),y=Object(Nt.get)(j,b,{used_by:[]});Object(n.useEffect)(()=>{a(pe.all(O)),a(V.all(O))},[]);const h=e=>{const t=e.label,a=e.id;return r.a.createElement(ut.a,null,r.a.createElement(bt.a,{primary:t,onClick:()=>{g(a)}}))},g=e=>{const a=Object(m.reverse)(d.instruments.instrument.build.questionGrids.show,{instrument_id:O,questionGridId:e});t.push(a),E(e)};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:O,instrumentId:O},r.a.createElement(rt.a,{container:!0,spacing:3},r.a.createElement(rt.a,{item:!0,xs:4},r.a.createElement(lt.a,{className:l.control},r.a.createElement("h2",null,"Question Grids ",r.a.createElement(c.b,{to:Object(m.reverse)(d.instruments.instrument.build.questionItems.all,{instrument_id:O})},"Question Items")),r.a.createElement(Fn,{instrumentId:O,objectTypes:["QuestionItem","QuestionGrid"],callback:E}),r.a.createElement(tt.a,{dense:!0},Object.values(j).map(e=>r.a.createElement(h,{label:e.label,id:e.id}))))),r.a.createElement(rt.a,{item:!0,xs:8},r.a.createElement(lt.a,{className:l.side},!Object(Nt.isNil)(y)&&r.a.createElement(rr,{questionGrid:y,instrumentId:O}))))))};const ir=Object(v.a)({table:{minWidth:650}}),cr=e=>{const t={};return e.label||(t.label="Required"),e.subtype||(t.subtype="Required"),t},or=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{type:"select",size:12,field:e=>r.a.createElement(ln.b,{name:"subtype",label:"Type",formControlProps:{margin:"none"},required:!0},r.a.createElement(dn.a,null),r.a.createElement(dn.a,{value:"Integer"},"Integer"),r.a.createElement(dn.a,{value:"Float"},"Float"))},{size:12,field:r.a.createElement(ln.c,{label:"Min",name:"min",margin:"none"})},{size:12,field:r.a.createElement(ln.c,{label:"Max",name:"max",margin:"none"})}],mr=e=>{const t=e.responseDomain,a=e.instrumentId,n=Object(i.c)(e=>Object(Nt.get)(e.codeLists,a,{})),l=Object(i.b)();ir();return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"ResponseDomain"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?l(Oe.create(a,e)):l(Oe.update(a,t.id,e))},initialValues:t,validate:cr,mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:l}},pristine:s,form:i,submitting:c,values:o})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16}},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},or.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field(n):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:i.reset,disabled:c||s},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:c},"Submit")),r.a.createElement(tn,{id:o.id,instrumentId:a,action:Oe}))))}))},dr=Object(v.a)({table:{minWidth:650}}),ur=e=>{const t={};return e.label||(t.label="Required"),t},pr=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{size:12,field:r.a.createElement(ln.c,{label:"Max Length",name:"maxlen",margin:"none",required:!0})}],br=e=>{const t=e.responseDomain,a=e.instrumentId,n=Object(i.c)(e=>Object(Nt.get)(e.codeLists,a,{})),l=Object(i.b)();dr();return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"ResponseDomain"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?l(he.create(a,e)):l(he.update(a,t.id,e))},initialValues:t,validate:ur,mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:l}},pristine:s,form:i,submitting:c,values:o})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16}},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},pr.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},e.type&&"select"===e.type?e.field(n):e.field)),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:i.reset,disabled:c||s},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:c},"Submit")),r.a.createElement(tn,{id:o.id,instrumentId:a,action:he}))))}))},Er=Object(v.a)({table:{minWidth:650}}),Or=e=>{const t={};return e.label||(t.label="Required"),e.subtype||(t.subtype="Required"),t},jr=[{size:12,field:r.a.createElement(ln.c,{label:"Label",name:"label",margin:"none",required:!0})},{type:"select",size:12,field:e=>r.a.createElement(ln.b,{name:"subtype",label:"Type",formControlProps:{margin:"none"},required:!0},r.a.createElement(dn.a,{value:"Date"},"Date"),r.a.createElement(dn.a,{value:"Time"},"Time"),r.a.createElement(dn.a,{value:"Duration"},"Duration"))},{size:12,visible:e=>"Duration"===Object(Nt.get)(e,"subtype",""),field:r.a.createElement(ln.c,{label:"Format",name:"format",margin:"none"})}],yr=e=>{const t=e.item,a=e.values;return void 0===t.visible||t.visible(a)?t.type&&"select"===t.type?t.field():t.field:""},hr=e=>{const t=e.responseDomain,a=e.instrumentId,n=Object(i.b)();Er();return r.a.createElement("div",{style:{padding:16,margin:"auto",maxWidth:1e3}},r.a.createElement(Bt,{id:t.id||"new",type:"ResponseDomain"}),r.a.createElement(O.a,null),r.a.createElement(zt.b,{onSubmit:e=>{e=an(t,e),Object(Nt.isNil)(t.id)?n(Ie.create(a,e)):n(Ie.update(a,t.id,e))},initialValues:t,validate:Or,mutators:Object(_.a)({},nn.a),render:({handleSubmit:e,form:{mutators:{push:t,pop:n}},pristine:l,form:s,submitting:i,values:c})=>r.a.createElement("form",{onSubmit:e,noValidate:!0},r.a.createElement(lt.a,{style:{padding:16}},r.a.createElement(rt.a,{container:!0,alignItems:"flex-start",spacing:2},jr.map((e,t)=>r.a.createElement(rt.a,{item:!0,xs:e.size,key:t},r.a.createElement(yr,{item:e,values:c}))),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{type:"button",variant:"contained",onClick:s.reset,disabled:i||l},"Reset")),r.a.createElement(rt.a,{item:!0,style:{marginTop:16}},r.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:i},"Submit")),r.a.createElement(tn,{id:c.id,instrumentId:a,action:Ie}))))}))},gr=Object(v.a)(e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},side:{position:"absolute",width:"50%"},control:{width:"100%",padding:e.spacing(2)}}));var vr=e=>{let t=Object(o.g)();const a=Object(i.b)(),l=gr(),s=Object(Nt.get)(e,"match.params.instrument_id",""),c=Object(Nt.get)(e,"match.params.responseDomainId",null),u=Object(Nt.get)(e,"match.params.responseDomainType",null),p=Object(i.c)(e=>Object(Nt.get)(e.responseDomainNumerics,s,{})),b=Object(i.c)(e=>Object(Nt.get)(e.responseDomainTexts,s,{})),E=Object(i.c)(e=>Object(Nt.get)(e.responseDomainDatetimes,s,{})),O=[...Object.values(p),...Object.values(b),...Object.values(E)],j=O.find(e=>e.id==c&&e.type==u)||{};Object(n.useEffect)(()=>{a(Oe.all(s)),a(he.all(s)),a(Ie.all(s))},[]);const y=e=>{const t=e.label,a=e.type,n=e.id;return r.a.createElement(ut.a,null,r.a.createElement(bt.a,{primary:t,onClick:()=>{h(a,n)}}),r.a.createElement($a.a,null,r.a.createElement(ka.a,{label:a})))},h=(e,a)=>{const n=Object(m.reverse)(d.instruments.instrument.build.responseDomains.show,{instrument_id:s,responseDomainType:e,responseDomainId:a});t.push(n)};return r.a.createElement("div",{style:{height:500,width:"100%"}},r.a.createElement(Qt,{title:s,instrumentId:s},r.a.createElement(rt.a,{container:!0,spacing:3},r.a.createElement(rt.a,{item:!0,xs:4},r.a.createElement(lt.a,{className:l.control},r.a.createElement("h2",null,"Response Domains"),r.a.createElement(Fn,{instrumentId:s,objectTypes:["ResponseDomainText","ResponseDomainNumeric","ResponseDomainDatetime"]}),r.a.createElement(tt.a,{dense:!0},Object.values(O).map(e=>r.a.createElement(y,{label:e.label,type:e.type,id:e.id}))))),r.a.createElement(rt.a,{item:!0,xs:8},r.a.createElement(lt.a,{className:l.side},(()=>{switch(u){case"ResponseDomainNumeric":return r.a.createElement(mr,{responseDomain:j,instrumentId:s});case"ResponseDomainText":return r.a.createElement(br,{responseDomain:j,instrumentId:s});case"ResponseDomainDatetime":return r.a.createElement(hr,{responseDomain:j,instrumentId:s});default:return""}})())))))};var Ir=()=>"NoMatch";var _r=()=>{const e=Object(i.c)(e=>Object(Nt.get)(e.common,"redirect"));Object(i.b)();return e?r.a.createElement(o.a,{to:e}):""},Sr=a(257),Dr=a(421);const Nr=Object(Sr.a)({palette:{primary:{main:"#009de6"},secondary:{main:"#652d90"},admin:{main:"#37b34a"},error:{main:"#eb008b"},warning:{main:"#eb008b"},info:{main:"#faaf40"},success:{main:"#37b34a"}}});var Tr=()=>(console.log(d),r.a.createElement(Dr.a,{theme:Nr},r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(_r,null),r.a.createElement(o.d,null,r.a.createElement(u,{type:"guest",exact:!0,path:d.login,component:Je}),r.a.createElement(o.b,{exact:!0,path:"/",render:()=>r.a.createElement(o.a,{to:d.instruments.all})}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.map.show,component:Ka}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.show,component:en}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.show,component:Aa}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.codeLists.all,component:Hn}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.codeLists.show,component:Hn}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.codeLists.new,component:Hn}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.questionItems.all,component:er}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.questionItems.show,component:er}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.questionItems.new,component:er}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.questionGrids.all,component:sr}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.questionGrids.show,component:sr}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.questionGrids.new,component:sr}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.responseDomains.all,component:vr}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.responseDomains.show,component:vr}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.responseDomains.new,component:vr}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.instrument.build.constructs.show,component:An}),r.a.createElement(u,{type:"private",exact:!0,path:d.instruments.all,component:Ia}),r.a.createElement(u,{type:"private",exact:!0,path:d.datasets.all,component:_a}),r.a.createElement(u,{type:"private",exact:!0,path:"/datasets/:dataset_id",component:Da}),r.a.createElement(u,{type:"private",exact:!0,path:d.admin.datasets.all,component:va}),r.a.createElement(u,{type:"private",exact:!0,path:d.admin.import,component:ea}),r.a.createElement(u,{type:"private",exact:!0,path:d.admin.imports.all,component:oa}),r.a.createElement(u,{type:"private",exact:!0,path:d.admin.imports.show,component:sa}),r.a.createElement(u,{type:"private",exact:!0,path:d.admin.instruments.all,component:ga}),r.a.createElement(u,{type:"private",exact:!0,path:d.admin.instruments.importMappings,component:ya}),r.a.createElement(u,{type:"private",exact:!0,path:d.admin.datasets.importMappings,component:ha}),r.a.createElement(u,{type:"guest",component:Ir})))))),fr=a(84);const wr=e=>e.reduce((e,t)=>(e[t.id]=t,e),{});var Cr=Object(fr.c)({common:(e={},t)=>{switch(t.type){case"REDIRECT":return Object(_.a)(Object(_.a)({},e),{redirect:t.payload.to});case"REDIRECT_CLEAR":return Object(_.a)(Object(_.a)({},e),{redirect:void 0});default:return e}},auth:(e={isAuthUser:!!window.localStorage.getItem("jwt")},t)=>{switch(t.type){case"LOGIN":return window.localStorage.setItem("jwt",t.payload.jwt),{isAuthUser:!0};case"LOGOUT":return window.localStorage.removeItem("jwt"),{isAuthUser:!1};default:return e}},datasets:(e=[],t)=>{switch(t.type){case"LOAD_DATASETS":return wr(t.payload.datasets);case"LOAD_DATASET":return Object(_.a)(Object(_.a)({},e),{[t.payload.dataset.id]:t.payload.dataset});default:return e}},instruments:(e=[],t)=>{switch(t.type){case"LOAD_INSTRUMENTS":return t.payload.instruments.reduce((e,t)=>(e[t.prefix]=t,e),{});case"LOAD_INSTRUMENT":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrument.prefix]:t.payload.instrument});default:return e}},imports:(e=[],t)=>{switch(t.type){case"LOAD_ADMIN_IMPORTS":return wr(t.payload.imports);case"LOAD_ADMIN_IMPORT":return Object(_.a)(Object(_.a)({},e),{[t.payload.import.id]:t.payload.import});default:return e}},instrumentStats:(e=[],t)=>{switch(t.type){case"LOAD_INSTRUMENT_STATS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:t.payload.stats});default:return e}},cc_sequences:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_SEQUENCES":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.sequences)});case"LOAD_INSTRUMENT_SEQUENCE":var a=e[t.payload.instrumentId];return a[t.payload.sequence.id]=t.payload.sequence,Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:a});default:return e}},cc_statements:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_STATEMENTS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.statements)});case"LOAD_INSTRUMENT_STATEMENT":var a=e[t.payload.instrumentId];return a[t.payload.statement.id]=t.payload.statement,Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:a});default:return e}},cc_conditions:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_CONDITIONS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.conditions)});case"LOAD_INSTRUMENT_CONDITION":var a=e[t.payload.instrumentId];return a[t.payload.condition.id]=t.payload.condition,Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:a});default:return e}},cc_loops:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_LOOPS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.loops)});case"LOAD_INSTRUMENT_LOOP":var a=e[t.payload.instrumentId];return a[t.payload.loop.id]=t.payload.loop,Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:a});default:return e}},cc_questions:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_QUESTIONS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.questions)});case"LOAD_INSTRUMENT_QUESTION":var a=e[t.payload.instrumentId];return a[t.payload.question.id]=t.payload.question,Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:a});default:return e}},response_units:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_RESPONSE_UNITS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.responseUnits)});case"LOAD_INSTRUMENT_RESPONSE_UNIT":var a=e[t.payload.instrumentId];return a[t.payload.responseUnit.id]=t.payload.responseUnit,Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:a});default:return e}},questionItems:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_QUESTION_ITEMS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.questions)});case"LOAD_INSTRUMENT_QUESTION_ITEM":var a=Object(Nt.get)(e,t.payload.instrumentId,{});const r=Object(_.a)(Object(_.a)({},a),{[t.payload.questionItem.id]:t.payload.questionItem});return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:r});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("QuestionItem"===t.payload.objectType){var n=Object(Nt.get)(e,t.payload.instrumentId,{});return delete n[t.payload.id],Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:n})}return e;default:return e}},questionGrids:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_QUESTION_GRIDS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.questions)});case"LOAD_INSTRUMENT_QUESTION_GRID":var a=Object(Nt.get)(e,t.payload.instrumentId,{});const r=Object(_.a)(Object(_.a)({},a),{[t.payload.questionGrid.id]:t.payload.questionGrid});return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:r});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("QuestionGrid"===t.payload.objectType){var n=Object(Nt.get)(e,t.payload.instrumentId,{});return delete n[t.payload.id],Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:n})}return e;default:return e}},categories:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_CATEGORIES":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.categories)});default:return e}},codeLists:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_CODE_LISTS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.codeLists)});case"LOAD_INSTRUMENT_CODE_LIST":var a=Object(Nt.get)(e,t.payload.instrumentId,{});const n=Object(_.a)(Object(_.a)({},a),{[t.payload.codeList.id]:t.payload.codeList});return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:n});case"DELETE_INSTRUMENT_OBJECT_TYPE":return"CodeList"===t.payload.objectType?(delete(a=Object(Nt.get)(e,t.payload.instrumentId,{}))[t.payload.id],Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:a})):e;default:return e}},responseDomainNumerics:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_NUMERICS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.responseDomainNumerics)});case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_NUMERIC":var a=Object(Nt.get)(e,t.payload.instrumentId,{});const r=Object(_.a)(Object(_.a)({},a),{[t.payload.responseDomainNumeric.id]:t.payload.responseDomainNumeric});return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:r});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("ResponseDomainNumeric"===t.payload.objectType){var n=Object(Nt.get)(e,t.payload.instrumentId,{});return delete n[t.payload.id],Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:n})}return e;default:return e}},responseDomainTexts:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_TEXTS":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.responseDomainTexts)});case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_TEXT":var a=Object(Nt.get)(e,t.payload.instrumentId,{});const r=Object(_.a)(Object(_.a)({},a),{[t.payload.responseDomainText.id]:t.payload.responseDomainText});return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:r});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("ResponseDomainText"===t.payload.objectType){var n=Object(Nt.get)(e,t.payload.instrumentId,{});return delete n[t.payload.id],Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:n})}return e;default:return e}},responseDomainDatetimes:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_DATETIMES":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.responseDomainDatetimes)});case"LOAD_INSTRUMENT_RESPONSE_DOMAIN_DATETIME":var a=Object(Nt.get)(e,t.payload.instrumentId,{});const r=Object(_.a)(Object(_.a)({},a),{[t.payload.responseDomainDatetime.id]:t.payload.responseDomainDatetime});return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:r});case"DELETE_INSTRUMENT_OBJECT_TYPE":if("ResponseDomainDatetime"===t.payload.objectType){var n=Object(Nt.get)(e,t.payload.instrumentId,{});return delete n[t.payload.id],Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:n})}return e;default:return e}},datasetVariables:(e={},t)=>{switch(t.type){case"LOAD_DATASET_VARIABLES":return Object(_.a)(Object(_.a)({},e),{[t.payload.datasetId]:wr(t.payload.variables)});case"LOAD_DATASET_VARIABLE":var a=Object(Nt.get)(e,t.payload.datasetId,{});const n=Object(_.a)(Object(_.a)({},a),{[t.payload.variable.id]:t.payload.variable});return Object(_.a)(Object(_.a)({},e),{[t.payload.datasetId]:n});default:return e}},variables:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_VARIABLES":return Object(_.a)(Object(_.a)({},e),{[t.payload.instrumentId]:wr(t.payload.variables)});default:return e}},statuses:(e={},t)=>{var a;switch(t.type){case"SAVING":return a=t.payload.type+":"+t.payload.id,Object(_.a)(Object(_.a)({},e),{[a]:{saving:!0}});case"SAVED":return a=t.payload.type+":"+t.payload.id,Object(_.a)(Object(_.a)({},e),{[a]:{saved:!0}});case"ERROR":return a=t.payload.type+":"+t.payload.id,"object"===typeof t.payload.error&&null!==t.payload.error?Object(_.a)(Object(_.a)({},e),{[a]:{error:!0,errors:t.payload.error,errorMessage:""}}):Object(_.a)(Object(_.a)({},e),{[a]:{error:!0,errorMessage:t.payload.error}});default:return e}},topics:(e={},t)=>{switch(t.type){case"LOAD_TOPICS":return Object(_.a)(Object(_.a)({},e),wr(t.payload.topics));default:return e}},datasetImportMappings:(e={},t)=>{switch(t.type){case"LOAD_DATASET_IMPORT_MAPPINGS":return Object(_.a)(Object(_.a)({},e),{[t.payload.id]:wr(t.payload.importMappings)});case"LOAD_DATASET_IMPORT_MAPPING":var a=Object(Nt.get)(e,t.payload.id,{});const n=Object(_.a)(Object(_.a)({},a),{[t.payload.importMapping.id]:t.payload.importMapping});return Object(_.a)(Object(_.a)({},e),{[t.payload.datasetId]:n});default:return e}},instrumentImportMappings:(e={},t)=>{switch(t.type){case"LOAD_INSTRUMENT_IMPORT_MAPPINGS":return Object(_.a)(Object(_.a)({},e),{[t.payload.id]:wr(t.payload.importMappings)});case"LOAD_INSTRUMENT_IMPORT_MAPPING":var a=Object(Nt.get)(e,t.payload.id,{});const n=Object(_.a)(Object(_.a)({},a),{[t.payload.importMapping.id]:t.payload.importMapping});return Object(_.a)(Object(_.a)({},e),{[t.payload.datasetId]:n});default:return e}}}),xr=a(256),qr=Object(fr.d)(Cr,Object(fr.a)(xr.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,{store:qr},r.a.createElement(Tr,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[272,1,2]]]);
//# sourceMappingURL=main.1021fa2b.chunk.js.map